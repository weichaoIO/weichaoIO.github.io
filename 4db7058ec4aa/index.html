<!DOCTYPE html><html lang="zh-CN" data-default-color-scheme="auto"><head><meta charset="UTF-8"><link rel="apple-touch-icon" sizes="76x76" href="/img/my_icon.ico"><link rel="icon" href="/img/my_icon.ico"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=5,shrink-to-fit=no"><meta http-equiv="x-ua-compatible" content="ie=edge"><meta name="theme-color" content="#2f4154"><meta name="author" content="魏超"><meta name="keywords" content="魏超,weichao"><meta name="description" content="Reference  《FFmpeg 从入门到精通》    ffmpeg 命令参数组成  信息查询部分  查看支持的视频文件格式列表 1、输入命令： 1ffmpeg -formats 2、输出结果（只截取了部分）：  3、输出内容包括：    列数 说明     1 包含 2 个字段：（1）是否支持 Demuxing 多媒体文件封装格式（2）是否支持 Muxing 多媒体文件封装格式   2 多"><meta property="og:type" content="article"><meta property="og:title" content="ffmpeg 命令常用功能"><meta property="og:url" content="https://weichao.io/4db7058ec4aa/index.html"><meta property="og:site_name" content="『魏超』的 blog"><meta property="og:description" content="Reference  《FFmpeg 从入门到精通》    ffmpeg 命令参数组成  信息查询部分  查看支持的视频文件格式列表 1、输入命令： 1ffmpeg -formats 2、输出结果（只截取了部分）：  3、输出内容包括：    列数 说明     1 包含 2 个字段：（1）是否支持 Demuxing 多媒体文件封装格式（2）是否支持 Muxing 多媒体文件封装格式   2 多"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://weichao-io-1257283924.cos.ap-beijing.myqcloud.com/qldownload/ffmpeg-%E5%91%BD%E4%BB%A4%E5%B8%B8%E7%94%A8%E5%8A%9F%E8%83%BD1.png"><meta property="og:image" content="https://weichao-io-1257283924.cos.ap-beijing.myqcloud.com/qldownload/ffmpeg-%E5%91%BD%E4%BB%A4%E5%B8%B8%E7%94%A8%E5%8A%9F%E8%83%BD2.png"><meta property="og:image" content="https://weichao-io-1257283924.cos.ap-beijing.myqcloud.com/qldownload/ffmpeg-%E5%91%BD%E4%BB%A4%E5%B8%B8%E7%94%A8%E5%8A%9F%E8%83%BD3.png"><meta property="og:image" content="https://weichao-io-1257283924.cos.ap-beijing.myqcloud.com/qldownload/ffmpeg-%E5%91%BD%E4%BB%A4%E5%B8%B8%E7%94%A8%E5%8A%9F%E8%83%BD4.png"><meta property="og:image" content="https://weichao-io-1257283924.cos.ap-beijing.myqcloud.com/qldownload/ffmpeg-%E5%91%BD%E4%BB%A4%E5%B8%B8%E7%94%A8%E5%8A%9F%E8%83%BD5.png"><meta property="og:image" content="https://weichao-io-1257283924.cos.ap-beijing.myqcloud.com/qldownload/ffmpeg-%E5%91%BD%E4%BB%A4%E5%B8%B8%E7%94%A8%E5%8A%9F%E8%83%BD6.png"><meta property="og:image" content="https://weichao-io-1257283924.cos.ap-beijing.myqcloud.com/qldownload/ffmpeg-%E5%91%BD%E4%BB%A4%E5%B8%B8%E7%94%A8%E5%8A%9F%E8%83%BD7.png"><meta property="og:image" content="https://weichao-io-1257283924.cos.ap-beijing.myqcloud.com/qldownload/ffmpeg-%E5%91%BD%E4%BB%A4%E5%B8%B8%E7%94%A8%E5%8A%9F%E8%83%BD8.png"><meta property="og:image" content="https://weichao-io-1257283924.cos.ap-beijing.myqcloud.com/qldownload/ffmpeg-%E5%91%BD%E4%BB%A4%E5%B8%B8%E7%94%A8%E5%8A%9F%E8%83%BD9.png"><meta property="og:image" content="https://weichao-io-1257283924.cos.ap-beijing.myqcloud.com/qldownload/ffmpeg-%E5%91%BD%E4%BB%A4%E5%B8%B8%E7%94%A8%E5%8A%9F%E8%83%BD21.png"><meta property="og:image" content="https://weichao-io-1257283924.cos.ap-beijing.myqcloud.com/qldownload/ffmpeg-%E5%91%BD%E4%BB%A4%E5%B8%B8%E7%94%A8%E5%8A%9F%E8%83%BD22.png"><meta property="og:image" content="https://weichao-io-1257283924.cos.ap-beijing.myqcloud.com/qldownload/ffmpeg-%E5%91%BD%E4%BB%A4%E5%B8%B8%E7%94%A8%E5%8A%9F%E8%83%BD23.png"><meta property="og:image" content="https://weichao-io-1257283924.cos.ap-beijing.myqcloud.com/qldownload/ffmpeg-%E5%91%BD%E4%BB%A4%E5%B8%B8%E7%94%A8%E5%8A%9F%E8%83%BD31.png"><meta property="og:image" content="https://weichao-io-1257283924.cos.ap-beijing.myqcloud.com/qldownload/ffmpeg-%E5%91%BD%E4%BB%A4%E5%B8%B8%E7%94%A8%E5%8A%9F%E8%83%BD32.png"><meta property="og:image" content="https://weichao-io-1257283924.cos.ap-beijing.myqcloud.com/qldownload/ffmpeg-%E5%91%BD%E4%BB%A4%E5%B8%B8%E7%94%A8%E5%8A%9F%E8%83%BD33.png"><meta property="og:image" content="https://weichao-io-1257283924.cos.ap-beijing.myqcloud.com/qldownload/ffmpeg-%E5%91%BD%E4%BB%A4%E5%B8%B8%E7%94%A8%E5%8A%9F%E8%83%BD34.png"><meta property="og:image" content="https://weichao-io-1257283924.cos.ap-beijing.myqcloud.com/qldownload/ffmpeg-%E5%91%BD%E4%BB%A4%E5%B8%B8%E7%94%A8%E5%8A%9F%E8%83%BD35.png"><meta property="og:image" content="https://weichao-io-1257283924.cos.ap-beijing.myqcloud.com/qldownload/ffmpeg-%E5%91%BD%E4%BB%A4%E5%B8%B8%E7%94%A8%E5%8A%9F%E8%83%BD36.png"><meta property="og:image" content="https://weichao-io-1257283924.cos.ap-beijing.myqcloud.com/qldownload/ffmpeg-%E5%91%BD%E4%BB%A4%E5%B8%B8%E7%94%A8%E5%8A%9F%E8%83%BD37.png"><meta property="og:image" content="https://weichao-io-1257283924.cos.ap-beijing.myqcloud.com/qldownload/ffmpeg-%E5%91%BD%E4%BB%A4%E5%B8%B8%E7%94%A8%E5%8A%9F%E8%83%BD38.png"><meta property="og:image" content="https://weichao-io-1257283924.cos.ap-beijing.myqcloud.com/qldownload/ffmpeg-%E5%91%BD%E4%BB%A4%E5%B8%B8%E7%94%A8%E5%8A%9F%E8%83%BD39.png"><meta property="og:image" content="https://weichao-io-1257283924.cos.ap-beijing.myqcloud.com/qldownload/ffmpeg-%E5%91%BD%E4%BB%A4%E5%B8%B8%E7%94%A8%E5%8A%9F%E8%83%BD40.png"><meta property="og:image" content="https://weichao-io-1257283924.cos.ap-beijing.myqcloud.com/qldownload/ffmpeg-%E5%91%BD%E4%BB%A4%E5%B8%B8%E7%94%A8%E5%8A%9F%E8%83%BD41.png"><meta property="og:image" content="https://weichao-io-1257283924.cos.ap-beijing.myqcloud.com/qldownload/ffmpeg-%E5%91%BD%E4%BB%A4%E5%B8%B8%E7%94%A8%E5%8A%9F%E8%83%BD42.png"><meta property="og:image" content="https://weichao-io-1257283924.cos.ap-beijing.myqcloud.com/qldownload/ffmpeg-%E5%91%BD%E4%BB%A4%E5%B8%B8%E7%94%A8%E5%8A%9F%E8%83%BD43.png"><meta property="og:image" content="https://weichao-io-1257283924.cos.ap-beijing.myqcloud.com/qldownload/ffmpeg-%E5%91%BD%E4%BB%A4%E5%B8%B8%E7%94%A8%E5%8A%9F%E8%83%BD44.png"><meta property="og:image" content="https://weichao-io-1257283924.cos.ap-beijing.myqcloud.com/qldownload/ffmpeg-%E5%91%BD%E4%BB%A4%E5%B8%B8%E7%94%A8%E5%8A%9F%E8%83%BD45.png"><meta property="og:image" content="https://weichao-io-1257283924.cos.ap-beijing.myqcloud.com/qldownload/ffmpeg-%E5%91%BD%E4%BB%A4%E5%B8%B8%E7%94%A8%E5%8A%9F%E8%83%BD46.png"><meta property="og:image" content="https://weichao-io-1257283924.cos.ap-beijing.myqcloud.com/qldownload/ffmpeg-%E5%91%BD%E4%BB%A4%E5%B8%B8%E7%94%A8%E5%8A%9F%E8%83%BD10.png"><meta property="article:published_time" content="2018-05-12T12:47:25.000Z"><meta property="article:modified_time" content="2022-12-04T06:04:05.239Z"><meta property="article:author" content="魏超"><meta property="article:tag" content="魏超,weichao"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:image" content="https://weichao-io-1257283924.cos.ap-beijing.myqcloud.com/qldownload/ffmpeg-%E5%91%BD%E4%BB%A4%E5%B8%B8%E7%94%A8%E5%8A%9F%E8%83%BD1.png"><title>ffmpeg 命令常用功能 - 『魏超』的 blog</title><link rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css"><link rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css"><link rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css"><link rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css"><link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_hj8rtnfg7um.css"><link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_lbnruvf0jn.css"><link rel="stylesheet" href="/css/main.css"><link id="highlight-css" rel="stylesheet" href="/css/highlight.css"><link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css"><link rel="stylesheet" href="/css/custom.css"><link rel="stylesheet" href="//at.alicdn.com/t/c/font_1956623_vyed6le6uz.css"><script id="fluid-configs">var Fluid=window.Fluid||{};Fluid.ctx=Object.assign({},Fluid.ctx);var CONFIG={hostname:"weichao.io",root:"/",version:"1.9.4",typing:{enable:!1,typeSpeed:70,cursorChar:"_",loop:!1,scope:[]},anchorjs:{enable:!0,element:"h1,h2,h3,h4,h5,h6",placement:"left",visible:"hover",icon:""},progressbar:{enable:!0,height_px:3,color:"#29d",options:{showSpinner:!1,trickleSpeed:100}},code_language:{enable:!0,default:"TEXT"},copy_btn:!0,image_caption:{enable:!1},image_zoom:{enable:!0,img_url_replace:["",""]},toc:{enable:!0,placement:"right",headingSelector:"h1,h2,h3,h4,h5,h6",collapseDepth:2},lazyload:{enable:!0,loading_img:"/img/loading.gif",onlypost:!0,offset_factor:2},web_analytics:{enable:!0,follow_dnt:!0,baidu:null,google:null,gtag:null,tencent:{sid:null,cid:null},woyaola:null,cnzz:null,leancloud:{app_id:"kQcwfNV9f5OTEb51AgXNco4o-gzGzoHsz",app_key:"IVVmse4bqkjcVx2bEJiswbJc",server_url:"https://kqcwfnv9.lc-cn-n1-shared.com",path:"window.location.pathname",ignore_local:!1}},search_path:"/local-search.xml"};if(CONFIG.web_analytics.follow_dnt){var dntVal=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack;Fluid.ctx.dnt=dntVal&&(dntVal.startsWith("1")||dntVal.startsWith("yes")||dntVal.startsWith("on"))}</script><script src="/js/utils.js"></script><script src="/js/color-schema.js"></script><meta name="generator" content="Hexo 6.3.0"></head><body><header><div class="header-inner" style="height:70vh"><nav id="navbar" class="navbar fixed-top navbar-expand-lg navbar-dark scrolling-navbar"><div class="container"><a class="navbar-brand" href="/"><strong>『魏超』的 blog</strong> </a><button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation"><div class="animated-icon"><span></span><span></span><span></span></div></button><div class="collapse navbar-collapse" id="navbarSupportedContent"><ul class="navbar-nav ml-auto text-center"><li class="nav-item"><a class="nav-link" href="/"><i class="iconfont icon-my-home"></i> <span>首页</span></a></li><li class="nav-item dropdown"><a class="nav-link dropdown-toggle" target="_self" href="javascript:;" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><i class="iconfont icon-my-document"></i> <span>文档</span></a><div class="dropdown-menu" aria-labelledby="navbarDropdown"><a class="dropdown-item" href="/archives/"><i class="iconfont icon-my-archive"></i> <span>归档</span> </a><a class="dropdown-item" href="/categories/"><i class="iconfont icon-my-category"></i> <span>分类</span> </a><a class="dropdown-item" href="/tags/"><i class="iconfont icon-my-tag"></i> <span>标签</span></a></div></li><li class="nav-item dropdown"><a class="nav-link dropdown-toggle" target="_self" href="javascript:;" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><i class="iconfont icon-my-image"></i> <span>图库</span></a><div class="dropdown-menu" aria-labelledby="navbarDropdown"><a class="dropdown-item" href="/photo/"><i class="iconfont icon-my-camera"></i> <span>摄影</span> </a><a class="dropdown-item" href="/skiing/"><i class="iconfont icon-my-skiing"></i> <span>滑雪</span> </a><a class="dropdown-item" href="/motor/"><i class="iconfont icon-my-motor"></i> <span>摩托车</span></a></div></li><li class="nav-item"><a class="nav-link" href="/about/"><i class="iconfont icon-my-me"></i> <span>关于</span></a></li><li class="nav-item"><a class="nav-link" href="/links/"><i class="iconfont icon-my-link"></i> <span>友链</span></a></li><li class="nav-item" id="search-btn"><a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search"><i class="iconfont icon-search"></i></a></li><li class="nav-item" id="color-toggle-btn"><a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle"><i class="iconfont icon-dark" id="color-toggle-icon"></i></a></li></ul></div></div></nav><div id="banner" class="banner" parallax="true" style="background:url(/img/my_background.jpg) no-repeat center center;background-size:cover"><div class="full-bg-img"><div class="mask flex-center" style="background-color:rgba(0,0,0,.3)"><div class="banner-text text-center fade-in-up"><div class="h2"><span id="subtitle">ffmpeg 命令常用功能</span></div><div class="mt-3"><span class="post-meta mr-2"><i class="iconfont icon-author" aria-hidden="true"></i> 魏超 </span><span class="post-meta"><i class="iconfont icon-date-fill" aria-hidden="true"></i> <time datetime="2018-05-12 20:47" pubdate>2018年5月12日 晚上</time></span></div><div class="mt-1"><span class="post-meta mr-2"><i class="iconfont icon-chart"></i> 7.3k 字 </span><span class="post-meta mr-2"><i class="iconfont icon-clock-fill"></i> 62 分钟</span></div></div></div></div></div></div></header><main><div class="container-fluid nopadding-x"><div class="row nomargin-x"><div class="side-col d-none d-lg-block col-lg-2"></div><div class="col-lg-8 nopadding-x-md"><div class="container nopadding-x-md" id="board-ctn"><div id="board"><article class="post-content mx-auto"><h1 style="display:none">ffmpeg 命令常用功能</h1><p class="note note-info">本文最后更新于：1 年前</p><div class="markdown-body"><h1 id="reference"><a class="markdownIt-Anchor" href="#reference"></a> <strong>Reference</strong></h1><ul><li>《FFmpeg 从入门到精通》</li></ul><hr><h1 id="ffmpeg-命令参数组成"><a class="markdownIt-Anchor" href="#ffmpeg-命令参数组成"></a> <strong>ffmpeg 命令参数组成</strong></h1><h2 id="信息查询部分"><a class="markdownIt-Anchor" href="#信息查询部分"></a> <strong>信息查询部分</strong></h2><h3 id="查看支持的视频文件格式列表"><a class="markdownIt-Anchor" href="#查看支持的视频文件格式列表"></a> <strong>查看支持的视频文件格式列表</strong></h3><p>1、输入命令：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">ffmpeg -formats<br></code></pre></td></tr></table></figure><p>2、输出结果（只截取了部分）：</p><p><img src="https://weichao-io-1257283924.cos.ap-beijing.myqcloud.com/qldownload/ffmpeg-%E5%91%BD%E4%BB%A4%E5%B8%B8%E7%94%A8%E5%8A%9F%E8%83%BD1.png" alt=""></p><p>3、输出内容包括：</p><table><thead><tr><th>列数</th><th>说明</th></tr></thead><tbody><tr><td>1</td><td>包含 2 个字段：<br>（1）是否支持 Demuxing 多媒体文件封装格式<br>（2）是否支持 Muxing 多媒体文件封装格式</td></tr><tr><td>2</td><td>多媒体文件格式</td></tr><tr><td>3</td><td>文件格式的详细说明</td></tr></tbody></table><h3 id="查看支持的编码列表"><a class="markdownIt-Anchor" href="#查看支持的编码列表"></a> <strong>查看支持的编码列表</strong></h3><p>1、输入命令：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">ffmpeg -encoders<br></code></pre></td></tr></table></figure><p>2、输出结果（只截取了部分）：</p><p><img src="https://weichao-io-1257283924.cos.ap-beijing.myqcloud.com/qldownload/ffmpeg-%E5%91%BD%E4%BB%A4%E5%B8%B8%E7%94%A8%E5%8A%9F%E8%83%BD2.png" alt=""></p><p>3、输出内容包括：</p><table><thead><tr><th>列数</th><th>说明</th></tr></thead><tbody><tr><td>1</td><td>包含 6 个字段：<br>（1）编码类型是视频（V）、音频（A）、字幕（S）<br>（2）是否支持帧级别的多线程<br>（3）是否支持分片级别的多线程<br>（4）是否为实验版本<br>（5）是否支持 draw horiz band 模式<br>（6）是否支持直接渲染</td></tr><tr><td>2</td><td>编码格式</td></tr><tr><td>3</td><td>编码格式的说明</td></tr></tbody></table><h3 id="查看支持的解码列表"><a class="markdownIt-Anchor" href="#查看支持的解码列表"></a> <strong>查看支持的解码列表</strong></h3><p>1、输入命令：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">ffmpeg -decoders<br></code></pre></td></tr></table></figure><p>2、输出结果（只截取了部分）：</p><p><img src="https://weichao-io-1257283924.cos.ap-beijing.myqcloud.com/qldownload/ffmpeg-%E5%91%BD%E4%BB%A4%E5%B8%B8%E7%94%A8%E5%8A%9F%E8%83%BD3.png" alt=""></p><p>3、输出内容包括：</p><table><thead><tr><th>列数</th><th>说明</th></tr></thead><tbody><tr><td>1</td><td>包含 6 个字段：<br>（1）解码类型是视频（V）、音频（A）、字幕（S）<br>（2）是否支持帧级别的多线程<br>（3）是否支持分片级别的多线程<br>（4）是否为实验版本<br>（5）是否支持 draw horiz band 模式<br>（6）是否支持直接渲染</td></tr><tr><td>2</td><td>解码格式</td></tr><tr><td>3</td><td>解码格式的说明</td></tr></tbody></table><h3 id="查看支持的滤镜列表"><a class="markdownIt-Anchor" href="#查看支持的滤镜列表"></a> <strong>查看支持的滤镜列表</strong></h3><p>1、输入命令：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">ffmpeg -filters<br></code></pre></td></tr></table></figure><p>2、输出结果（只截取了部分）：</p><p><img src="https://weichao-io-1257283924.cos.ap-beijing.myqcloud.com/qldownload/ffmpeg-%E5%91%BD%E4%BB%A4%E5%B8%B8%E7%94%A8%E5%8A%9F%E8%83%BD4.png" alt=""></p><p>3、输出内容包括：</p><table><thead><tr><th>列数</th><th>说明</th></tr></thead><tbody><tr><td>1</td><td>包含 3 个字段：<br>（1）是否支持时间轴<br>（2）是否支持分片级别的多线程<br>（3）是否支持命令</td></tr><tr><td>2</td><td>滤镜名</td></tr><tr><td>3</td><td>转换方式：音频转音频（A-&gt;A）、视频转视频（V-&gt;V）等</td></tr><tr><td>4</td><td>滤镜作用说明</td></tr></tbody></table><h3 id="查看-flv-封装支持的参数"><a class="markdownIt-Anchor" href="#查看-flv-封装支持的参数"></a> <strong>查看 FLV 封装支持的参数</strong></h3><p>1、输入命令：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">ffmpeg -h muxer=flv<br></code></pre></td></tr></table></figure><p>2、输出结果：</p><p><img src="https://weichao-io-1257283924.cos.ap-beijing.myqcloud.com/qldownload/ffmpeg-%E5%91%BD%E4%BB%A4%E5%B8%B8%E7%94%A8%E5%8A%9F%E8%83%BD5.png" alt=""></p><p>3、输出内容包括：</p><table><thead><tr><th>部分</th><th>说明</th></tr></thead><tbody><tr><td>1</td><td>包括 4 个内容：<br>（1）扩展名<br>（2）MIME 类型<br>（3）默认的视频编码格式<br>（4）默认的音频编码格式</td></tr><tr><td>2</td><td>封装时支持的配置参数和说明</td></tr></tbody></table><h3 id="查看-flv-解封装支持的参数"><a class="markdownIt-Anchor" href="#查看-flv-解封装支持的参数"></a> <strong>查看 FLV 解封装支持的参数</strong></h3><p>1、输入命令：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">ffmpeg -h demuxer=flv<br></code></pre></td></tr></table></figure><p>2、输出结果（只截取了部分）：</p><p><img src="https://weichao-io-1257283924.cos.ap-beijing.myqcloud.com/qldownload/ffmpeg-%E5%91%BD%E4%BB%A4%E5%B8%B8%E7%94%A8%E5%8A%9F%E8%83%BD6.png" alt=""></p><p>3、输出内容包括：</p><table><thead><tr><th>部分</th><th>说明</th></tr></thead><tbody><tr><td>1</td><td>扩展名</td></tr><tr><td>2</td><td>解封装时支持的配置参数和说明</td></tr></tbody></table><h3 id="查看-avc-编码支持的参数"><a class="markdownIt-Anchor" href="#查看-avc-编码支持的参数"></a> <strong>查看 AVC 编码支持的参数</strong></h3><p>1、输入命令：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">ffmpeg -h encoder=h264<br></code></pre></td></tr></table></figure><p>2、输出结果（只截取了部分）：</p><p><img src="https://weichao-io-1257283924.cos.ap-beijing.myqcloud.com/qldownload/ffmpeg-%E5%91%BD%E4%BB%A4%E5%B8%B8%E7%94%A8%E5%8A%9F%E8%83%BD7.png" alt=""></p><p>3、输出内容包括：</p><table><thead><tr><th>部分</th><th>说明</th></tr></thead><tbody><tr><td>1</td><td>包括 3 个内容：<br>（1）支持的基本编码方式<br>（2）支持的多线程编码方式<br>（3）支持的像素的色彩格式</td></tr><tr><td>2</td><td>编码时支持的配置参数和说明</td></tr></tbody></table><h3 id="查看-avc-解码支持的参数"><a class="markdownIt-Anchor" href="#查看-avc-解码支持的参数"></a> <strong>查看 AVC 解码支持的参数</strong></h3><p>1、输入命令：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">ffmpeg -h decoder=h264<br></code></pre></td></tr></table></figure><p>2、输出结果：</p><p><img src="https://weichao-io-1257283924.cos.ap-beijing.myqcloud.com/qldownload/ffmpeg-%E5%91%BD%E4%BB%A4%E5%B8%B8%E7%94%A8%E5%8A%9F%E8%83%BD8.png" alt=""></p><p>3、输出内容包括：</p><table><thead><tr><th>部分</th><th>说明</th></tr></thead><tbody><tr><td>1</td><td>包括 2 个内容：<br>（1）支持的基本解码方式<br>（2）支持的多线程解码方式</td></tr><tr><td>2</td><td>解码时支持的配置参数和说明</td></tr></tbody></table><h3 id="查看-colorkey-滤镜支持的参数"><a class="markdownIt-Anchor" href="#查看-colorkey-滤镜支持的参数"></a> <strong>查看 colorkey 滤镜支持的参数</strong></h3><p>1、输入命令：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">ffmpeg -h filter=colorkey<br></code></pre></td></tr></table></figure><p>2、输出结果：</p><p><img src="https://weichao-io-1257283924.cos.ap-beijing.myqcloud.com/qldownload/ffmpeg-%E5%91%BD%E4%BB%A4%E5%B8%B8%E7%94%A8%E5%8A%9F%E8%83%BD9.png" alt=""></p><p>3、输出内容包括：</p><table><thead><tr><th>部分</th><th>说明</th></tr></thead><tbody><tr><td>1</td><td>包括 2 个内容：<br>（1）支持的色彩格式<br>（2）支持的多线程处理方式<br>（3）支持的输入和输出</td></tr><tr><td>2</td><td>支持的参数和说明</td></tr></tbody></table><h2 id="公共操作部分"><a class="markdownIt-Anchor" href="#公共操作部分"></a> <strong>公共操作部分</strong></h2><h2 id="文件操作部分"><a class="markdownIt-Anchor" href="#文件操作部分"></a> <strong>文件操作部分</strong></h2><h3 id="拆分出视频"><a class="markdownIt-Anchor" href="#拆分出视频"></a> <strong>拆分出视频</strong></h3><p>1、输入命令：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">ffmpeg -i sample.mp4 -vcodec copy -vbsf h264_mp4toannexb -an output.mp4<br></code></pre></td></tr></table></figure><p>2、输出结果：</p><p><img src="https://weichao-io-1257283924.cos.ap-beijing.myqcloud.com/qldownload/ffmpeg-%E5%91%BD%E4%BB%A4%E5%B8%B8%E7%94%A8%E5%8A%9F%E8%83%BD21.png" alt=""></p><h3 id="拆分出音频"><a class="markdownIt-Anchor" href="#拆分出音频"></a> <strong>拆分出音频</strong></h3><p>1、输入命令：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">ffmpeg -i sample.mp4 -acodec copy -vn output.aac<br></code></pre></td></tr></table></figure><p>2、输出结果：</p><p><img src="https://weichao-io-1257283924.cos.ap-beijing.myqcloud.com/qldownload/ffmpeg-%E5%91%BD%E4%BB%A4%E5%B8%B8%E7%94%A8%E5%8A%9F%E8%83%BD22.png" alt=""></p><h3 id="视频和音频合成"><a class="markdownIt-Anchor" href="#视频和音频合成"></a> <strong>视频和音频合成</strong></h3><p>1、输入命令：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">ffmpeg -i output.mp4 -i output.aac -vcodec copy -acodec copy -absf aac_adtstoasc test.mp4<br></code></pre></td></tr></table></figure><p>2、输出结果：</p><p><img src="https://weichao-io-1257283924.cos.ap-beijing.myqcloud.com/qldownload/ffmpeg-%E5%91%BD%E4%BB%A4%E5%B8%B8%E7%94%A8%E5%8A%9F%E8%83%BD23.png" alt=""></p><h3 id="切片"><a class="markdownIt-Anchor" href="#切片"></a> <strong>切片</strong></h3><p>segment 参数：</p><p>参数|类型|说明<br>–|–<br>reference_stream|字符串|切片参考用的 stream<br>segment_format|字符串|切片文件格式<br>segment_format_options|字符串|切片格式的私有操作参数<br>segment_list|字符串|切片列表主文件名<br>segment_list_flags|标签|m3u8 切片的存在形式：<br>live<br>cache<br>segment_list_size|整数|列表文件的长度<br>segment_list_type|标签|列表类型：<br>flat<br>csv<br>ext<br>ffconcat<br>m3u8<br>hls<br>segment_atclocktime|布尔|时钟频率生效参数，启动定时切片间隔用<br>segment_clocktime_offset|时间值|切片时钟偏移<br>segment_clocktime_wrap_duration|时间值|切片时钟回滚 duration<br>segment_time|字符串|切片的 duration<br>segment_time_delta|时间值|用于设置切片变化时间值<br>segment_times|字符串|设置切片的时间点<br>segment_frames|字符串|设置切片的帧位置<br>segment_wrap|整数|列表回滚阈值<br>segment_list_entry_prefix|字符串|写文件列表时写入每个切片路径的前置路径<br>segment_start_number|整数|列表中切片的起始基数<br>strftime|布尔|设置切片名为生成切片的时间点<br>break_non_keyframes|布尔|忽略关键帧，按照时间切片<br>individual_header_trailer|布尔|默认在每个切片中都写入文件头和文件结束容器<br>write_header_trailer|布尔|只在第一个文件写入文件头以及在最后一个文件写入文件结束容器<br>reset_timestamps|布尔|每个切片都重新初始化时间戳<br>initial_offset|时间值|设置初始化时间戳偏移</p><h4 id="segment_format"><a class="markdownIt-Anchor" href="#segment_format"></a> <strong>segment_format</strong></h4><p>HLS 切片格式是 MPEGTS，此处可以指定为其他格式，比如 MP4、FLV 等。<br>切割出来的 MP4 切片文件的时间戳与上一个 MP4 的结束时间戳是连续的。</p><p>1、输入命令：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">ffmpeg -re -i guibu.mp4 -c copy -f segment -segment_format mp4 test_output-%d.mp4<br></code></pre></td></tr></table></figure><p>2、输出结果：</p><p><img src="https://weichao-io-1257283924.cos.ap-beijing.myqcloud.com/qldownload/ffmpeg-%E5%91%BD%E4%BB%A4%E5%B8%B8%E7%94%A8%E5%8A%9F%E8%83%BD31.png" alt=""><br><img src="https://weichao-io-1257283924.cos.ap-beijing.myqcloud.com/qldownload/ffmpeg-%E5%91%BD%E4%BB%A4%E5%B8%B8%E7%94%A8%E5%8A%9F%E8%83%BD32.png" alt=""></p><p>3、生成的文件：</p><p>test_output-0.mp4～test_output-14.mp4</p><h4 id="segment_list-segment_list_type"><a class="markdownIt-Anchor" href="#segment_list-segment_list_type"></a> <strong>segment_list &amp;&amp; segment_list_type</strong></h4><h5 id="ffconcat"><a class="markdownIt-Anchor" href="#ffconcat"></a> <strong>ffconcat</strong></h5><p>生成 ffconcat 格式的文件索引列表。</p><p>1、输入命令：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">ffmpeg -re -i guibu.mp4 -c copy -f segment -segment_format mp4 -segment_list_type ffconcat -segment_list output.lst test-output-%d.mp4<br></code></pre></td></tr></table></figure><p>2、输出结果：</p><p><img src="https://weichao-io-1257283924.cos.ap-beijing.myqcloud.com/qldownload/ffmpeg-%E5%91%BD%E4%BB%A4%E5%B8%B8%E7%94%A8%E5%8A%9F%E8%83%BD33.png" alt=""><br><img src="https://weichao-io-1257283924.cos.ap-beijing.myqcloud.com/qldownload/ffmpeg-%E5%91%BD%E4%BB%A4%E5%B8%B8%E7%94%A8%E5%8A%9F%E8%83%BD34.png" alt=""></p><p>3、生成的文件：</p><p>test_output-0.mp4～test_output-14.mp4<br>output.lst</p><p>4、output.lst 的内容：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs xml">ffconcat version 1.0<br>file test-output-0.mp4<br>file test-output-1.mp4<br>file test-output-2.mp4<br>file test-output-3.mp4<br>file test-output-4.mp4<br>file test-output-5.mp4<br>file test-output-6.mp4<br>file test-output-7.mp4<br>file test-output-8.mp4<br>file test-output-9.mp4<br>file test-output-10.mp4<br>file test-output-11.mp4<br>file test-output-12.mp4<br>file test-output-13.mp4<br>file test-output-14.mp4<br></code></pre></td></tr></table></figure><h5 id="flat"><a class="markdownIt-Anchor" href="#flat"></a> <strong>flat</strong></h5><p>生成 FLAT 格式的文件索引列表。</p><p>1、输入命令：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">ffmpeg -re -i guibu.mp4 -c copy -f segment -segment_format mp4 -segment_list_type flat -segment_list output.txt test-output-%d.mp4<br></code></pre></td></tr></table></figure><p>2、输出结果：</p><p><img src="https://weichao-io-1257283924.cos.ap-beijing.myqcloud.com/qldownload/ffmpeg-%E5%91%BD%E4%BB%A4%E5%B8%B8%E7%94%A8%E5%8A%9F%E8%83%BD35.png" alt=""><br><img src="https://weichao-io-1257283924.cos.ap-beijing.myqcloud.com/qldownload/ffmpeg-%E5%91%BD%E4%BB%A4%E5%B8%B8%E7%94%A8%E5%8A%9F%E8%83%BD36.png" alt=""></p><p>3、生成的文件：</p><p>test_output-0.mp4～test_output-14.mp4<br>output.txt</p><p>4、output.txt 的内容：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs xml">test-output-0.mp4<br>test-output-1.mp4<br>test-output-2.mp4<br>test-output-3.mp4<br>test-output-4.mp4<br>test-output-5.mp4<br>test-output-6.mp4<br>test-output-7.mp4<br>test-output-8.mp4<br>test-output-9.mp4<br>test-output-10.mp4<br>test-output-11.mp4<br>test-output-12.mp4<br>test-output-13.mp4<br>test-output-14.mp4<br></code></pre></td></tr></table></figure><h5 id="csv"><a class="markdownIt-Anchor" href="#csv"></a> <strong>csv</strong></h5><p>生成 CSV 格式的文件索引列表。</p><p>1、输入命令：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">ffmpeg -re -i guibu.mp4 -c copy -f segment -segment_format mp4 -segment_list_type csv -segment_list output.csv test-output-%d.mp4<br></code></pre></td></tr></table></figure><p>2、输出结果：</p><p><img src="https://weichao-io-1257283924.cos.ap-beijing.myqcloud.com/qldownload/ffmpeg-%E5%91%BD%E4%BB%A4%E5%B8%B8%E7%94%A8%E5%8A%9F%E8%83%BD37.png" alt=""><br><img src="https://weichao-io-1257283924.cos.ap-beijing.myqcloud.com/qldownload/ffmpeg-%E5%91%BD%E4%BB%A4%E5%B8%B8%E7%94%A8%E5%8A%9F%E8%83%BD38.png" alt=""></p><p>3、生成的文件：</p><p>test_output-0.mp4～test_output-14.mp4<br>output.csv</p><p>4、output.csv 的内容：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs xml">test-output-0.mp4,0.000000,10.080000<br>test-output-1.mp4,10.080000,16.680000<br>test-output-2.mp4,16.680000,26.680000<br>test-output-3.mp4,26.680000,36.680000<br>test-output-4.mp4,36.680000,46.680000<br>test-output-5.mp4,46.680000,56.680000<br>test-output-6.mp4,56.680000,66.680000<br>test-output-7.mp4,66.680000,71.200000<br>test-output-8.mp4,71.200000,79.440000<br>test-output-9.mp4,79.440000,89.440000<br>test-output-10.mp4,89.440000,99.240000<br>test-output-11.mp4,99.240000,109.240000<br>test-output-12.mp4,109.240000,114.520000<br>test-output-13.mp4,114.520000,124.520000<br>test-output-14.mp4,124.520000,126.520000<br></code></pre></td></tr></table></figure><h5 id="m3u8"><a class="markdownIt-Anchor" href="#m3u8"></a> <strong>m3u8</strong></h5><p>生成 M3U8 格式的文件索引列表。</p><p>1、输入命令：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">ffmpeg -re -i guibu.mp4 -c copy -f segment -segment_format mp4 -segment_list_type m3u8 -segment_list output.m3u8 test-output-%d.mp4<br></code></pre></td></tr></table></figure><p>2、输出结果：</p><p><img src="https://weichao-io-1257283924.cos.ap-beijing.myqcloud.com/qldownload/ffmpeg-%E5%91%BD%E4%BB%A4%E5%B8%B8%E7%94%A8%E5%8A%9F%E8%83%BD39.png" alt=""><br><img src="https://weichao-io-1257283924.cos.ap-beijing.myqcloud.com/qldownload/ffmpeg-%E5%91%BD%E4%BB%A4%E5%B8%B8%E7%94%A8%E5%8A%9F%E8%83%BD40.png" alt=""></p><p>3、生成的文件：</p><p>test_output-0.mp4～test_output-14.mp4<br>output.m3u8</p><p>4、output.m3u8 的内容：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs xml">#EXTM3U<br>#EXT-X-VERSION:3<br>#EXT-X-MEDIA-SEQUENCE:0<br>#EXT-X-ALLOW-CACHE:YES<br>#EXT-X-TARGETDURATION:11<br>#EXTINF:10.080000,<br>test-output-0.mp4<br>#EXTINF:6.600000,<br>test-output-1.mp4<br>#EXTINF:10.000000,<br>test-output-2.mp4<br>#EXTINF:10.000000,<br>test-output-3.mp4<br>#EXTINF:10.000000,<br>test-output-4.mp4<br>#EXTINF:10.000000,<br>test-output-5.mp4<br>#EXTINF:10.000000,<br>test-output-6.mp4<br>#EXTINF:4.520000,<br>test-output-7.mp4<br>#EXTINF:8.240000,<br>test-output-8.mp4<br>#EXTINF:10.000000,<br>test-output-9.mp4<br>#EXTINF:9.800000,<br>test-output-10.mp4<br>#EXTINF:10.000000,<br>test-output-11.mp4<br>#EXTINF:5.280000,<br>test-output-12.mp4<br>#EXTINF:10.000000,<br>test-output-13.mp4<br>#EXTINF:2.000000,<br>test-output-14.mp4<br>#EXT-X-ENDLIST<br></code></pre></td></tr></table></figure><h4 id="reset_timestamps"><a class="markdownIt-Anchor" href="#reset_timestamps"></a> <strong>reset_timestamps</strong></h4><p>使每一片切片的时间戳归 0。</p><p>1、输入命令：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">ffmpeg -re -i guibu.flv -c copy -f segment -segment_format mp4 -reset_timestamps 1 test_output-%d.mp4<br></code></pre></td></tr></table></figure><p>2、输出结果：</p><p><img src="https://weichao-io-1257283924.cos.ap-beijing.myqcloud.com/qldownload/ffmpeg-%E5%91%BD%E4%BB%A4%E5%B8%B8%E7%94%A8%E5%8A%9F%E8%83%BD41.png" alt=""><br><img src="https://weichao-io-1257283924.cos.ap-beijing.myqcloud.com/qldownload/ffmpeg-%E5%91%BD%E4%BB%A4%E5%B8%B8%E7%94%A8%E5%8A%9F%E8%83%BD42.png" alt=""></p><p>3、生成的文件：</p><p>test_output-0.mp4～test_output-22.mp4</p><h4 id="segment_times"><a class="markdownIt-Anchor" href="#segment_times"></a> <strong>segment_times</strong></h4><p>按照指定的时间点切片，比如第 1 分钟、第 2 分钟、第 3 分钟。</p><p>1、输入命令：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">ffmpeg -re -i guibu.flv -c copy -f segment -segment_format mp4 -segment_times 60,120,180 test_output-%d.mp4<br></code></pre></td></tr></table></figure><p>2、输出结果：</p><p><img src="https://weichao-io-1257283924.cos.ap-beijing.myqcloud.com/qldownload/ffmpeg-%E5%91%BD%E4%BB%A4%E5%B8%B8%E7%94%A8%E5%8A%9F%E8%83%BD43.png" alt=""></p><p>3、生成的文件：</p><p>test_output-0.mp4～test_output-2.mp4</p><h4 id="ss"><a class="markdownIt-Anchor" href="#ss"></a> <strong>ss</strong></h4><p>指定剪切开头部分。<br>比如从一个视频文件的第 10 秒钟开始截取内容。</p><p>1、输入命令：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">ffmpeg -ss 10 -i guibu.flv -c copy output.ts<br></code></pre></td></tr></table></figure><p>2、输出结果：</p><p><img src="https://weichao-io-1257283924.cos.ap-beijing.myqcloud.com/qldownload/ffmpeg-%E5%91%BD%E4%BB%A4%E5%B8%B8%E7%94%A8%E5%8A%9F%E8%83%BD44.png" alt=""></p><h4 id="t"><a class="markdownIt-Anchor" href="#t"></a> <strong>t</strong></h4><p>指定视频总长度。<br>比如只截取一个视频文件的前 10 秒。</p><p>1、输入命令：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">ffmpeg -i guibu.flv -c copy -t 10 -copyts output.mp4<br></code></pre></td></tr></table></figure><p>2、输出结果：</p><p><img src="https://weichao-io-1257283924.cos.ap-beijing.myqcloud.com/qldownload/ffmpeg-%E5%91%BD%E4%BB%A4%E5%B8%B8%E7%94%A8%E5%8A%9F%E8%83%BD45.png" alt=""></p><h4 id="output_ts_offset"><a class="markdownIt-Anchor" href="#output_ts_offset"></a> <strong>output_ts_offset</strong></h4><p>指定输出文件的 start_time。<br>比如指定从第 120 秒开始，截取 10 秒的视频。</p><p>1、输入命令：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">ffmpeg -i guibu.flv -c copy -t 10 -output_ts_offset 120 output.mp4<br></code></pre></td></tr></table></figure><p>2、输出结果：</p><p><img src="https://weichao-io-1257283924.cos.ap-beijing.myqcloud.com/qldownload/ffmpeg-%E5%91%BD%E4%BB%A4%E5%B8%B8%E7%94%A8%E5%8A%9F%E8%83%BD46.png" alt=""></p><h2 id="视频操作部分"><a class="markdownIt-Anchor" href="#视频操作部分"></a> <strong>视频操作部分</strong></h2><h2 id="音频操作部分"><a class="markdownIt-Anchor" href="#音频操作部分"></a> <strong>音频操作部分</strong></h2><h2 id="字幕操作部分"><a class="markdownIt-Anchor" href="#字幕操作部分"></a> <strong>字幕操作部分</strong></h2><hr><h1 id="ffmpeg-封装转换和编码转换"><a class="markdownIt-Anchor" href="#ffmpeg-封装转换和编码转换"></a> <strong>ffmpeg 封装转换和编码转换</strong></h1><h2 id="封装转换"><a class="markdownIt-Anchor" href="#封装转换"></a> <strong>封装转换</strong></h2><p>AVFormatContext 部分参数：</p><p>参数|类型|说明<br>–|–<br>avioflags|标记<br>direct|format 的缓冲设置，默认为 0（有缓冲）<br>无缓冲<br>probesize|整数|在进行媒体数据处理前获得文件内容的大小<br>fflags|标记<br>flush_packets<br>genpts<br>nofillin<br>igndts<br>discadcorrupt<br>sortdts<br>keepside<br>fastseek<br>latm<br>nobuffer<br>bitexact|<br>立即将 packets 数据写入文件中<br>输出时按照正常规则产生 pts<br>不填写可以精确计算缺失的值<br>忽略 dts<br>丢弃损坏的帧<br>尝试以 dts 的顺序为准输出<br>不合并数据<br>快速 seek 操作，但是不够精确<br>设置 RTP MP4_LATM 生效<br>直接读取或写出，不存入 buffer，用于在直播采集时降低延迟<br>不写入随机或者不稳定的数据<br>seek2any|整数|支持随意位置 seek，这个 seek 不以 keyframe 为参考<br>analyzeduration|整数|制定解析媒体所需要花销的时间，值越大解析越准确，直播时减小该值可降低延迟<br>codec_whitelist|列表|设置可解析的 codec 的白名单<br>format_whitelist|列表|设置可解析的 format 的白名单<br>output_ts_offset|整数|设置输出文件的起始时间</p><h2 id="编码转换"><a class="markdownIt-Anchor" href="#编码转换"></a> <strong>编码转换</strong></h2><p>AVCodecContext 部分参数：</p><p>参数|类型|说明<br>–|–<br>b|整数|设置音频与视频码率，默认是 200 kb/s，可单独使用 b:v 设置视频码率，使用 b:a 设置音频码率<br>ab|整数|设置音频的码率，默认是 128 kb/s<br>g|整数|设置视频 GOP 大小，默认是 12 帧一个 GOP<br>ar|整数|设置音频采样率，默认为 0<br>ac|整数|设置音频通道数，默认为 0<br>bf|整数|设置连续编码为 B 帧的个数，默认为 0<br>maxrate|整数|最大码率设置，与 bufsize 一同使用，默认为 0<br>minrate|整数|最小码率设置，配合 maxrate 和 bufsize 可以设置为 CBR 模式，默认为 0<br>bufsize|整数|设置控制码率的 buffer 大小，默认为 0<br>keyint_min|整数|设置关键帧最小间隔，默认为 25<br>sc_threshold|整数|设置场景切换支持，默认为 0<br>me_threshold|整数|设置运动估计阈值，默认为 0<br>mb_threshold|整数|设置宏块阈值，默认为 0<br>profile|整数|设置音视频的 profile，默认为 -99<br>level|整数|设置音视频的 level，默认为 -99<br>timecode_frame_start|整数|设置 GOP 的开始时间，需要在 non-drop-frame 默认情况下使用<br>channel_layout|整数|设置音频通道的布局格式<br>threads|整数|设置编解码工作的线程数</p><h2 id="一个封装转换编码转换的例子"><a class="markdownIt-Anchor" href="#一个封装转换编码转换的例子"></a> <strong>一个封装转换+编码转换的例子</strong></h2><p>1、输入命令：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">ffmpeg -i ~/sample.mkv -vcodec mpeg4 -b:v 200k -r 15 -an output.mp4<br></code></pre></td></tr></table></figure><p>2、输出的信息：</p><p><img src="https://weichao-io-1257283924.cos.ap-beijing.myqcloud.com/qldownload/ffmpeg-%E5%91%BD%E4%BB%A4%E5%B8%B8%E7%94%A8%E5%8A%9F%E8%83%BD10.png" alt=""></p><hr></div><hr><div><div class="post-metas my-3"></div><div class="license-box my-3"><div class="license-title"><div>ffmpeg 命令常用功能</div><div>https://weichao.io/4db7058ec4aa/</div></div><div class="license-meta"><div class="license-meta-item"><div>作者</div><div>魏超</div></div><div class="license-meta-item license-meta-date"><div>发布于</div><div>2018年5月12日</div></div><div class="license-meta-item license-meta-date"><div>更新于</div><div>2022年12月4日</div></div><div class="license-meta-item"><div>许可协议</div><div><a target="_blank" href="https://creativecommons.org/licenses/by-nc-sa/4.0/"><span class="hint--top hint--rounded" aria-label="BY - 署名"><i class="iconfont icon-by"></i> </span></a><a target="_blank" href="https://creativecommons.org/licenses/by-nc-sa/4.0/"><span class="hint--top hint--rounded" aria-label="NC - 非商业性使用"><i class="iconfont icon-nc"></i> </span></a><a target="_blank" href="https://creativecommons.org/licenses/by-nc-sa/4.0/"><span class="hint--top hint--rounded" aria-label="SA - 相同方式共享"><i class="iconfont icon-sa"></i></span></a></div></div></div><div class="license-icon iconfont"></div></div><div class="post-prevnext my-3"><article class="post-prev col-6"><a href="/60d92f93211c/" title="ffplay 命令常用功能"><i class="iconfont icon-arrowleft"></i> <span class="hidden-mobile">ffplay 命令常用功能</span> <span class="visible-mobile">上一篇</span></a></article><article class="post-next col-6"><a href="/13759d3c0e43/" title="FFmpeg 简介"><span class="hidden-mobile">FFmpeg 简介</span> <span class="visible-mobile">下一篇</span> <i class="iconfont icon-arrowright"></i></a></article></div></div></article></div></div></div><div class="side-col d-none d-lg-block col-lg-2"><aside class="sidebar" style="margin-left:-1rem"><div id="toc"><p class="toc-header"><i class="iconfont icon-list"></i> <span>目录</span></p><div class="toc-body" id="toc-body"></div></div></aside></div></div></div><a id="scroll-top-button" aria-label="TOP" href="#" role="button"><i class="iconfont icon-arrowup" aria-hidden="true"></i></a><div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable modal-lg" role="document"><div class="modal-content"><div class="modal-header text-center"><h4 class="modal-title w-100 font-weight-bold">搜索</h4><button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button></div><div class="modal-body mx-3"><div class="md-form mb-5"><input type="text" id="local-search-input" class="form-control validate"> <label data-error="x" data-success="v" for="local-search-input">关键词</label></div><div class="list-group" id="local-search-result"></div></div></div></div></div></main><footer><div class="footer-inner"><div class="footer-content"><a href="https://hexo.io" target="_blank" rel="nofollow noopener"><i class="iconfont icon-my-hexo"></i>&nbsp;<span>博客框架Hexo&nbsp;&nbsp;</span></a> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><i class="iconfont icon-my-theme"></i>&nbsp;<span>博客主题Fluid&nbsp;&nbsp;</span></a> <a href="https://weichao.io" target="_blank" rel="nofollow noopener"><i class="iconfont icon-my-copyright"></i>&nbsp;2023<span>魏超</span></a></div><div class="statistics"><span id="leancloud-site-pv-container" style="display:none">总访问量 <span id="leancloud-site-pv"></span> 次 </span><span id="leancloud-site-uv-container" style="display:none">总访客数 <span id="leancloud-site-uv"></span> 人</span></div></div></footer><script src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js"></script><link rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css"><script>NProgress.configure({showSpinner:!1,trickleSpeed:100}),NProgress.start(),window.addEventListener("load",(function(){NProgress.done()}))</script><script src="https://lib.baomitu.com/jquery/3.6.0/jquery.min.js"></script><script src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js"></script><script src="/js/events.js"></script><script src="/js/plugins.js"></script><script src="/js/img-lazyload.js"></script><script>Fluid.utils.createScript("https://lib.baomitu.com/tocbot/4.18.2/tocbot.min.js",(function(){var t=jQuery("#toc");if(0!==t.length&&window.tocbot){var i=jQuery("#board-ctn").offset().top;window.tocbot.init(Object.assign({tocSelector:"#toc-body",contentSelector:".markdown-body",linkClass:"tocbot-link",activeLinkClass:"tocbot-active-link",listClass:"tocbot-list",isCollapsedClass:"tocbot-is-collapsed",collapsibleClass:"tocbot-is-collapsible",scrollSmooth:!0,includeTitleTags:!0,headingsOffset:-i},CONFIG.toc)),t.find(".toc-list-item").length>0&&t.css("visibility","visible"),Fluid.events.registerRefreshCallback((function(){if("tocbot"in window){tocbot.refresh();var t=jQuery("#toc");if(0===t.length||!tocbot)return;t.find(".toc-list-item").length>0&&t.css("visibility","visible")}}))}}))</script><script src="https://lib.baomitu.com/clipboard.js/2.0.11/clipboard.min.js"></script><script>Fluid.plugins.codeWidget()</script><script>Fluid.utils.createScript("https://lib.baomitu.com/anchor-js/4.3.1/anchor.min.js",(function(){window.anchors.options={placement:CONFIG.anchorjs.placement,visible:CONFIG.anchorjs.visible},CONFIG.anchorjs.icon&&(window.anchors.options.icon=CONFIG.anchorjs.icon);var n=(CONFIG.anchorjs.element||"h1,h2,h3,h4,h5,h6").split(","),o=[];for(var s of n)o.push(".markdown-body > "+s.trim());"left"===CONFIG.anchorjs.placement&&(window.anchors.options.class="anchorjs-link-left"),window.anchors.add(o.join(", ")),Fluid.events.registerRefreshCallback((function(){if("anchors"in window){anchors.removeAll();var n=(CONFIG.anchorjs.element||"h1,h2,h3,h4,h5,h6").split(","),o=[];for(var s of n)o.push(".markdown-body > "+s.trim());"left"===CONFIG.anchorjs.placement&&(anchors.options.class="anchorjs-link-left"),anchors.add(o.join(", "))}}))}))</script><script>Fluid.utils.createScript("https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js",(function(){Fluid.plugins.fancyBox()}))</script><script defer src="/js/leancloud.js"></script><script src="/js/local-search.js"></script><script src="/js/boot.js"></script><noscript><div class="noscript-warning">博客在允许 JavaScript 运行的环境下浏览效果更佳</div></noscript></body></html>