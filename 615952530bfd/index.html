<!DOCTYPE html><html lang="zh-CN" data-default-color-scheme="auto"><head><meta charset="UTF-8"><link rel="apple-touch-icon" sizes="76x76" href="/img/my_icon.ico"><link rel="icon" href="/img/my_icon.ico"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=5,shrink-to-fit=no"><meta http-equiv="x-ua-compatible" content="ie=edge"><meta name="theme-color" content="#2f4154"><meta name="author" content="魏超"><meta name="keywords" content="魏超,weichao"><meta name="description" content="语法糖指的是在计算机语言中添加的某种语法，这种语法对语言的编译结果和功能并没有实际影响，但是却能更方便程序员使用该语言。"><meta property="og:type" content="article"><meta property="og:title" content="Java 语言的语法糖"><meta property="og:url" content="https://weichao.io/615952530bfd/index.html"><meta property="og:site_name" content="『魏超』的 blog"><meta property="og:description" content="语法糖指的是在计算机语言中添加的某种语法，这种语法对语言的编译结果和功能并没有实际影响，但是却能更方便程序员使用该语言。"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://weichao-io-1257283924.cos.ap-beijing.myqcloud.com/qldownload/Java-%E8%AF%AD%E8%A8%80%E7%9A%84%E8%AF%AD%E6%B3%95%E7%B3%96/1.png"><meta property="og:image" content="https://weichao-io-1257283924.cos.ap-beijing.myqcloud.com/qldownload/Java-%E8%AF%AD%E8%A8%80%E7%9A%84%E8%AF%AD%E6%B3%95%E7%B3%96/2.png"><meta property="og:image" content="https://weichao-io-1257283924.cos.ap-beijing.myqcloud.com/qldownload/Java-%E8%AF%AD%E8%A8%80%E7%9A%84%E8%AF%AD%E6%B3%95%E7%B3%96/3.png"><meta property="og:image" content="https://weichao-io-1257283924.cos.ap-beijing.myqcloud.com/qldownload/Java-%E8%AF%AD%E8%A8%80%E7%9A%84%E8%AF%AD%E6%B3%95%E7%B3%96/4.png"><meta property="og:image" content="https://weichao-io-1257283924.cos.ap-beijing.myqcloud.com/qldownload/Java-%E8%AF%AD%E8%A8%80%E7%9A%84%E8%AF%AD%E6%B3%95%E7%B3%96/5.png"><meta property="og:image" content="https://weichao-io-1257283924.cos.ap-beijing.myqcloud.com/qldownload/Java-%E8%AF%AD%E8%A8%80%E7%9A%84%E8%AF%AD%E6%B3%95%E7%B3%96/6.png"><meta property="og:image" content="https://weichao-io-1257283924.cos.ap-beijing.myqcloud.com/qldownload/Java-%E8%AF%AD%E8%A8%80%E7%9A%84%E8%AF%AD%E6%B3%95%E7%B3%96/7.png"><meta property="og:image" content="https://weichao-io-1257283924.cos.ap-beijing.myqcloud.com/qldownload/Java-%E8%AF%AD%E8%A8%80%E7%9A%84%E8%AF%AD%E6%B3%95%E7%B3%96/8.png"><meta property="og:image" content="https://weichao-io-1257283924.cos.ap-beijing.myqcloud.com/qldownload/Java-%E8%AF%AD%E8%A8%80%E7%9A%84%E8%AF%AD%E6%B3%95%E7%B3%96/9.png"><meta property="og:image" content="https://weichao-io-1257283924.cos.ap-beijing.myqcloud.com/qldownload/Java-%E8%AF%AD%E8%A8%80%E7%9A%84%E8%AF%AD%E6%B3%95%E7%B3%96/10.png"><meta property="og:image" content="https://weichao-io-1257283924.cos.ap-beijing.myqcloud.com/qldownload/Java-%E8%AF%AD%E8%A8%80%E7%9A%84%E8%AF%AD%E6%B3%95%E7%B3%96/11.png"><meta property="og:image" content="https://weichao-io-1257283924.cos.ap-beijing.myqcloud.com/qldownload/Java-%E8%AF%AD%E8%A8%80%E7%9A%84%E8%AF%AD%E6%B3%95%E7%B3%96/12.png"><meta property="og:image" content="https://weichao-io-1257283924.cos.ap-beijing.myqcloud.com/qldownload/Java-%E8%AF%AD%E8%A8%80%E7%9A%84%E8%AF%AD%E6%B3%95%E7%B3%96/13.png"><meta property="og:image" content="https://weichao-io-1257283924.cos.ap-beijing.myqcloud.com/qldownload/Java-%E8%AF%AD%E8%A8%80%E7%9A%84%E8%AF%AD%E6%B3%95%E7%B3%96/14.png"><meta property="og:image" content="https://weichao-io-1257283924.cos.ap-beijing.myqcloud.com/qldownload/Java-%E8%AF%AD%E8%A8%80%E7%9A%84%E8%AF%AD%E6%B3%95%E7%B3%96/15.png"><meta property="og:image" content="https://weichao-io-1257283924.cos.ap-beijing.myqcloud.com/qldownload/Java-%E8%AF%AD%E8%A8%80%E7%9A%84%E8%AF%AD%E6%B3%95%E7%B3%96/16.png"><meta property="og:image" content="https://weichao-io-1257283924.cos.ap-beijing.myqcloud.com/qldownload/Java-%E8%AF%AD%E8%A8%80%E7%9A%84%E8%AF%AD%E6%B3%95%E7%B3%96/17.png"><meta property="og:image" content="https://weichao-io-1257283924.cos.ap-beijing.myqcloud.com/qldownload/Java-%E8%AF%AD%E8%A8%80%E7%9A%84%E8%AF%AD%E6%B3%95%E7%B3%96/18.png"><meta property="og:image" content="https://weichao-io-1257283924.cos.ap-beijing.myqcloud.com/qldownload/Java-%E8%AF%AD%E8%A8%80%E7%9A%84%E8%AF%AD%E6%B3%95%E7%B3%96/19.png"><meta property="og:image" content="https://weichao-io-1257283924.cos.ap-beijing.myqcloud.com/qldownload/Java-%E8%AF%AD%E8%A8%80%E7%9A%84%E8%AF%AD%E6%B3%95%E7%B3%96/20.png"><meta property="og:image" content="https://weichao-io-1257283924.cos.ap-beijing.myqcloud.com/qldownload/Java-%E8%AF%AD%E8%A8%80%E7%9A%84%E8%AF%AD%E6%B3%95%E7%B3%96/21.png"><meta property="og:image" content="https://weichao-io-1257283924.cos.ap-beijing.myqcloud.com/qldownload/Java-%E8%AF%AD%E8%A8%80%E7%9A%84%E8%AF%AD%E6%B3%95%E7%B3%96/22.png"><meta property="og:image" content="https://weichao-io-1257283924.cos.ap-beijing.myqcloud.com/qldownload/Java-%E8%AF%AD%E8%A8%80%E7%9A%84%E8%AF%AD%E6%B3%95%E7%B3%96/23.png"><meta property="og:image" content="https://weichao-io-1257283924.cos.ap-beijing.myqcloud.com/qldownload/Java-%E8%AF%AD%E8%A8%80%E7%9A%84%E8%AF%AD%E6%B3%95%E7%B3%96/24.png"><meta property="og:image" content="https://weichao-io-1257283924.cos.ap-beijing.myqcloud.com/qldownload/Java-%E8%AF%AD%E8%A8%80%E7%9A%84%E8%AF%AD%E6%B3%95%E7%B3%96/25.png"><meta property="og:image" content="https://weichao-io-1257283924.cos.ap-beijing.myqcloud.com/qldownload/Java-%E8%AF%AD%E8%A8%80%E7%9A%84%E8%AF%AD%E6%B3%95%E7%B3%96/27.png"><meta property="og:image" content="https://weichao-io-1257283924.cos.ap-beijing.myqcloud.com/qldownload/Java-%E8%AF%AD%E8%A8%80%E7%9A%84%E8%AF%AD%E6%B3%95%E7%B3%96/28.png"><meta property="article:published_time" content="2022-12-13T00:00:00.000Z"><meta property="article:modified_time" content="2023-02-14T03:51:26.695Z"><meta property="article:author" content="魏超"><meta property="article:tag" content="Java"><meta property="article:tag" content="语法糖"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:image" content="https://weichao-io-1257283924.cos.ap-beijing.myqcloud.com/qldownload/Java-%E8%AF%AD%E8%A8%80%E7%9A%84%E8%AF%AD%E6%B3%95%E7%B3%96/1.png"><title>Java 语言的语法糖 - 『魏超』的 blog</title><link rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css"><link rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css"><link rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css"><link rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css"><link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_hj8rtnfg7um.css"><link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_lbnruvf0jn.css"><link rel="stylesheet" href="/css/main.css"><link id="highlight-css" rel="stylesheet" href="/css/highlight.css"><link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css"><link rel="stylesheet" href="/css/custom.css"><link rel="stylesheet" href="//at.alicdn.com/t/c/font_1956623_vyed6le6uz.css"><script id="fluid-configs">var Fluid=window.Fluid||{};Fluid.ctx=Object.assign({},Fluid.ctx);var CONFIG={hostname:"weichao.io",root:"/",version:"1.9.4",typing:{enable:!1,typeSpeed:70,cursorChar:"_",loop:!1,scope:[]},anchorjs:{enable:!0,element:"h1,h2,h3,h4,h5,h6",placement:"left",visible:"hover",icon:""},progressbar:{enable:!0,height_px:3,color:"#29d",options:{showSpinner:!1,trickleSpeed:100}},code_language:{enable:!0,default:"TEXT"},copy_btn:!0,image_caption:{enable:!1},image_zoom:{enable:!0,img_url_replace:["",""]},toc:{enable:!0,placement:"right",headingSelector:"h1,h2,h3,h4,h5,h6",collapseDepth:2},lazyload:{enable:!0,loading_img:"/img/loading.gif",onlypost:!0,offset_factor:2},web_analytics:{enable:!0,follow_dnt:!0,baidu:null,google:null,gtag:null,tencent:{sid:null,cid:null},woyaola:null,cnzz:null,leancloud:{app_id:"kQcwfNV9f5OTEb51AgXNco4o-gzGzoHsz",app_key:"IVVmse4bqkjcVx2bEJiswbJc",server_url:"https://kqcwfnv9.lc-cn-n1-shared.com",path:"window.location.pathname",ignore_local:!1}},search_path:"/local-search.xml"};if(CONFIG.web_analytics.follow_dnt){var dntVal=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack;Fluid.ctx.dnt=dntVal&&(dntVal.startsWith("1")||dntVal.startsWith("yes")||dntVal.startsWith("on"))}</script><script src="/js/utils.js"></script><script src="/js/color-schema.js"></script><meta name="generator" content="Hexo 6.3.0"></head><body><header><div class="header-inner" style="height:70vh"><nav id="navbar" class="navbar fixed-top navbar-expand-lg navbar-dark scrolling-navbar"><div class="container"><a class="navbar-brand" href="/"><strong>『魏超』的 blog</strong> </a><button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation"><div class="animated-icon"><span></span><span></span><span></span></div></button><div class="collapse navbar-collapse" id="navbarSupportedContent"><ul class="navbar-nav ml-auto text-center"><li class="nav-item"><a class="nav-link" href="/"><i class="iconfont icon-my-home"></i> <span>首页</span></a></li><li class="nav-item dropdown"><a class="nav-link dropdown-toggle" target="_self" href="javascript:;" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><i class="iconfont icon-my-document"></i> <span>文档</span></a><div class="dropdown-menu" aria-labelledby="navbarDropdown"><a class="dropdown-item" href="/archives/"><i class="iconfont icon-my-archive"></i> <span>归档</span> </a><a class="dropdown-item" href="/categories/"><i class="iconfont icon-my-category"></i> <span>分类</span> </a><a class="dropdown-item" href="/tags/"><i class="iconfont icon-my-tag"></i> <span>标签</span></a></div></li><li class="nav-item dropdown"><a class="nav-link dropdown-toggle" target="_self" href="javascript:;" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><i class="iconfont icon-my-image"></i> <span>图库</span></a><div class="dropdown-menu" aria-labelledby="navbarDropdown"><a class="dropdown-item" href="/photo/"><i class="iconfont icon-my-camera"></i> <span>摄影</span> </a><a class="dropdown-item" href="/skiing/"><i class="iconfont icon-my-skiing"></i> <span>滑雪</span> </a><a class="dropdown-item" href="/motor/"><i class="iconfont icon-my-motor"></i> <span>摩托车</span></a></div></li><li class="nav-item"><a class="nav-link" href="/about/"><i class="iconfont icon-my-me"></i> <span>关于</span></a></li><li class="nav-item"><a class="nav-link" href="/links/"><i class="iconfont icon-my-link"></i> <span>友链</span></a></li><li class="nav-item" id="search-btn"><a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search"><i class="iconfont icon-search"></i></a></li><li class="nav-item" id="color-toggle-btn"><a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle"><i class="iconfont icon-dark" id="color-toggle-icon"></i></a></li></ul></div></div></nav><div id="banner" class="banner" parallax="true" style="background:url(/img/banner_book.jpg) no-repeat center center;background-size:cover"><div class="full-bg-img"><div class="mask flex-center" style="background-color:rgba(0,0,0,.3)"><div class="banner-text text-center fade-in-up"><div class="h2"><span id="subtitle">Java 语言的语法糖</span></div><div class="mt-3"><span class="post-meta mr-2"><i class="iconfont icon-author" aria-hidden="true"></i> 魏超 </span><span class="post-meta"><i class="iconfont icon-date-fill" aria-hidden="true"></i> <time datetime="2022-12-13 08:00" pubdate>2022年12月13日 早上</time></span></div><div class="mt-1"><span class="post-meta mr-2"><i class="iconfont icon-chart"></i> 23k 字 </span><span class="post-meta mr-2"><i class="iconfont icon-clock-fill"></i> 195 分钟</span></div></div></div></div></div></div></header><main><div class="container-fluid nopadding-x"><div class="row nomargin-x"><div class="side-col d-none d-lg-block col-lg-2"><aside class="sidebar category-bar" style="margin-right:-1rem"><div class="category-list"><div class="category row nomargin-x"><a class="category-item list-group-item category-item-action col-10 col-md-11 col-xm-11" title="Java" id="heading-d52387880e1ea22817a72d3759213819" role="tab" data-toggle="collapse" href="#collapse-d52387880e1ea22817a72d3759213819" aria-expanded="true">Java <span class="list-group-count">(1)</span> <i class="iconfont icon-arrowright"></i></a><div class="category-collapse collapse show" id="collapse-d52387880e1ea22817a72d3759213819" role="tabpanel" aria-labelledby="heading-d52387880e1ea22817a72d3759213819"><div class="category-post-list"></div><div class="category-sub row nomargin-x"><a class="category-subitem list-group-item category-item-action col-10 col-md-11 col-xm-11" title="语法糖" id="heading-488e22142a85401e7dfb1a785e32a3cc" role="tab" data-toggle="collapse" href="#collapse-488e22142a85401e7dfb1a785e32a3cc" aria-expanded="true">语法糖 <span class="list-group-count">(1)</span> <i class="iconfont icon-arrowright"></i></a><div class="category-collapse collapse show" id="collapse-488e22142a85401e7dfb1a785e32a3cc" role="tabpanel" aria-labelledby="heading-488e22142a85401e7dfb1a785e32a3cc"><div class="category-post-list"><a href="/615952530bfd/" title="Java 语言的语法糖" class="list-group-item list-group-item-action active"><span class="category-post">Java 语言的语法糖</span></a></div></div></div></div></div></div></aside></div><div class="col-lg-8 nopadding-x-md"><div class="container nopadding-x-md" id="board-ctn"><div id="board"><article class="post-content mx-auto"><h1 style="display:none">Java 语言的语法糖</h1><p class="note note-info">本文最后更新于：3 个月前</p><div class="markdown-body"><h1 id="reference"><a class="markdownIt-Anchor" href="#reference"></a> <strong>Reference</strong></h1><ul><li><a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Java_version_history" title="https://en.wikipedia.org/wiki/Java_version_history">Java version history</a></li></ul><h1 id="环境和工具"><a class="markdownIt-Anchor" href="#环境和工具"></a> <strong>环境和工具</strong></h1><ul><li><a target="_blank" rel="noopener" href="https://openjdk.org/" title="https://openjdk.org/">JDK 19</a></li><li><a target="_blank" rel="noopener" href="https://www.eclipse.org/downloads/packages/release" title="https://www.eclipse.org/downloads/packages/release">Eclipse 2022-12 (v4.26.0)</a></li><li>反编译 Class 文件：<ul><li><a target="_blank" rel="noopener" href="https://github.com/leibnitz27/cfr/releases" title="https://github.com/leibnitz27/cfr/releases">CFR v0.152</a> <code>只有这个可以反编译出 lambda 表达式的实现细节；没有 GUI，需要执行命令 java -jar cfr.jar &lt;Class 文件&gt;</code></li><li><a target="_blank" rel="noopener" href="http://www.kpdus.com/jad.html" title="http://www.kpdus.com/jad.html">Jad v1.5.8g</a><code>没有 GUI，需要执行命令 jad.exe &lt;Class 文件&gt;</code></li><li><a target="_blank" rel="noopener" href="https://www.ghxi.com/beyondcompare.html" title="https://www.ghxi.com/beyondcompare.html">Beyond Compare 4</a><ul><li><a target="_blank" rel="noopener" href="https://www.scootersoftware.com/download.php?zz=kb_moreformatsv4" title="https://www.scootersoftware.com/download.php?zz=kb_moreformatsv4">Java class to source、Java class to source tidied</a> <code>Beyond Compare 反编译 Class 文件的插件，内部使用的是 Jad v1.5.8g</code></li></ul></li><li><s><a target="_blank" rel="noopener" href="https://github.com/deathmarine/Luyten/releases" title="https://github.com/deathmarine/Luyten/releases">Luyten v0.5.4</a></s><code>有 GUI；不能反编译出 lambda 表达式的实现细节</code></li><li><s><a target="_blank" rel="noopener" href="https://github.com/java-decompiler/jd-gui/releases" title="https://github.com/java-decompiler/jd-gui/releases">jd-gui-windows-1.6.6</a></s><code>最高支持到 JDK 13</code></li><li><s>jad.exe + net.sf.jadclipse_3.3.0.jar</s><code>Eclipse 反编译 Class 文件的插件。无法反编译，Eclipse 试了 2019-09 v4.13.0，JDK 最低试到了 JDK 8 也不行</code></li><li><s>jd-eclipse-2.0.0</s><code>Eclipse 反编译 Class 文件的插件。无法反编译，Eclipse 试了 2019-09 v4.13.0，JDK 最低试到了 JDK 8 也不行</code></li></ul></li><li><a target="_blank" rel="noopener" href="http://tools.jb51.net/code/codecolor" title="http://tools.jb51.net/code/codecolor">在线代码高亮显示工具</a></li><li><a target="_blank" rel="noopener" href="https://www.ghxi.com/winhex.html" title="https://www.ghxi.com/winhex.html">WinHex v20.7</a></li></ul><h1 id="不能确定-jdk-版本的语法糖"><a class="markdownIt-Anchor" href="#不能确定-jdk-版本的语法糖"></a> <strong>不能确定 JDK 版本的语法糖</strong></h1><h2><a class="markdownIt-Anchor" href="#"></a> <strong>+</strong></h2><p><code>SyntacticSugar\src\io\weichao\Plus.java</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs Java"><span class="hljs-keyword">package</span> io.weichao;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Plus</span> &#123;<br>	<span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>		<span class="hljs-type">byte</span> <span class="hljs-variable">b1</span> <span class="hljs-operator">=</span> (<span class="hljs-type">byte</span>) <span class="hljs-number">254</span>;<br>		System.out.println(<span class="hljs-string">&quot;foo &quot;</span> + b1 + ((<span class="hljs-type">byte</span>) <span class="hljs-number">254</span> &gt; (<span class="hljs-type">byte</span>) <span class="hljs-number">1</span>));<br>	&#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>编译后生成：<code>SyntacticSugar\bin\io\weichao\Plus.class</code></p><p>反编译使用的命令：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">jad.exe -noctor -nonlb -o -p -space Plus.class<br></code></pre></td></tr></table></figure><p>反编译后：<br><img src="https://weichao-io-1257283924.cos.ap-beijing.myqcloud.com/qldownload/Java-%E8%AF%AD%E8%A8%80%E7%9A%84%E8%AF%AD%E6%B3%95%E7%B3%96/1.png" srcset="/img/loading.gif" lazyload alt=""></p><p>解语法糖：</p><ul><li>本质是使用了 StringBuilder。</li></ul><h2 id="constant-folding-常量折叠"><a class="markdownIt-Anchor" href="#constant-folding-常量折叠"></a> <strong>Constant Folding <code>常量折叠</code></strong></h2><p><code>SyntacticSugar\src\io\weichao\ConstantFolding.java</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs Java"><span class="hljs-keyword">package</span> io.weichao;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ConstantFolding</span> &#123;<br>	<span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>		<span class="hljs-type">String</span> <span class="hljs-variable">s1</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;a&quot;</span> + <span class="hljs-string">&quot;bc&quot;</span>;<br>		<span class="hljs-type">String</span> <span class="hljs-variable">s2</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;ab&quot;</span> + <span class="hljs-string">&quot;c&quot;</span>;<br>		System.out.println(s1 == s2);<br>		System.out.println(s1.equals(s2));<br>	&#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>编译后生成：<code>SyntacticSugar\bin\io\weichao\ConstantFolding.class</code></p><p>反编译使用的命令：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">java -jar cfr.jar ConstantFolding.class<br></code></pre></td></tr></table></figure><p>反编译后：<br><img src="https://weichao-io-1257283924.cos.ap-beijing.myqcloud.com/qldownload/Java-%E8%AF%AD%E8%A8%80%E7%9A%84%E8%AF%AD%E6%B3%95%E7%B3%96/2.png" srcset="/img/loading.gif" lazyload alt=""></p><p>解语法糖：</p><ul><li>常量直接连接到了一起。</li></ul><h1 id="jdk-alpha"><a class="markdownIt-Anchor" href="#jdk-alpha"></a> <strong>JDK Alpha</strong></h1><h1 id="jdk-beta"><a class="markdownIt-Anchor" href="#jdk-beta"></a> <strong>JDK Beta</strong></h1><h1 id="jdk-10"><a class="markdownIt-Anchor" href="#jdk-10"></a> <strong>JDK 1.0</strong></h1><h1 id="jdk-11"><a class="markdownIt-Anchor" href="#jdk-11"></a> <strong>JDK 1.1</strong></h1><div class="note note-info"><p>SUN SHIPS JDK 1.1 – JAVABEANS INCLUDED：<br><a target="_blank" rel="noopener" href="https://web.archive.org/web/20080210044125/http://www.sun.com/smi/Press/sunflash/1997-02/sunflash.970219.0001.xml">https://web.archive.org/web/20080210044125/http://www.sun.com/smi/Press/sunflash/1997-02/sunflash.970219.0001.xml</a></p></div><h2 id="inner-classes-内部类"><a class="markdownIt-Anchor" href="#inner-classes-内部类"></a> <strong>Inner Classes <code>内部类</code></strong></h2><h3 id="成员内部类"><a class="markdownIt-Anchor" href="#成员内部类"></a> <strong>成员内部类</strong></h3><p><code>SyntacticSugar\src\io\weichao\InnerClasses.java</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs Java"><span class="hljs-keyword">package</span> io.weichao;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">InnerClasses</span> &#123;<br>	<span class="hljs-keyword">private</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Printer</span> &#123;<br>		<span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">print</span><span class="hljs-params">()</span> &#123;<br>			System.out.print(<span class="hljs-string">&quot;hello&quot;</span>);<br>		&#125;<br>	&#125;<br><br>	<span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>		<span class="hljs-keyword">new</span> <span class="hljs-title class_">InnerClasses</span>().<span class="hljs-keyword">new</span> <span class="hljs-title class_">Printer</span>().print();<br>	&#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>编译后生成：<code>SyntacticSugar\bin\io\weichao\InnerClasses.class</code><br>和 <code>SyntacticSugar\bin\io\weichao\InnerClasses$Printer.class</code></p><p>反编译使用的命令：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">java -jar cfr.jar InnerClasses.class --innerclasses true --removeinnerclasssynthetics false<br></code></pre></td></tr></table></figure><p>反编译后：<br><img src="https://weichao-io-1257283924.cos.ap-beijing.myqcloud.com/qldownload/Java-%E8%AF%AD%E8%A8%80%E7%9A%84%E8%AF%AD%E6%B3%95%E7%B3%96/3.png" srcset="/img/loading.gif" lazyload alt=""></p><p>解语法糖：</p><ul><li>内部类的构造方法的参数是外部类对象，所以内部类对象会隐式持有外部类对象的引用<code>这会影响外部类对象的回收</code>。</li></ul><h3 id="局部内部类"><a class="markdownIt-Anchor" href="#局部内部类"></a> <strong>局部内部类</strong></h3><p>定义在一个<strong>方法</strong>或者一个<strong>作用域</strong>里面的类，局部内部类的访问仅限于<strong>该方法内</strong>或者<strong>该作用域内</strong>。</p><p><code>SyntacticSugar\src\io\weichao\InnerClasses2.java</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs Java"><span class="hljs-keyword">package</span> io.weichao;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">InnerClasses2</span> &#123;<br>	<span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">print</span><span class="hljs-params">()</span> &#123;<br>		<span class="hljs-keyword">class</span> <span class="hljs-title class_">Printer</span> &#123;<br>			<span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">print</span><span class="hljs-params">()</span> &#123;<br>				System.out.print(<span class="hljs-string">&quot;hello&quot;</span>);<br>			&#125;<br>		&#125;<br>		<span class="hljs-keyword">new</span> <span class="hljs-title class_">Printer</span>().print();<br>	&#125;<br><br>	<span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>		<span class="hljs-keyword">new</span> <span class="hljs-title class_">InnerClasses2</span>().print();<br>	&#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>编译后生成：<code>SyntacticSugar\bin\io\weichao\InnerClasses2.class</code><br>和 <code>SyntacticSugar\bin\io\weichao\InnerClasses2$1$Printer.class</code></p><p>反编译使用的命令：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">java -jar cfr.jar InnerClasses2.class --innerclasses true --removeinnerclasssynthetics false<br></code></pre></td></tr></table></figure><p>反编译后：<br><img src="https://weichao-io-1257283924.cos.ap-beijing.myqcloud.com/qldownload/Java-%E8%AF%AD%E8%A8%80%E7%9A%84%E8%AF%AD%E6%B3%95%E7%B3%96/4.png" srcset="/img/loading.gif" lazyload alt=""></p><p>解语法糖：</p><ul><li>内部类的构造方法的参数是外部类对象，所以内部类对象会隐式持有外部类对象的引用<code>这会影响外部类对象的回收</code>。</li></ul><h3 id="匿名内部类"><a class="markdownIt-Anchor" href="#匿名内部类"></a> <strong>匿名内部类</strong></h3><p><code>SyntacticSugar\src\io\weichao\InnerClasses3.java</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs Java"><span class="hljs-keyword">package</span> io.weichao;<br><br><span class="hljs-keyword">interface</span> <span class="hljs-title class_">IWorker</span> &#123;<br>	<span class="hljs-keyword">void</span> <span class="hljs-title function_">doWork</span><span class="hljs-params">()</span>;<br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Printer</span> &#123;<br>	<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">print</span><span class="hljs-params">(IWorker worker)</span> &#123;<br>		worker.doWork();<br>	&#125;<br>&#125;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">InnerClasses3</span> &#123;<br>	<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">print</span><span class="hljs-params">()</span> &#123;<br>		System.out.print(<span class="hljs-string">&quot;hello&quot;</span>);<br>	&#125;<br><br>	<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">planToPrint</span><span class="hljs-params">()</span> &#123;<br>		<span class="hljs-keyword">new</span> <span class="hljs-title class_">Printer</span>().print(<span class="hljs-keyword">new</span> <span class="hljs-title class_">IWorker</span>() &#123;<br>			<span class="hljs-meta">@Override</span><br>			<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">doWork</span><span class="hljs-params">()</span> &#123;<br>				print();<br>			&#125;<br>		&#125;);<br>	&#125;<br><br>	<span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>		<span class="hljs-keyword">new</span> <span class="hljs-title class_">InnerClasses3</span>().print();<br>	&#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>编译后生成：<code>SyntacticSugar\bin\io\weichao\InnerClasses3.class</code>、<code>SyntacticSugar\bin\io\weichao\InnerClasses3$1.class</code> 、 <code>SyntacticSugar\bin\io\weichao\IWorker.class</code><br>和 <code>SyntacticSugar\bin\io\weichao\Printer.class</code></p><p>反编译使用的命令：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs shell">java -jar cfr.jar InnerClasses3.class --innerclasses true --removeinnerclasssynthetics false<br><br>java -jar cfr.jar InnerClasses3$1.class --innerclasses true --removeinnerclasssynthetics false<br></code></pre></td></tr></table></figure><p>反编译后：<br><img src="https://weichao-io-1257283924.cos.ap-beijing.myqcloud.com/qldownload/Java-%E8%AF%AD%E8%A8%80%E7%9A%84%E8%AF%AD%E6%B3%95%E7%B3%96/5.png" srcset="/img/loading.gif" lazyload alt=""></p><p>解语法糖：</p><ul><li>内部类的构造方法的参数是外部类对象，所以内部类对象会隐式持有外部类对象的引用<code>这会影响外部类对象的回收</code>。</li></ul><h3 id="静态内部类"><a class="markdownIt-Anchor" href="#静态内部类"></a> <strong>静态内部类</strong></h3><p>使用 static 关键字修饰的内部类。</p><p><code>SyntacticSugar\src\io\weichao\InnerClasses4.java</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs Java"><span class="hljs-keyword">package</span> io.weichao;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">InnerClasses4</span> &#123;<br>	<span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Printer</span> &#123;<br>		<span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">print</span><span class="hljs-params">()</span> &#123;<br>			System.out.print(<span class="hljs-string">&quot;hello&quot;</span>);<br>		&#125;<br>	&#125;<br><br>	<span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>		<span class="hljs-keyword">new</span> <span class="hljs-title class_">Printer</span>().print();<br>	&#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>编译后生成：<code>SyntacticSugar\bin\io\weichao\InnerClasses4.class</code> 和 <code>SyntacticSugar\bin\io\weichao\InnerClasses4$Printer.class</code></p><p>反编译使用的命令：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">java -jar cfr.jar InnerClasses4.class --innerclasses true --removeinnerclasssynthetics false<br></code></pre></td></tr></table></figure><p>反编译后：<br><img src="https://weichao-io-1257283924.cos.ap-beijing.myqcloud.com/qldownload/Java-%E8%AF%AD%E8%A8%80%E7%9A%84%E8%AF%AD%E6%B3%95%E7%B3%96/6.png" srcset="/img/loading.gif" lazyload alt=""></p><ul><li><strong>静态内部类</strong>不需要依赖外部类。</li></ul><h3 id="问题"><a class="markdownIt-Anchor" href="#问题"></a> <strong>问题</strong></h3><p><strong>局部内部类</strong>和<strong>匿名内部类</strong>只能访问外部类的<strong>局部 final 变量</strong>。</p><p><code>SyntacticSugar\src\io\weichao\InnerClassesQ.java</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs Java"><span class="hljs-keyword">package</span> io.weichao;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">InnerClassesQ</span> &#123;<br>	<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">print</span><span class="hljs-params">(<span class="hljs-keyword">final</span> String s1)</span> &#123;<br>		<span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">s2</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;world&quot;</span>;<br>		<span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>() &#123;<br>			<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">()</span> &#123;<br>				System.out.println(s1);<br>				System.out.println(s2);<br>			&#125;;<br>		&#125;.start();<br>	&#125;<br><br>	<span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>		<span class="hljs-keyword">new</span> <span class="hljs-title class_">InnerClassesQ</span>().print(<span class="hljs-string">&quot;hello&quot;</span>);<br>	&#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>正向分析：<br>【存在的问题】可能因为变量的<strong>生命周期</strong>导致变量不可访问。<br>【解决问题】<strong>复制变量</strong>：如果变量的值在编译期可以确定，就在常量池中生成一个值给内部类用；如果不能确定，就将变量的值传给内部类<code>通过构造方法传参</code>。</p><ul><li>【引入问题】如果内部类修改了传进来的复制的值，无法同步给外部类原来的变量。<br>【解决问题】将变量使用 final 修饰，不允许修改<code>对于引用类型的变量，是不允许指向新的对象</code>。</li></ul><p>编译后生成：<code>SyntacticSugar\bin\io\weichao\InnerClassesQ.class</code> 和 <code>SyntacticSugar\bin\io\weichao\InnerClassesQ$1.class</code></p><p>反编译使用的命令：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs shell">java -jar cfr.jar InnerClassesQ.class --innerclasses true --removeinnerclasssynthetics false<br><br>java -jar cfr.jar InnerClassesQ$1.class --innerclasses true --removeinnerclasssynthetics false<br></code></pre></td></tr></table></figure><p>反编译后：<br><img src="https://weichao-io-1257283924.cos.ap-beijing.myqcloud.com/qldownload/Java-%E8%AF%AD%E8%A8%80%E7%9A%84%E8%AF%AD%E6%B3%95%E7%B3%96/7.png" srcset="/img/loading.gif" lazyload alt=""></p><p>解语法糖：</p><ul><li>内部类的构造方法的参数<code>第 1 个</code>是外部类对象，所以内部类对象会隐式持有外部类对象的引用<code>这会影响外部类对象的回收</code>。</li><li>去掉了变量的 final 修饰符；对于确定的值 <code>world</code> 直接使用字面量，对于不确定的值 <code>hello</code> 使用参数<code>第 2 个</code>传递的值。</li></ul><h2 id="serialization-序列化-持久化"><a class="markdownIt-Anchor" href="#serialization-序列化-持久化"></a> <strong><s>Serialization</s> <code>序列化、持久化</code></strong></h2><ul><li>Java 提供了一种对象序列化的机制：一个对象可以被表示为一个<strong>字节序列</strong><code>包括该对象的数据、对象类型和存储在该对象中的数据的类型</code>。</li><li>反序列化：可以通过读取写入了序列化对象的文件，在内存中重建对象。</li><li>序列化和反序列化可以跨平台<code>完全由 Java 虚拟机实现。</code>。</li></ul><p><code>SyntacticSugar\src\io\weichao\Printer.java</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs Java"><span class="hljs-keyword">package</span> io.weichao;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Printer</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">java</span>.io.Serializable &#123;<br>	<span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">long</span> <span class="hljs-variable">serialVersionUID</span> <span class="hljs-operator">=</span> -<span class="hljs-number">4073265111741051800L</span>;<br><br>	<span class="hljs-keyword">private</span> String text;<br>	<span class="hljs-keyword">private</span> <span class="hljs-keyword">transient</span> String local;<br><br>	<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setText</span><span class="hljs-params">(String text)</span> &#123;<br>		<span class="hljs-built_in">this</span>.text = text;<br>	&#125;<br><br>	<span class="hljs-keyword">public</span> String <span class="hljs-title function_">getText</span><span class="hljs-params">()</span> &#123;<br>		<span class="hljs-keyword">return</span> text;<br>	&#125;<br><br>	<span class="hljs-keyword">public</span> String <span class="hljs-title function_">getLocal</span><span class="hljs-params">()</span> &#123;<br>		<span class="hljs-keyword">return</span> local;<br>	&#125;<br><br>	<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setLocal</span><span class="hljs-params">(String local)</span> &#123;<br>		<span class="hljs-built_in">this</span>.local = local;<br>	&#125;<br>&#125;<br></code></pre></td></tr></table></figure><p><code>SyntacticSugar\src\io\weichao\Serialization.java</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs Java"><span class="hljs-keyword">package</span> io.weichao;<br><br><span class="hljs-keyword">import</span> java.io.*;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Serialization</span> &#123;<br>	<span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>		<span class="hljs-type">Printer</span> <span class="hljs-variable">printer</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Printer</span>();<br>		printer.setText(<span class="hljs-string">&quot;hello&quot;</span>);<br>		printer.setLocal(<span class="hljs-string">&quot;d:\\&quot;</span>);<br><br>		<span class="hljs-keyword">try</span> &#123;<br>			<span class="hljs-type">FileOutputStream</span> <span class="hljs-variable">fos</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">FileOutputStream</span>(<span class="hljs-string">&quot;printer.ser&quot;</span>);<br>			<span class="hljs-type">ObjectOutputStream</span> <span class="hljs-variable">out</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ObjectOutputStream</span>(fos);<br>			out.writeObject(printer);<br>			out.close();<br>			fos.close();<br>		&#125; <span class="hljs-keyword">catch</span> (IOException e) &#123;<br>			e.printStackTrace();<br>		&#125;<br>	&#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>使用 WinHex 打开 printer.ser：<br><img src="https://weichao-io-1257283924.cos.ap-beijing.myqcloud.com/qldownload/Java-%E8%AF%AD%E8%A8%80%E7%9A%84%E8%AF%AD%E6%B3%95%E7%B3%96/8.png" srcset="/img/loading.gif" lazyload alt=""></p><p>序列化生成的文件格式<sup id="fnref:1" class="footnote-ref"><a href="#fn:1" rel="footnote"><span class="hint--top hint--rounded" aria-label="Java Object Serialization Specification — 6.4 Grammar for the Stream Format：[https://docs.oracle.com/javase/8/docs/platform/serialization/spec/serialTOC.html](https://docs.oracle.com/javase/8/docs/platform/serialization/spec/serialTOC.html)">[1]</span></a></sup>解析：</p><table><thead><tr><th style="text-align:left">十六进制</th><th style="text-align:left">描述</th></tr></thead><tbody><tr><td style="text-align:left">0xACED</td><td style="text-align:left">魔数</td></tr><tr><td style="text-align:left">0x0005</td><td style="text-align:left">版本号：5</td></tr><tr><td style="text-align:left">0x73</td><td style="text-align:left">接下来读取到的将是一个对象</td></tr><tr><td style="text-align:left">0x72</td><td style="text-align:left">该对象是一个对类的描述</td></tr><tr><td style="text-align:left">0x0012</td><td style="text-align:left">长度：18</td></tr><tr><td style="text-align:left">0x696F2E7765696368616F2E5072696E746572</td><td style="text-align:left"><code>io.weichao.Printer</code></td></tr><tr><td style="text-align:left">0xC778DAF642AECC68 = -4073265111741051800</td><td style="text-align:left">serialVersionUID 的值</td></tr><tr><td style="text-align:left">0x02</td><td style="text-align:left">标识类版本：2</td></tr><tr><td style="text-align:left">0x0001</td><td style="text-align:left">字段个数：1</td></tr><tr><td style="text-align:left">0x4C</td><td style="text-align:left">类型是对象</td></tr><tr><td style="text-align:left">0x0004</td><td style="text-align:left">长度：4</td></tr><tr><td style="text-align:left">0x74657874</td><td style="text-align:left"><code>text</code></td></tr><tr><td style="text-align:left">0x74</td><td style="text-align:left">String 类型</td></tr><tr><td style="text-align:left">0x0012</td><td style="text-align:left">长度：18</td></tr><tr><td style="text-align:left">0x4C</td><td style="text-align:left">类型是对象</td></tr><tr><td style="text-align:left">0x6A6176612F6C616E672F537472696E673B78</td><td style="text-align:left"><code>java/lang/String;</code></td></tr><tr><td style="text-align:left">0x78</td><td style="text-align:left">结束</td></tr><tr><td style="text-align:left">0x70</td><td style="text-align:left">没有超类</td></tr><tr><td style="text-align:left">0x74</td><td style="text-align:left">String 类型</td></tr><tr><td style="text-align:left">0x0005</td><td style="text-align:left">长度：5</td></tr><tr><td style="text-align:left">0x68656C6C6F</td><td style="text-align:left"><code>hello</code></td></tr></tbody></table><p><code>SyntacticSugar\src\io\weichao\Deserialization.java</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs Java"><span class="hljs-keyword">package</span> io.weichao;<br><br><span class="hljs-keyword">import</span> java.io.*;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Deserialization</span> &#123;<br>	<span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>		<span class="hljs-type">Printer</span> <span class="hljs-variable">printer</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br><br>		<span class="hljs-keyword">try</span> &#123;<br>			<span class="hljs-type">FileInputStream</span> <span class="hljs-variable">fis</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">FileInputStream</span>(<span class="hljs-string">&quot;printer.ser&quot;</span>);<br>			<span class="hljs-type">ObjectInputStream</span> <span class="hljs-variable">in</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ObjectInputStream</span>(fis);<br>			printer = (Printer) in.readObject();<br>			in.close();<br>			fis.close();<br>		&#125; <span class="hljs-keyword">catch</span> (Exception e) &#123;<br>			e.printStackTrace();<br>			<span class="hljs-keyword">return</span>;<br>		&#125;<br>		System.out.println(printer.getText());  <span class="hljs-comment">// hello</span><br>		System.out.println(printer.getLocal()); <span class="hljs-comment">// null</span><br>	&#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>编译后生成：<code>SyntacticSugar\bin\io\weichao\Printer.class</code>、<code>SyntacticSugar\bin\io\weichao\Serialization.class</code> 和 <code>SyntacticSugar\bin\io\weichao\Deserialization.class</code></p><div class="note note-warning"><p><em>TODO 反编译后和 java 文件基本一致，所以<strong>序列化</strong>应该不算一个语法糖？</em></p></div><p>通过反编译可以看到：</p><ul><li>transient 修饰的变量不会被序列化。</li><li>类属性的 setter() 和 getter() 方法对序列化没有影响，也不在序列化文件中体现。</li></ul><h1 id="j2se-12"><a class="markdownIt-Anchor" href="#j2se-12"></a> <strong>J2SE 1.2</strong></h1><div class="note note-info"><p>SUN DELIVERS NEXT VERSION OF THE JAVA PLATFORM —— Java™ 2 Brand Unveiled：<br><a target="_blank" rel="noopener" href="https://web.archive.org/web/20070816170028/http://www.sun.com/smi/Press/sunflash/1998-12/sunflash.981208.9.xml">https://web.archive.org/web/20070816170028/http://www.sun.com/smi/Press/sunflash/1998-12/sunflash.981208.9.xml</a></p></div><h2 id="strictfp-keyword-strictfp-关键字"><a class="markdownIt-Anchor" href="#strictfp-keyword-strictfp-关键字"></a> <strong>strictfp keyword <code>strictfp 关键字</code></strong></h2><div class="note note-warning"><p>by JVM 17 an obsolete keyword, shouldn’t be used in new code</p></div><h1 id="j2se-13"><a class="markdownIt-Anchor" href="#j2se-13"></a> <strong>J2SE 1.3</strong></h1><div class="note note-info"><p>Java 2 SDK, Standard Edition, version 1.3 —— Summary of New Features and Enhancements：<br><a target="_blank" rel="noopener" href="https://web.archive.org/web/20061107051825/https://java.sun.com/j2se/1.3/docs/relnotes/features.html">https://web.archive.org/web/20061107051825/https://java.sun.com/j2se/1.3/docs/relnotes/features.html</a></p></div><h1 id="j2se-14"><a class="markdownIt-Anchor" href="#j2se-14"></a> <strong>J2SE 1.4</strong></h1><div class="note note-info"><p>JavaTM 2 SDK, Standard Edition, version 1.4.2 —— Summary of New Features and Enhancements：<br><a target="_blank" rel="noopener" href="https://web.archive.org/web/20070108015942/https://java.sun.com/j2se/1.4.2/docs/relnotes/features.html">https://web.archive.org/web/20070108015942/https://java.sun.com/j2se/1.4.2/docs/relnotes/features.html</a></p></div><h2 id="assertion-facility-断言"><a class="markdownIt-Anchor" href="#assertion-facility-断言"></a> <strong>Assertion Facility <code>断言</code></strong></h2><ul><li>可以快速揭示程序员对程序行为的误解。</li><li>Eclipse 开启断言：添加 VM arguments <code>-ea</code>。</li></ul><p><code>SyntacticSugar\src\io\weichao\Assertion.java</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs Java"><span class="hljs-keyword">package</span> io.weichao;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Assertion</span> &#123;<br>	<span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>		<span class="hljs-type">int</span> <span class="hljs-variable">a</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>;<br>		<span class="hljs-type">int</span> <span class="hljs-variable">b</span> <span class="hljs-operator">=</span> <span class="hljs-number">2</span>;<br><br>		<span class="hljs-keyword">assert</span> a == b : <span class="hljs-string">&quot;a != b&quot;</span>;<br>	&#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>编译后生成：<code>SyntacticSugar\bin\io\weichao\Assertion.class</code></p><p>反编译使用的命令：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">java -jar cfr.jar Assertion.class --sugarasserts false<br></code></pre></td></tr></table></figure><p>反编译后：<br><img src="https://weichao-io-1257283924.cos.ap-beijing.myqcloud.com/qldownload/Java-%E8%AF%AD%E8%A8%80%E7%9A%84%E8%AF%AD%E6%B3%95%E7%B3%96/9.png" srcset="/img/loading.gif" lazyload alt=""></p><p>解语法糖：</p><ul><li>本质是 <strong>if 语句</strong>。如果断言结果为 true，则什么都不做，程序继续执行；如果断言结果为 false，则程序抛出 AssertError 来打断程序的执行。</li></ul><h1 id="java-se-5"><a class="markdownIt-Anchor" href="#java-se-5"></a> <strong>Java SE 5</strong></h1><div class="note note-info"><p>New Features and Enhancements —— J2SE 5.0：<br><a target="_blank" rel="noopener" href="https://docs.oracle.com/javase/1.5.0/docs/relnotes/features.html">https://docs.oracle.com/javase/1.5.0/docs/relnotes/features.html</a></p></div><h2 id="generics-泛型"><a class="markdownIt-Anchor" href="#generics-泛型"></a> <strong>Generics <code>泛型</code></strong></h2><ul><li>允许类型或方法对各种类型的对象进行操作，同时提供了<strong>编译时类型安全检测机制</strong><code>该机制允许程序员在编译时检测到非法的类型</code>。</li><li>为集合框架添加了编译时类型安全性，且有自动装箱/拆箱。</li><li>泛型的本质是<strong>参数化类型</strong><code>所操作的数据类型被指定为一个参数</code>。</li></ul><h3 id="泛型方法"><a class="markdownIt-Anchor" href="#泛型方法"></a> <strong>泛型方法</strong></h3><p>1、无界的类型参数<br><code>SyntacticSugar\src\io\weichao\Generics.java</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs Java"><span class="hljs-keyword">package</span> io.weichao;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Generics</span> &#123;<br>	<span class="hljs-keyword">public</span> &lt;E&gt; <span class="hljs-keyword">void</span> <span class="hljs-title function_">print</span><span class="hljs-params">(E[] array)</span> &#123;<br>		<span class="hljs-keyword">for</span> (E element : array) &#123;<br>			System.out.printf(<span class="hljs-string">&quot;%s &quot;</span>, element);<br>		&#125;<br>		System.out.println();<br>	&#125;<br><br>	<span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String args[])</span> &#123;<br>		String[] array = &#123; <span class="hljs-string">&quot;hello&quot;</span>, <span class="hljs-string">&quot;world&quot;</span> &#125;;<br>		<span class="hljs-keyword">new</span> <span class="hljs-title class_">Generics</span>().print(array); <span class="hljs-comment">// hello world</span><br><br>		Integer[] array2 = &#123; <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span> &#125;;<br>		<span class="hljs-keyword">new</span> <span class="hljs-title class_">Generics</span>().print(array2); <span class="hljs-comment">// 1 2 3</span><br>	&#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>编译后生成：<code>SyntacticSugar\src\io\weichao\Generics.class</code></p><p>反编译使用的命令：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">jad.exe -noctor -nonlb -o -p -space Generics.class<br></code></pre></td></tr></table></figure><p>反编译后：<br><img src="https://weichao-io-1257283924.cos.ap-beijing.myqcloud.com/qldownload/Java-%E8%AF%AD%E8%A8%80%E7%9A%84%E8%AF%AD%E6%B3%95%E7%B3%96/10.png" srcset="/img/loading.gif" lazyload alt=""></p><p>解语法糖：</p><ul><li>【类型擦除】方法参数的类型被替换为 <code>Object</code>。</li></ul><p>2、有界的<code>被允许传递到一个类型参数的类型种类范围</code>类型参数<br><code>SyntacticSugar\src\io\weichao\Generics2.java</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs Java"><span class="hljs-keyword">package</span> io.weichao;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Generics2</span> &#123;<br>	<span class="hljs-keyword">public</span> &lt;T <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Comparable</span>&lt;T&gt;&gt; <span class="hljs-keyword">void</span> <span class="hljs-title function_">print</span><span class="hljs-params">(T t1, T t2)</span> &#123;<br>		System.out.printf(<span class="hljs-string">&quot;%s.compareTo(%s): %s&quot;</span>, t1, t2, t1.compareTo(t2));<br>		System.out.println();<br>	&#125;<br><br>	<span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String args[])</span> &#123;<br>		<span class="hljs-keyword">new</span> <span class="hljs-title class_">Generics2</span>().print(<span class="hljs-string">&quot;hello&quot;</span>, <span class="hljs-string">&quot;world&quot;</span>); <span class="hljs-comment">// hello.compareTo(world): -15</span><br>		<span class="hljs-keyword">new</span> <span class="hljs-title class_">Generics2</span>().print(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>); 			 <span class="hljs-comment">// 1.compareTo(2): -1</span><br>	&#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>编译后生成：<code>SyntacticSugar\src\io\weichao\Generics2.class</code></p><p>反编译使用的命令：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">jad.exe -noctor -nonlb -o -p -space Generics2.class<br></code></pre></td></tr></table></figure><p>反编译后：<br><img src="https://weichao-io-1257283924.cos.ap-beijing.myqcloud.com/qldownload/Java-%E8%AF%AD%E8%A8%80%E7%9A%84%E8%AF%AD%E6%B3%95%E7%B3%96/11.png" srcset="/img/loading.gif" lazyload alt=""></p><p>解语法糖：</p><ul><li>【类型擦除】方法参数的类型被替换为上界 <code>Comparable</code>。</li></ul><h3 id="泛型类"><a class="markdownIt-Anchor" href="#泛型类"></a> <strong>泛型类</strong></h3><p><code>SyntacticSugar\src\io\weichao\Generics3.java</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs Java"><span class="hljs-keyword">package</span> io.weichao;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Generics3</span>&lt;T&gt; &#123;<br>	<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">print</span><span class="hljs-params">(T t)</span> &#123;<br>		System.out.print(t);<br>	&#125;<br><br>	<span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String args[])</span> &#123;<br>		<span class="hljs-keyword">new</span> <span class="hljs-title class_">Generics3</span>&lt;String&gt;().print(<span class="hljs-string">&quot;hello&quot;</span>);<br>	&#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>编译后生成：<code>SyntacticSugar\src\io\weichao\Generics3.class</code></p><p>反编译使用的命令：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">jad.exe -noctor -nonlb -o -p -space Generics3.class<br></code></pre></td></tr></table></figure><p>反编译后：<br><img src="https://weichao-io-1257283924.cos.ap-beijing.myqcloud.com/qldownload/Java-%E8%AF%AD%E8%A8%80%E7%9A%84%E8%AF%AD%E6%B3%95%E7%B3%96/12.png" srcset="/img/loading.gif" lazyload alt=""></p><p>解语法糖：</p><ul><li>【类型擦除】方法参数的类型被替换为 <code>Object</code>。</li></ul><h2 id="enhanced-for-loop-foreach-增强-for-循环"><a class="markdownIt-Anchor" href="#enhanced-for-loop-foreach-增强-for-循环"></a> <strong>Enhanced for Loop <code>foreach、增强 for 循环</code></strong></h2><p>消除了<strong>迭代器</strong>和<strong>索引变量</strong>在迭代集合和数组时的繁琐和易错性。</p><p><code>SyntacticSugar\src\io\weichao\EnhancedForLoop.java</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs Java"><span class="hljs-keyword">package</span> io.weichao;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">EnhancedForLoop</span> &#123;<br>	<span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>		String[] array = &#123; <span class="hljs-string">&quot;hello&quot;</span>, <span class="hljs-string">&quot;world&quot;</span> &#125;;<br>		<span class="hljs-keyword">for</span> (String s : array) &#123;<br>			System.out.println(s);<br>		&#125;<br>	&#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>编译后生成：<code>SyntacticSugar\src\io\weichao\EnhancedForLoop.class</code></p><p>反编译使用的命令：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">jad.exe -noctor -nonlb -o -p -space EnhancedForLoop.class<br></code></pre></td></tr></table></figure><p>反编译后：<br><img src="https://weichao-io-1257283924.cos.ap-beijing.myqcloud.com/qldownload/Java-%E8%AF%AD%E8%A8%80%E7%9A%84%E8%AF%AD%E6%B3%95%E7%B3%96/13.png" srcset="/img/loading.gif" lazyload alt=""></p><p>解语法糖：</p><ul><li>本质是普通的 for 循环。</li></ul><h2 id="autoboxingunboxing-自动装箱拆箱"><a class="markdownIt-Anchor" href="#autoboxingunboxing-自动装箱拆箱"></a> <strong>Autoboxing/Unboxing <code>自动装箱/拆箱</code></strong></h2><p>不需要手动转换<strong>原始类型</strong><code>如 int</code> 和<strong>包装类型</strong><code>如 Integer</code>。</p><p><code>SyntacticSugar\src\io\weichao\Autoboxing.java</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs Java"><span class="hljs-keyword">package</span> io.weichao;<br><br><span class="hljs-keyword">import</span> java.util.ArrayList;<br><span class="hljs-keyword">import</span> java.util.List;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Autoboxing</span> &#123;<br>	<span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>		List&lt;Integer&gt; list = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();<br><br>		list.add(<span class="hljs-number">1</span>);<br>		System.out.println(list);<br><br>		<span class="hljs-type">int</span> <span class="hljs-variable">a</span> <span class="hljs-operator">=</span> list.get(<span class="hljs-number">0</span>);<br>		System.out.println(a);<br>	&#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>编译后生成：<code>SyntacticSugar\bin\io\weichao\Autoboxing.class</code></p><p>反编译使用的命令：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">jad.exe -noctor -nonlb -o -p -space Autoboxing.class<br></code></pre></td></tr></table></figure><p>反编译后：<br><img src="https://weichao-io-1257283924.cos.ap-beijing.myqcloud.com/qldownload/Java-%E8%AF%AD%E8%A8%80%E7%9A%84%E8%AF%AD%E6%B3%95%E7%B3%96/14.png" srcset="/img/loading.gif" lazyload alt=""></p><p>解语法糖：</p><ul><li>int 被<strong>自动装箱</strong>成 Integer，Integer 被<strong>自动拆箱</strong>成 int。</li></ul><h2 id="typesafe-enums-枚举"><a class="markdownIt-Anchor" href="#typesafe-enums-枚举"></a> <strong>Typesafe Enums <code>枚举</code></strong></h2><p>创建具有任意方法和字段的枚举类型。</p><p><code>SyntacticSugar\src\io\weichao\Enums.java</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs Java"><span class="hljs-keyword">package</span> io.weichao;<br><br><span class="hljs-keyword">enum</span> <span class="hljs-title class_">Color</span> &#123;<br>	RED, GREEN, BLUE;<br>&#125;<br></code></pre></td></tr></table></figure><p>编译后生成：<code>SyntacticSugar\bin\io\weichao\Color.class</code></p><p>反编译使用的命令：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">jad.exe -noctor -nonlb -o -p -space Color.class<br></code></pre></td></tr></table></figure><p>反编译后：<br><img src="https://weichao-io-1257283924.cos.ap-beijing.myqcloud.com/qldownload/Java-%E8%AF%AD%E8%A8%80%E7%9A%84%E8%AF%AD%E6%B3%95%E7%B3%96/15.png" srcset="/img/loading.gif" lazyload alt=""></p><p>解语法糖：</p><ul><li>本质是一个继承 <code>Enum</code> 的类，修饰符是 final。</li><li>枚举元素的修饰符是 public static final。</li><li>创建了一个数组 <code>ENUM$VALUES[]</code>，修饰符是 private static final。</li><li>构造方法有两个参数：String 类型的枚举元素名、int 类型的索引。</li><li>在静态代码块中，通过构造方法给枚举元素设置索引，并加入数组 <code>ENUM$VALUES[]</code>。</li><li>当调用 <code>values()</code> 方法时，会使用 <code>System.arraycopy()</code> 方法复制 <code>ENUM$VALUES[]</code> 到一个新数组，并返回新数组。</li><li>当调用 <code>valueOf()</code> 方法时，会调用 <code>Enum.valueOf()</code> 方法返回枚举元素。</li></ul><h2 id="varargs-可变参数-变长参数"><a class="markdownIt-Anchor" href="#varargs-可变参数-变长参数"></a> <strong>Varargs <code>可变参数、变长参数</code></strong></h2><p>不需要手动将参数列表装箱到数组中。</p><p><code>SyntacticSugar\src\io\weichao\Varargs.java</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs Java"><span class="hljs-keyword">package</span> io.weichao;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Varargs</span> &#123;<br>	<span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">func</span><span class="hljs-params">(String... args)</span> &#123;<br>		System.out.print(args);<br>	&#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>编译后生成：<code>SyntacticSugar\bin\io\weichao\Varargs.class</code></p><p>反编译使用的命令：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">jad.exe -noctor -nonlb -o -p -space Varargs.class<br></code></pre></td></tr></table></figure><p>反编译后：<br><img src="https://weichao-io-1257283924.cos.ap-beijing.myqcloud.com/qldownload/Java-%E8%AF%AD%E8%A8%80%E7%9A%84%E8%AF%AD%E6%B3%95%E7%B3%96/16.png" srcset="/img/loading.gif" lazyload alt=""></p><p>解语法糖：</p><ul><li>本质是数组。</li></ul><h2 id="static-import-静态导入"><a class="markdownIt-Anchor" href="#static-import-静态导入"></a> <strong><s>Static Import</s> <code>静态导入</code></strong></h2><p>不需要使用类名限定静态成员。</p><h2 id="annotationsmetadata-注解元数据"><a class="markdownIt-Anchor" href="#annotationsmetadata-注解元数据"></a> <strong>Annotations(Metadata) <code>注解（元数据）</code></strong></h2><p>使用工具从源代码中的注解生成样板代码<code>声明式编程风格</code>。</p><p><code>SyntacticSugar\src\io\weichao\Annotations.java</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs Java"><span class="hljs-keyword">package</span> io.weichao;<br><br><span class="hljs-keyword">public</span> <span class="hljs-meta">@interface</span> Annotations &#123;<br>&#125;<br></code></pre></td></tr></table></figure><p>编译后生成：<code>SyntacticSugar\bin\io\weichao\Annotations.class</code></p><p>反编译使用的命令：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">jad.exe -noctor -nonlb -o -p -space Annotations.class<br></code></pre></td></tr></table></figure><p>反编译后：<br><img src="https://weichao-io-1257283924.cos.ap-beijing.myqcloud.com/qldownload/Java-%E8%AF%AD%E8%A8%80%E7%9A%84%E8%AF%AD%E6%B3%95%E7%B3%96/17.png" srcset="/img/loading.gif" lazyload alt=""></p><p>解语法糖：</p><ul><li>本质是一个继承 <code>Annotation</code> 的接口。</li></ul><h1 id="java-se-6"><a class="markdownIt-Anchor" href="#java-se-6"></a> <strong>Java SE 6</strong></h1><div class="note note-info"><p>Enhancements in Java SE 6：<br><a target="_blank" rel="noopener" href="https://docs.oracle.com/javase/8/docs/technotes/guides/language/enhancements.html">https://docs.oracle.com/javase/8/docs/technotes/guides/language/enhancements.html</a></p></div><h1 id="java-se-7-lts-201107~201907-202207"><a class="markdownIt-Anchor" href="#java-se-7-lts-201107~201907-202207"></a> <strong>Java SE 7 (LTS 2011.07~2019.07、2022.07)</strong></h1><div class="note note-info"><p>Enhancements in Java SE 7：<br><a target="_blank" rel="noopener" href="https://docs.oracle.com/javase/8/docs/technotes/guides/language/enhancements.html">https://docs.oracle.com/javase/8/docs/technotes/guides/language/enhancements.html</a></p></div><h2 id="binary-literals-二进制字面量"><a class="markdownIt-Anchor" href="#binary-literals-二进制字面量"></a> <strong>Binary Literals <code>二进制字面量</code></strong></h2><p>整数类型 <code>byte、short、int 和 long</code> 也可以使用二进制数字表示。</p><p><code>SyntacticSugar\src\io\weichao\BinaryLiterals.java</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs Java"><span class="hljs-keyword">package</span> io.weichao;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">BinaryLiterals</span> &#123;<br>	<span class="hljs-type">int</span> <span class="hljs-variable">mask</span> <span class="hljs-operator">=</span> <span class="hljs-number">0b0011</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>编译后生成：<code>SyntacticSugar\bin\io\weichao\BinaryLiterals.class</code></p><p>反编译使用的命令：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">jad.exe -noctor -nonlb -o -p -space BinaryLiterals.class<br></code></pre></td></tr></table></figure><p>反编译后：<br><img src="https://weichao-io-1257283924.cos.ap-beijing.myqcloud.com/qldownload/Java-%E8%AF%AD%E8%A8%80%E7%9A%84%E8%AF%AD%E6%B3%95%E7%B3%96/18.png" srcset="/img/loading.gif" lazyload alt=""></p><p>解语法糖：</p><ul><li>二进制转成了十进制。</li></ul><h2 id="underscores-in-numeric-literals-数字字面量中的下划线"><a class="markdownIt-Anchor" href="#underscores-in-numeric-literals-数字字面量中的下划线"></a> <strong>Underscores in Numeric Literals <code>数字字面量中的下划线</code></strong></h2><p>任意数量的 <code>_</code> 可以出现在<strong>数字字面量</strong>中数字之间的任何位置。</p><p><code>SyntacticSugar\src\io\weichao\UnderscoresInNumericLiterals.java</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs Java"><span class="hljs-keyword">package</span> io.weichao;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UnderscoresInNumericLiterals</span> &#123;<br>	<span class="hljs-type">int</span> <span class="hljs-variable">million</span> <span class="hljs-operator">=</span> <span class="hljs-number">1_000_000</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>编译后生成：<code>SyntacticSugar\bin\io\weichao\UnderscoresInNumericLiterals.class</code></p><p>反编译使用的命令：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">jad.exe -noctor -nonlb -o -p -space -radix 10 UnderscoresInNumericLiterals.class<br></code></pre></td></tr></table></figure><p>反编译后：<br><img src="https://weichao-io-1257283924.cos.ap-beijing.myqcloud.com/qldownload/Java-%E8%AF%AD%E8%A8%80%E7%9A%84%E8%AF%AD%E6%B3%95%E7%B3%96/19.png" srcset="/img/loading.gif" lazyload alt=""></p><p>解语法糖：</p><ul><li>去掉了下划线。</li></ul><h2 id="strings-in-switch-statements-switch-语句中的字符串"><a class="markdownIt-Anchor" href="#strings-in-switch-statements-switch-语句中的字符串"></a> <strong>Strings in switch Statements <code>switch 语句中的字符串</code></strong></h2><p>可以在 switch 语句的表达式中使用 String 类。</p><p><code>SyntacticSugar\src\io\weichao\StringsInSwitchStatements.java</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs Java"><span class="hljs-keyword">package</span> io.weichao;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">StringsInSwitchStatements</span> &#123;<br>	<span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>		<span class="hljs-keyword">switch</span> (<span class="hljs-string">&quot;hello&quot;</span>) &#123;<br>		<span class="hljs-keyword">case</span> <span class="hljs-string">&quot;hello&quot;</span>:<br>			System.out.println(<span class="hljs-string">&quot;hello&quot;</span>);<br>			<span class="hljs-keyword">break</span>;<br>		<span class="hljs-keyword">case</span> <span class="hljs-string">&quot;world&quot;</span>:<br>			System.out.println(<span class="hljs-string">&quot;world&quot;</span>);<br>			<span class="hljs-keyword">break</span>;<br>		<span class="hljs-keyword">default</span>:<br>			<span class="hljs-keyword">break</span>;<br>		&#125;<br>	&#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>编译后生成：<code>SyntacticSugar\bin\io\weichao\StringsInSwitchStatements.class</code></p><p>反编译使用的命令：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">jad.exe -noctor -nonlb -o -p -space StringsInSwitchStatements.class<br></code></pre></td></tr></table></figure><p>反编译后：<br><img src="https://weichao-io-1257283924.cos.ap-beijing.myqcloud.com/qldownload/Java-%E8%AF%AD%E8%A8%80%E7%9A%84%E8%AF%AD%E6%B3%95%E7%B3%96/20.png" srcset="/img/loading.gif" lazyload alt=""></p><p>解语法糖：</p><ul><li>先使用 <code>hashCode()</code> 方法计算字符串的哈希值，通过哈希值查找 case，再使用 <code>equals()</code> 方法比较<code>避免哈希碰撞导致的错误</code>。</li></ul><h2 id="type-inference-for-generic-instance-creation-泛型实例创建的类型推断"><a class="markdownIt-Anchor" href="#type-inference-for-generic-instance-creation-泛型实例创建的类型推断"></a> <strong><s>Type Inference for Generic Instance Creation</s> <code>泛型实例创建的类型推断</code></strong></h2><p>使用 <code>&lt;&gt;</code> 替换调用泛型类的构造函数所需的类型参数。</p><h2 id="improved-compiler-warnings-and-errors-when-using-non-reifiable-formal-parameters-with-varargs-methods"><a class="markdownIt-Anchor" href="#improved-compiler-warnings-and-errors-when-using-non-reifiable-formal-parameters-with-varargs-methods"></a> <strong><s>Improved Compiler Warnings and Errors When Using Non-Reifiable Formal Parameters with Varargs Methods</s></strong></h2><p>使用编译器选项 <code>-Xlint:varargs</code> 以及注释 <code>@SafeVarargs</code> 和 <code>@SuppressWarnings(&#123;&quot;unchecked&quot;, &quot;varargs&quot;&#125;)</code> 可以关闭编译器的警告。</p><h2 id="the-try-with-resources-statement-try-with-resources-语句"><a class="markdownIt-Anchor" href="#the-try-with-resources-statement-try-with-resources-语句"></a> <strong>The try-with-resources Statement <code>try-with-resources 语句</code></strong></h2><p>在语句结束时会自动关闭资源<code>任何实现新的 java.lang.AutoCloseable 接口或 java.io.Closeable 接口的对象都可以用作资源</code>。</p><p><code>SyntacticSugar\src\io\weichao\TryWithResources.java</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs Java"><span class="hljs-keyword">package</span> io.weichao;<br><br><span class="hljs-keyword">import</span> java.io.BufferedReader;<br><span class="hljs-keyword">import</span> java.io.FileReader;<br><span class="hljs-keyword">import</span> java.io.IOException;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TryWithResources</span> &#123;<br>	<span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>		<span class="hljs-keyword">try</span> (<span class="hljs-type">BufferedReader</span> <span class="hljs-variable">br</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BufferedReader</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">FileReader</span>(<span class="hljs-string">&quot;test.txt&quot;</span>))) &#123;<br>			String line;<br>			<span class="hljs-keyword">while</span> ((line = br.readLine()) != <span class="hljs-literal">null</span>) &#123;<br>				System.out.println(line);<br>			&#125;<br>		&#125; <span class="hljs-keyword">catch</span> (IOException e) &#123;<br>			e.printStackTrace();<br>		&#125;<br>	&#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>编译后生成：<code>SyntacticSugar\bin\io\weichao\TryWithResources.class</code></p><p>反编译使用的命令：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">java -jar cfr.jar TryWithResources.class --tryresources false<br></code></pre></td></tr></table></figure><p>反编译后：<br><img src="https://weichao-io-1257283924.cos.ap-beijing.myqcloud.com/qldownload/Java-%E8%AF%AD%E8%A8%80%E7%9A%84%E8%AF%AD%E6%B3%95%E7%B3%96/21.png" srcset="/img/loading.gif" lazyload alt=""></p><p>解语法糖：</p><ul><li>添加了 finally 代码块，关闭缓冲流。</li></ul><h2 id="catching-multiple-exception-types-and-rethrowing-exceptions-with-improved-type-checking-捕获多种异常类型并通过改进的类型检查重新抛出异常"><a class="markdownIt-Anchor" href="#catching-multiple-exception-types-and-rethrowing-exceptions-with-improved-type-checking-捕获多种异常类型并通过改进的类型检查重新抛出异常"></a> <strong><s>Catching Multiple Exception Types and Rethrowing Exceptions with Improved Type Checking</s> <code>捕获多种异常类型并通过改进的类型检查重新抛出异常</code></strong></h2><ul><li>单个 catch 块可以处理不止一种类型的异常。</li><li>可以在方法声明的 throws 子句中指定更具体的异常类型。</li></ul><h1 id="java-se-8-lts-201403~202203-203012"><a class="markdownIt-Anchor" href="#java-se-8-lts-201403~202203-203012"></a> <strong>Java SE 8 (LTS 2014.03~2022.03、2030.12)</strong></h1><div class="note note-info"><p>Enhancements in Java SE 8：<br><a target="_blank" rel="noopener" href="https://docs.oracle.com/javase/8/docs/technotes/guides/language/enhancements.html">https://docs.oracle.com/javase/8/docs/technotes/guides/language/enhancements.html</a></p></div><h2 id="lambda-expressions-lambda-表达式-闭包sup-idfnref2-classfootnote-refa-hreffn2-relfootnotespan-classhint-top-hint-rounded-aria-labeljava-lambda-表达式httpswwwrunoobcomjavajava8-lambda-expressionshtmlhttpswwwrunoobcomjavajava8-lambda-expressionshtml2spanasupsup-idfnref3-classfootnote-refa-hreffn3-relfootnotespan-classhint-top-hint-rounded-aria-labeljava8lambda表达式-方法引用-默认方法的详细介绍与使用案例一万字httpsjuejincnpost6987569747848232996httpsjuejincnpost69875697478482329963spanasup"><a class="markdownIt-Anchor" href="#lambda-expressions-lambda-表达式-闭包sup-idfnref2-classfootnote-refa-hreffn2-relfootnotespan-classhint-top-hint-rounded-aria-labeljava-lambda-表达式httpswwwrunoobcomjavajava8-lambda-expressionshtmlhttpswwwrunoobcomjavajava8-lambda-expressionshtml2spanasupsup-idfnref3-classfootnote-refa-hreffn3-relfootnotespan-classhint-top-hint-rounded-aria-labeljava8lambda表达式-方法引用-默认方法的详细介绍与使用案例一万字httpsjuejincnpost6987569747848232996httpsjuejincnpost69875697478482329963spanasup"></a> <strong>Lambda Expressions <code>Lambda 表达式、闭包</code><sup id="fnref:2" class="footnote-ref"><a href="#fn:2" rel="footnote"><span class="hint--top hint--rounded" aria-label="Java Lambda 表达式：[https://www.runoob.com/java/java8-lambda-expressions.html](https://www.runoob.com/java/java8-lambda-expressions.html)">[2]</span></a></sup><sup id="fnref:3" class="footnote-ref"><a href="#fn:3" rel="footnote"><span class="hint--top hint--rounded" aria-label="Java8——Lambda表达式、方法引用、默认方法的详细介绍与使用案例【一万字】：[https://juejin.cn/post/6987569747848232996](https://juejin.cn/post/6987569747848232996)">[3]</span></a></sup></strong></h2><p>允许把<strong>一个方法</strong>作为<strong>另一个方法</strong>的参数，而不需要<strong>一个含有方法的类的对象</strong>或<strong>一个含有方法的接口实现类的对象</strong>。</p><h3 id="method-references-方法引用"><a class="markdownIt-Anchor" href="#method-references-方法引用"></a> <strong>Method references <code>方法引用</code></strong></h3><p><code>SyntacticSugar\src\io\weichao\LambdaExpressions.java</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs Java"><span class="hljs-keyword">package</span> io.weichao;<br><br><span class="hljs-keyword">import</span> java.util.Arrays;<br><span class="hljs-keyword">import</span> java.util.List;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">LambdaExpressions</span> &#123;<br>	<span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>		List&lt;String&gt; list = Arrays.asList(<span class="hljs-string">&quot;hello&quot;</span>, <span class="hljs-string">&quot;world&quot;</span>);<br>		list.forEach(System.out::println);<br>	&#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>编译后生成：<code>SyntacticSugar\bin\io\weichao\LambdaExpressions.class</code></p><p>反编译使用的命令：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">java -jar cfr.jar LambdaExpressions.class --decodelambdas false<br></code></pre></td></tr></table></figure><p>反编译后：<br><img src="https://weichao-io-1257283924.cos.ap-beijing.myqcloud.com/qldownload/Java-%E8%AF%AD%E8%A8%80%E7%9A%84%E8%AF%AD%E6%B3%95%E7%B3%96/22.png" srcset="/img/loading.gif" lazyload alt=""></p><p>解语法糖：</p><ul><li>本质是调用 LambdaMetafactory.metafactory() 方法。</li></ul><h3 id="default-methods-默认方法"><a class="markdownIt-Anchor" href="#default-methods-默认方法"></a> <strong><s>Default methods</s> <code>默认方法</code></strong></h3><p>接口允许拥有带有方法实现的默认方法，在方法前使用关键字 default 来区别于普通的抽象方法。</p><h3 id="new-and-enhanced-apis-that-take-advantage-of-lambda-expressions-and-streams-in-java-se-8"><a class="markdownIt-Anchor" href="#new-and-enhanced-apis-that-take-advantage-of-lambda-expressions-and-streams-in-java-se-8"></a> <strong><s>New and Enhanced APIs That Take Advantage of Lambda Expressions and Streams in Java SE 8</s></strong></h3><p>新的和增强的 APIs——借助 Java SE 8 中的 Lambda 表达式和流。</p><h2 id="improved-type-inference"><a class="markdownIt-Anchor" href="#improved-type-inference"></a> <strong><s>Improved Type Inference</s></strong></h2><p>可以利用目标类型来推断泛型方法调用的类型参数。</p><h2 id="annotations-on-java-types"><a class="markdownIt-Anchor" href="#annotations-on-java-types"></a> <strong><s>Annotations on Java Types</s></strong></h2><p>可以在任何使用类型的地方应用注解。</p><h2 id="repeating-annotations-重复注解"><a class="markdownIt-Anchor" href="#repeating-annotations-重复注解"></a> <strong>Repeating Annotations <code>重复注解</code></strong></h2><p>允许在同一声明类型（类，属性，或方法）上多次使用同一个注解。</p><p><code>SyntacticSugar\src\io\weichao\FieldMap.java</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs Java"><span class="hljs-keyword">package</span> io.weichao;<br><br><span class="hljs-keyword">import</span> java.lang.annotation.Documented;<br><span class="hljs-keyword">import</span> java.lang.annotation.ElementType;<br><span class="hljs-keyword">import</span> java.lang.annotation.Repeatable;<br><span class="hljs-keyword">import</span> java.lang.annotation.Retention;<br><span class="hljs-keyword">import</span> java.lang.annotation.RetentionPolicy;<br><span class="hljs-keyword">import</span> java.lang.annotation.Target;<br><br><span class="hljs-meta">@Target(ElementType.FIELD)</span><br><span class="hljs-meta">@Retention(RetentionPolicy.RUNTIME)</span><br><span class="hljs-meta">@Repeatable(FieldMaps.class)</span><br><span class="hljs-meta">@Documented</span><br><span class="hljs-keyword">public</span> <span class="hljs-meta">@interface</span> FieldMap &#123;<br>	String <span class="hljs-title function_">channel</span><span class="hljs-params">()</span> <span class="hljs-keyword">default</span> <span class="hljs-string">&quot;&quot;</span>;<br><br>	String <span class="hljs-title function_">value</span><span class="hljs-params">()</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p><code>SyntacticSugar\src\io\weichao\FieldMaps.java</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs Java"><span class="hljs-keyword">package</span> io.weichao;<br><br><span class="hljs-keyword">import</span> java.lang.annotation.Documented;<br><span class="hljs-keyword">import</span> java.lang.annotation.ElementType;<br><span class="hljs-keyword">import</span> java.lang.annotation.Retention;<br><span class="hljs-keyword">import</span> java.lang.annotation.RetentionPolicy;<br><span class="hljs-keyword">import</span> java.lang.annotation.Target;<br><br><span class="hljs-meta">@Target(ElementType.FIELD)</span><br><span class="hljs-meta">@Retention(RetentionPolicy.RUNTIME)</span><br><span class="hljs-meta">@Documented</span><br><span class="hljs-keyword">public</span> <span class="hljs-meta">@interface</span> FieldMaps &#123;<br>	FieldMap[] value();<br>&#125;<br></code></pre></td></tr></table></figure><p><code>SyntacticSugar\src\io\weichao\RepeatingAnnotations.java</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs Java"><span class="hljs-keyword">package</span> io.weichao;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RepeatingAnnotations</span> &#123;<br>	<span class="hljs-meta">@FieldMap(channel = &quot;class&quot;, value = &quot;10&quot;)</span><br>	<span class="hljs-meta">@FieldMap(channel = &quot;school&quot;, value = &quot;20220110&quot;)</span><br>	<span class="hljs-keyword">private</span> String studentNumber;<br>&#125;<br></code></pre></td></tr></table></figure><p>编译后生成：<code>SyntacticSugar\bin\io\weichao\FieldMap.class</code>、<code>SyntacticSugar\bin\io\weichao\FieldMaps.class</code> 和 <code>SyntacticSugar\bin\io\weichao\RepeatingAnnotations.class</code></p><p>反编译使用的命令：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">java -jar cfr.jar RepeatingAnnotations.class<br></code></pre></td></tr></table></figure><p>反编译后：<br><img src="https://weichao-io-1257283924.cos.ap-beijing.myqcloud.com/qldownload/Java-%E8%AF%AD%E8%A8%80%E7%9A%84%E8%AF%AD%E6%B3%95%E7%B3%96/23.png" srcset="/img/loading.gif" lazyload alt=""></p><p>解语法糖：</p><ul><li>对于<strong>重复注解</strong>，表面上使用的是 FieldMap，本质上使用的是 FieldMaps<code>FieldMap[]</code>；当非重复时，使用的还是 FieldMap。</li></ul><h2 id="method-parameter-reflection-使用反射获取方法参数名"><a class="markdownIt-Anchor" href="#method-parameter-reflection-使用反射获取方法参数名"></a> <strong><s>Method parameter reflection</s> <code>使用反射获取方法参数名</code></strong></h2><p>可以使用 java.lang.reflect.Executable.getParameters() 方法获取任何方法或构造方法的形参名称<code>默认情况下，Class 文件不存储形式参数名称，需要使用 javac 编译器的 -parameters 选项编译源文件</code>。</p><h1 id="java-se-9"><a class="markdownIt-Anchor" href="#java-se-9"></a> <strong>Java SE 9</strong></h1><div class="note note-info"><p>Java Language Changes for Java SE 9：<br><a target="_blank" rel="noopener" href="https://docs.oracle.com/en/java/javase/19/language/java-language-changes.html#GUID-B06D7006-D9F4-42F8-AD21-BF861747EDCF">https://docs.oracle.com/en/java/javase/19/language/java-language-changes.html#GUID-B06D7006-D9F4-42F8-AD21-BF861747EDCF</a></p></div><h2 id="more-concise-try-with-resources-statements-更简洁的-try-with-resources-语句"><a class="markdownIt-Anchor" href="#more-concise-try-with-resources-statements-更简洁的-try-with-resources-语句"></a> <strong><s>More Concise try-with-resources Statements</s> <code>更简洁的 try-with-resources 语句</code></strong></h2><h2 id="safevarargs-annotation-allowed-on-private-instance-methods"><a class="markdownIt-Anchor" href="#safevarargs-annotation-allowed-on-private-instance-methods"></a> <strong><s>@SafeVarargs Annotation Allowed on Private Instance Methods</s></strong></h2><p>@SafeVarargs 注解现在被允许给私有实例方法使用了。</p><h2 id="diamond-syntax-and-anonymous-inner-classes"><a class="markdownIt-Anchor" href="#diamond-syntax-and-anonymous-inner-classes"></a> <strong><s>Diamond Syntax and Anonymous Inner Classes</s></strong></h2><p>菱形运算符 <code>&lt;&gt;</code> 现在被允许给匿名内部类使用了。</p><h2 id="underscore-character-not-legal-name"><a class="markdownIt-Anchor" href="#underscore-character-not-legal-name"></a> <strong><s>Underscore Character Not Legal Name</s></strong></h2><p>如果您使用下划线字符 <code>_</code> 作为标识符，您的源代码将无法再被编译。</p><h2 id="support-for-private-interface-methods-支持私有接口方法"><a class="markdownIt-Anchor" href="#support-for-private-interface-methods-支持私有接口方法"></a> <strong><s>Support for Private Interface Methods</s> <code>支持私有接口方法</code></strong></h2><h1 id="java-se-10"><a class="markdownIt-Anchor" href="#java-se-10"></a> <strong>Java SE 10</strong></h1><div class="note note-info"><p>Java Language Changes for Java SE 10：<br><a target="_blank" rel="noopener" href="https://docs.oracle.com/en/java/javase/19/language/java-language-changes.html#GUID-7D5FDD65-ACE4-4B3C-80F4-CC01CBD211A4">https://docs.oracle.com/en/java/javase/19/language/java-language-changes.html#GUID-7D5FDD65-ACE4-4B3C-80F4-CC01CBD211A4</a></p></div><h2 id="local-variable-type-inference-局部变量类型推断"><a class="markdownIt-Anchor" href="#local-variable-type-inference-局部变量类型推断"></a> <strong>Local Variable Type Inference <code>局部变量类型推断</code></strong></h2><p><code>SyntacticSugar\src\io\weichao\LocalVariableTypeInference.java</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs Java"><span class="hljs-keyword">package</span> io.weichao;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">LocalVariableTypeInference</span> &#123;<br>	<span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>		<span class="hljs-type">var</span> <span class="hljs-variable">s</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;hello&quot;</span>;<br>	&#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>反编译使用的命令：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">java -jar cfr.jar LocalVariableTypeInference.class<br></code></pre></td></tr></table></figure><p>编译后生成：<code>SyntacticSugar\bin\io\weichao\LocalVariableTypeInference.class</code></p><p>反编译后：<br><img src="https://weichao-io-1257283924.cos.ap-beijing.myqcloud.com/qldownload/Java-%E8%AF%AD%E8%A8%80%E7%9A%84%E8%AF%AD%E6%B3%95%E7%B3%96/24.png" srcset="/img/loading.gif" lazyload alt=""></p><p>解语法糖：</p><ul><li>变量类型被还原回原本的类型。</li></ul><h1 id="java-se-11-lts-201809~202309-202609"><a class="markdownIt-Anchor" href="#java-se-11-lts-201809~202309-202609"></a> <strong>Java SE 11 (LTS 2018.09~2023.09、2026.09)</strong></h1><div class="note note-info"><p>Java Language Changes for Java SE 11：<br><a target="_blank" rel="noopener" href="https://docs.oracle.com/en/java/javase/19/language/java-language-changes.html#GUID-8693D1DF-3DE3-4588-ABA8-397C65B4169A">https://docs.oracle.com/en/java/javase/19/language/java-language-changes.html#GUID-8693D1DF-3DE3-4588-ABA8-397C65B4169A</a></p></div><h1 id="java-se-12"><a class="markdownIt-Anchor" href="#java-se-12"></a> <strong>Java SE 12</strong></h1><div class="note note-info"><p>Java Language Changes for Java SE 12：<br><a target="_blank" rel="noopener" href="https://docs.oracle.com/en/java/javase/19/language/java-language-changes.html#GUID-B01F389D-5DFE-4A3F-818E-99478DC642CE">https://docs.oracle.com/en/java/javase/19/language/java-language-changes.html#GUID-B01F389D-5DFE-4A3F-818E-99478DC642CE</a></p></div><h2 id="switch-expressions-switch-表达式"><a class="markdownIt-Anchor" href="#switch-expressions-switch-表达式"></a> <strong><s>Switch Expressions</s> <code>switch 表达式</code></strong></h2><p>新型 case 标签具有以下形式：</p><figure class="highlight coq"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs coq"><span class="hljs-built_in">case</span> label_1, label_2, ..., label_n -&gt; expression;|<span class="hljs-type">throw</span>-statement;|<span class="hljs-type">block</span> <br></code></pre></td></tr></table></figure><h1 id="java-se-13"><a class="markdownIt-Anchor" href="#java-se-13"></a> <strong>Java SE 13</strong></h1><div class="note note-info"><p>Java Language Changes for Java SE 13：<br><a target="_blank" rel="noopener" href="https://docs.oracle.com/en/java/javase/19/language/java-language-changes.html#GUID-763949E4-627B-462F-AC7B-54DEA39E5989">https://docs.oracle.com/en/java/javase/19/language/java-language-changes.html#GUID-763949E4-627B-462F-AC7B-54DEA39E5989</a></p></div><h2 id="text-blocks-文本块"><a class="markdownIt-Anchor" href="#text-blocks-文本块"></a> <strong>Text Blocks <code>文本块</code></strong></h2><p><code>SyntacticSugar\src\io\weichao\TextBlocks.java</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs Java"><span class="hljs-keyword">package</span> io.weichao;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TextBlocks</span> &#123;<br>	<span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>		<span class="hljs-type">String</span> <span class="hljs-variable">s</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">				hello</span><br><span class="hljs-string">				world</span><br><span class="hljs-string">				&quot;&quot;&quot;</span>;<br>	&#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>反编译使用的命令：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">java -jar cfr.jar TextBlocks.class<br></code></pre></td></tr></table></figure><p>编译后生成：<code>SyntacticSugar\bin\io\weichao\TextBlocks.class</code></p><p>反编译后：<br><img src="https://weichao-io-1257283924.cos.ap-beijing.myqcloud.com/qldownload/Java-%E8%AF%AD%E8%A8%80%E7%9A%84%E8%AF%AD%E6%B3%95%E7%B3%96/25.png" srcset="/img/loading.gif" lazyload alt=""></p><p>解语法糖：</p><ul><li>本质是 <code>\n</code>。</li></ul><h2 id="switch-expressions-switch-表达式-2"><a class="markdownIt-Anchor" href="#switch-expressions-switch-表达式-2"></a> <strong><s>Switch Expressions</s> <code>switch 表达式</code></strong></h2><p>可以在 case 中使用 yield 语句返回需要的值了。</p><h1 id="java-se-14"><a class="markdownIt-Anchor" href="#java-se-14"></a> <strong>Java SE 14</strong></h1><div class="note note-info"><p>Java Language Changes for Java SE 14：<br><a target="_blank" rel="noopener" href="https://docs.oracle.com/en/java/javase/19/language/java-language-changes.html#GUID-8FD2B5E3-46C7-4C6C-8E8A-64AB49ABF855">https://docs.oracle.com/en/java/javase/19/language/java-language-changes.html#GUID-8FD2B5E3-46C7-4C6C-8E8A-64AB49ABF855</a></p></div><h2 id="pattern-matching-for-the-instanceof-operator-instanceof-的模式匹配"><a class="markdownIt-Anchor" href="#pattern-matching-for-the-instanceof-operator-instanceof-的模式匹配"></a> <strong><s>Pattern Matching for the instanceof Operator</s> <code>instanceof 的模式匹配</code></strong></h2><p>你可以指定一个绑定变量；如果 instanceof 运算符的结果是 true，则将被测试的对象分配给绑定变量。</p><h2 id="records-记录"><a class="markdownIt-Anchor" href="#records-记录"></a> <strong>Records <code>记录</code></strong></h2><p>与 enum 一样，记录是类的一种受限形式。它是<strong>普通数据载体</strong>的理想选择，这些类包含<strong>不打算更改的数据</strong>并且仅包含<strong>构造方法</strong>和<strong>访问器</strong>等最基本的方法。</p><p><code>SyntacticSugar\src\io\weichao\Records.java</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs Java"><span class="hljs-keyword">package</span> io.weichao;<br><br><span class="hljs-keyword">record</span> <span class="hljs-title class_">Records</span><span class="hljs-params">(<span class="hljs-type">float</span> length, <span class="hljs-type">float</span> width)</span> &#123;<br>&#125;<br></code></pre></td></tr></table></figure><p>反编译使用的命令：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">java -jar cfr.jar Records.class --recordtypes false<br></code></pre></td></tr></table></figure><p>编译后生成：<code>SyntacticSugar\bin\io\weichao\Records.class</code></p><p>反编译后：<br><img src="https://weichao-io-1257283924.cos.ap-beijing.myqcloud.com/qldownload/Java-%E8%AF%AD%E8%A8%80%E7%9A%84%E8%AF%AD%E6%B3%95%E7%B3%96/27.png" srcset="/img/loading.gif" lazyload alt=""></p><p>解语法糖：</p><ul><li>本质是一个继承 Record 类的类，修饰符是 final。</li><li>方法属性的修饰符是 final，有和方法属性同名的方法用于获取方法属性的值。</li><li>有带参的构造方法。</li><li>有 toString()、hashCode()、equals() 方法。</li></ul><h1 id="java-se-15"><a class="markdownIt-Anchor" href="#java-se-15"></a> <strong>Java SE 15</strong></h1><div class="note note-info"><p>Java Language Changes for Java SE 15：<br><a target="_blank" rel="noopener" href="https://docs.oracle.com/en/java/javase/19/language/java-language-changes.html#GUID-486A76FF-9A42-44AA-9668-5B53AA4AB2D2">https://docs.oracle.com/en/java/javase/19/language/java-language-changes.html#GUID-486A76FF-9A42-44AA-9668-5B53AA4AB2D2</a></p></div><h2 id="sealed-classes-密封类"><a class="markdownIt-Anchor" href="#sealed-classes-密封类"></a> <strong><s>Sealed Classes</s> <code>密封类</code></strong></h2><p>可以控制哪些类可以对定义的类进行扩展。</p><h1 id="java-se-16"><a class="markdownIt-Anchor" href="#java-se-16"></a> <strong>Java SE 16</strong></h1><div class="note note-info"><p>Java Language Changes for Java SE 16：<br><a target="_blank" rel="noopener" href="https://docs.oracle.com/en/java/javase/19/language/java-language-changes.html#GUID-EE327F97-BF08-46D2-8426-085CBE585797">https://docs.oracle.com/en/java/javase/19/language/java-language-changes.html#GUID-EE327F97-BF08-46D2-8426-085CBE585797</a></p></div><h1 id="java-se-17-lts-202109~202609-202909"><a class="markdownIt-Anchor" href="#java-se-17-lts-202109~202609-202909"></a> <strong>Java SE 17 (LTS 2021.09~2026.09、2029.09)</strong></h1><div class="note note-info"><p>Java Language Changes for Java SE 17：<br><a target="_blank" rel="noopener" href="https://docs.oracle.com/en/java/javase/19/language/java-language-changes.html#GUID-67ED83E7-D79F-4F46-AA33-41031E5CD094">https://docs.oracle.com/en/java/javase/19/language/java-language-changes.html#GUID-67ED83E7-D79F-4F46-AA33-41031E5CD094</a></p></div><h2 id="pattern-matching-for-switch-expressions-and-statements-switch-的模式匹配"><a class="markdownIt-Anchor" href="#pattern-matching-for-switch-expressions-and-statements-switch-的模式匹配"></a> <strong>Pattern Matching for switch Expressions and Statements <code>switch 的模式匹配</code></strong></h2><p>在早期版本中，选择器表达式的计算结果必须为数字、字符串或 enum 常量，并且 case 标签必须是常量。但是，在此版本中，选择器表达式可以是任何类型，并且 case 标签可以具有模式。</p><p><code>SyntacticSugar\src\io\weichao\SwitchPatternMatching.java</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs Java"><span class="hljs-keyword">package</span> io.weichao;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SwitchPatternMatching</span> &#123;<br>	<span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test</span><span class="hljs-params">(Object obj)</span> &#123;<br>		<span class="hljs-keyword">switch</span> (obj) &#123;<br>		<span class="hljs-keyword">case</span> String s -&gt; System.out.println(<span class="hljs-string">&quot;String: &quot;</span> + s);<br>		<span class="hljs-keyword">case</span> Integer i -&gt; System.out.println(<span class="hljs-string">&quot;Integer: &quot;</span> + i);<br>		<span class="hljs-keyword">case</span> <span class="hljs-literal">null</span> -&gt; System.out.println(<span class="hljs-string">&quot;null&quot;</span>);<br>		<span class="hljs-keyword">default</span> -&gt; System.out.println(<span class="hljs-string">&quot;others&quot;</span>);<br>		&#125;<br>	&#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>反编译使用的命令：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">java -jar cfr.jar SwitchPatternMatching.class<br></code></pre></td></tr></table></figure><p>编译后生成：<code>SyntacticSugar\bin\io\weichao\SwitchPatternMatching.class</code></p><p>反编译后：<br><img src="https://weichao-io-1257283924.cos.ap-beijing.myqcloud.com/qldownload/Java-%E8%AF%AD%E8%A8%80%E7%9A%84%E8%AF%AD%E6%B3%95%E7%B3%96/28.png" srcset="/img/loading.gif" lazyload alt=""></p><p>解语法糖：</p><ul><li>调用 SwitchBootstraps.typeSwitch() 方法，计算出数组中匹配的元素的索引<code>null 是 -1</code>。</li></ul><h1 id="java-se-18"><a class="markdownIt-Anchor" href="#java-se-18"></a> <strong>Java SE 18</strong></h1><div class="note note-info"><p>Java Language Changes for Java SE 18：<br><a target="_blank" rel="noopener" href="https://docs.oracle.com/en/java/javase/19/language/java-language-changes.html#GUID-7A599857-71A8-42C9-8F18-B9F30B03C059">https://docs.oracle.com/en/java/javase/19/language/java-language-changes.html#GUID-7A599857-71A8-42C9-8F18-B9F30B03C059</a></p></div><h2 id="pattern-matching-for-switch-expressions-and-statements-switch-表达式"><a class="markdownIt-Anchor" href="#pattern-matching-for-switch-expressions-and-statements-switch-表达式"></a> <strong><s>Pattern Matching for switch Expressions and Statements</s> <code>switch 表达式</code></strong></h2><ul><li><strong>常量的 case 标签</strong>必须放在<strong>受保护模式 case 标签</strong>之前。</li><li><strong>受保护模式 case 标签</strong>必须放在<strong>非受保护模式 case 标签</strong>之前。</li></ul><h1 id="java-se-19"><a class="markdownIt-Anchor" href="#java-se-19"></a> <strong>Java SE 19</strong></h1><div class="note note-info"><p>Java Language Changes for Java SE 19：<br><a target="_blank" rel="noopener" href="https://docs.oracle.com/en/java/javase/19/language/java-language-changes.html#GUID-1D8E4E08-A03C-4462-9801-26152159EE55">https://docs.oracle.com/en/java/javase/19/language/java-language-changes.html#GUID-1D8E4E08-A03C-4462-9801-26152159EE55</a></p></div><h2 id="pattern-matching-for-switch-expressions-and-statements-switch-表达式-2"><a class="markdownIt-Anchor" href="#pattern-matching-for-switch-expressions-and-statements-switch-表达式-2"></a> <strong><s>Pattern Matching for switch Expressions and Statements</s> <code>switch 表达式</code></strong></h2><ul><li><strong>受保护模式标签</strong><code>switch 的 case 标签的模式后添加 when 语句</code>。</li><li>如果选择器表达式的计算结果为 <code>null</code> 并且 switch 没有 <code>null</code> case 标签，则抛出 NullPointerException。</li><li>如果 switch 在编译时是详尽的但是在运行时不是，则抛出 MatchException。</li></ul><h2 id="record-patterns-记录的模式"><a class="markdownIt-Anchor" href="#record-patterns-记录的模式"></a> <strong><s>Record Patterns</s> <code>记录的模式</code></strong></h2><h1 id="java-se-20"><a class="markdownIt-Anchor" href="#java-se-20"></a> <em><strong>Java SE 20</strong></em></h1><div class="note note-info"><p>JDK 20：<br><a target="_blank" rel="noopener" href="https://openjdk.org/projects/jdk/20/">https://openjdk.org/projects/jdk/20/</a></p></div><h1 id="java-se-21-lts-202309~202809-203109"><a class="markdownIt-Anchor" href="#java-se-21-lts-202309~202809-203109"></a> <em><strong>Java SE 21 (LTS 2023.09~2028.09、2031.09)</strong></em></h1><h1 id="参考"><a class="markdownIt-Anchor" href="#参考"></a> <strong>参考</strong></h1><section class="footnotes"><div class="footnote-list"><ol><li><span id="fn:1" class="footnote-text"><span>Java Object Serialization Specification — 6.4 Grammar for the Stream Format：<a target="_blank" rel="noopener" href="https://docs.oracle.com/javase/8/docs/platform/serialization/spec/serialTOC.html">https://docs.oracle.com/javase/8/docs/platform/serialization/spec/serialTOC.html</a> <a href="#fnref:1" rev="footnote" class="footnote-backref">↩</a></span></span></li><li><span id="fn:2" class="footnote-text"><span>Java Lambda 表达式：<a target="_blank" rel="noopener" href="https://www.runoob.com/java/java8-lambda-expressions.html">https://www.runoob.com/java/java8-lambda-expressions.html</a> <a href="#fnref:2" rev="footnote" class="footnote-backref">↩</a></span></span></li><li><span id="fn:3" class="footnote-text"><span>Java8——Lambda表达式、方法引用、默认方法的详细介绍与使用案例【一万字】：<a target="_blank" rel="noopener" href="https://juejin.cn/post/6987569747848232996">https://juejin.cn/post/6987569747848232996</a> <a href="#fnref:3" rev="footnote" class="footnote-backref">↩</a></span></span></li></ol></div></section></div><hr><div><div class="post-metas my-3"><div class="post-meta mr-3 d-flex align-items-center"><i class="iconfont icon-category"></i> <span class="category-chains"><span class="category-chain"><a href="/categories/Java/" class="category-chain-item">Java</a> <span>></span> <a href="/categories/Java/%E8%AF%AD%E6%B3%95%E7%B3%96/" class="category-chain-item">语法糖</a></span></span></div><div class="post-meta"><i class="iconfont icon-tags"></i> <a href="/tags/Java/">#Java</a> <a href="/tags/%E8%AF%AD%E6%B3%95%E7%B3%96/">#语法糖</a></div></div><div class="license-box my-3"><div class="license-title"><div>Java 语言的语法糖</div><div>https://weichao.io/615952530bfd/</div></div><div class="license-meta"><div class="license-meta-item"><div>作者</div><div>魏超</div></div><div class="license-meta-item license-meta-date"><div>发布于</div><div>2022年12月13日</div></div><div class="license-meta-item license-meta-date"><div>更新于</div><div>2023年2月14日</div></div><div class="license-meta-item"><div>许可协议</div><div><a target="_blank" href="https://creativecommons.org/licenses/by-nc-sa/4.0/"><span class="hint--top hint--rounded" aria-label="BY - 署名"><i class="iconfont icon-by"></i> </span></a><a target="_blank" href="https://creativecommons.org/licenses/by-nc-sa/4.0/"><span class="hint--top hint--rounded" aria-label="NC - 非商业性使用"><i class="iconfont icon-nc"></i> </span></a><a target="_blank" href="https://creativecommons.org/licenses/by-nc-sa/4.0/"><span class="hint--top hint--rounded" aria-label="SA - 相同方式共享"><i class="iconfont icon-sa"></i></span></a></div></div></div><div class="license-icon iconfont"></div></div><div class="post-prevnext my-3"><article class="post-prev col-6"><a href="/19dae968f2dd/" title="反编译 Class 文件的工具——CFR"><i class="iconfont icon-arrowleft"></i> <span class="hidden-mobile">反编译 Class 文件的工具——CFR</span> <span class="visible-mobile">上一篇</span></a></article><article class="post-next col-6"><a href="/cb14e0cf9ec3/" title="第 10 章：前端编译与优化"><span class="hidden-mobile">第 10 章：前端编译与优化</span> <span class="visible-mobile">下一篇</span> <i class="iconfont icon-arrowright"></i></a></article></div></div></article></div></div></div><div class="side-col d-none d-lg-block col-lg-2"><aside class="sidebar" style="margin-left:-1rem"><div id="toc"><p class="toc-header"><i class="iconfont icon-list"></i> <span>目录</span></p><div class="toc-body" id="toc-body"></div></div></aside></div></div></div><a id="scroll-top-button" aria-label="TOP" href="#" role="button"><i class="iconfont icon-arrowup" aria-hidden="true"></i></a><div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable modal-lg" role="document"><div class="modal-content"><div class="modal-header text-center"><h4 class="modal-title w-100 font-weight-bold">搜索</h4><button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button></div><div class="modal-body mx-3"><div class="md-form mb-5"><input type="text" id="local-search-input" class="form-control validate"> <label data-error="x" data-success="v" for="local-search-input">关键词</label></div><div class="list-group" id="local-search-result"></div></div></div></div></div></main><footer><div class="footer-inner"><div class="footer-content"><a href="https://hexo.io" target="_blank" rel="nofollow noopener"><i class="iconfont icon-my-hexo"></i>&nbsp;<span>博客框架Hexo&nbsp;&nbsp;</span></a> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><i class="iconfont icon-my-theme"></i>&nbsp;<span>博客主题Fluid&nbsp;&nbsp;</span></a> <a href="https://weichao.io" target="_blank" rel="nofollow noopener"><i class="iconfont icon-my-copyright"></i>&nbsp;2023<span>魏超</span></a></div><div class="statistics"><span id="leancloud-site-pv-container" style="display:none">总访问量 <span id="leancloud-site-pv"></span> 次 </span><span id="leancloud-site-uv-container" style="display:none">总访客数 <span id="leancloud-site-uv"></span> 人</span></div></div></footer><script src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js"></script><link rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css"><script>NProgress.configure({showSpinner:!1,trickleSpeed:100}),NProgress.start(),window.addEventListener("load",(function(){NProgress.done()}))</script><script src="https://lib.baomitu.com/jquery/3.6.0/jquery.min.js"></script><script src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js"></script><script src="/js/events.js"></script><script src="/js/plugins.js"></script><script src="/js/img-lazyload.js"></script><script>Fluid.utils.createScript("https://lib.baomitu.com/tocbot/4.18.2/tocbot.min.js",(function(){var t=jQuery("#toc");if(0!==t.length&&window.tocbot){var i=jQuery("#board-ctn").offset().top;window.tocbot.init(Object.assign({tocSelector:"#toc-body",contentSelector:".markdown-body",linkClass:"tocbot-link",activeLinkClass:"tocbot-active-link",listClass:"tocbot-list",isCollapsedClass:"tocbot-is-collapsed",collapsibleClass:"tocbot-is-collapsible",scrollSmooth:!0,includeTitleTags:!0,headingsOffset:-i},CONFIG.toc)),t.find(".toc-list-item").length>0&&t.css("visibility","visible"),Fluid.events.registerRefreshCallback((function(){if("tocbot"in window){tocbot.refresh();var t=jQuery("#toc");if(0===t.length||!tocbot)return;t.find(".toc-list-item").length>0&&t.css("visibility","visible")}}))}}))</script><script src="https://lib.baomitu.com/clipboard.js/2.0.11/clipboard.min.js"></script><script>Fluid.plugins.codeWidget()</script><script>Fluid.utils.createScript("https://lib.baomitu.com/anchor-js/4.3.1/anchor.min.js",(function(){window.anchors.options={placement:CONFIG.anchorjs.placement,visible:CONFIG.anchorjs.visible},CONFIG.anchorjs.icon&&(window.anchors.options.icon=CONFIG.anchorjs.icon);var n=(CONFIG.anchorjs.element||"h1,h2,h3,h4,h5,h6").split(","),o=[];for(var s of n)o.push(".markdown-body > "+s.trim());"left"===CONFIG.anchorjs.placement&&(window.anchors.options.class="anchorjs-link-left"),window.anchors.add(o.join(", ")),Fluid.events.registerRefreshCallback((function(){if("anchors"in window){anchors.removeAll();var n=(CONFIG.anchorjs.element||"h1,h2,h3,h4,h5,h6").split(","),o=[];for(var s of n)o.push(".markdown-body > "+s.trim());"left"===CONFIG.anchorjs.placement&&(anchors.options.class="anchorjs-link-left"),anchors.add(o.join(", "))}}))}))</script><script>Fluid.utils.createScript("https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js",(function(){Fluid.plugins.fancyBox()}))</script><script defer src="/js/leancloud.js"></script><script src="/js/local-search.js"></script><script src="/js/boot.js"></script><noscript><div class="noscript-warning">博客在允许 JavaScript 运行的环境下浏览效果更佳</div></noscript></body></html>