<!DOCTYPE html><html lang="zh-CN" data-default-color-scheme="auto"><head><meta charset="UTF-8"><link rel="apple-touch-icon" sizes="76x76" href="/img/my_icon.ico"><link rel="icon" href="/img/my_icon.ico"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=5,shrink-to-fit=no"><meta http-equiv="x-ua-compatible" content="ie=edge"><meta name="theme-color" content="#2f4154"><meta name="author" content="魏超"><meta name="keywords" content="魏超,weichao"><meta name="description" content="Reference  FFmpeg FFMPEG 配置选项详细说明 FFmpeg编译4.1.4并移植到Android    下载 FFmpeg 源码 1git clone https:&#x2F;&#x2F;git.ffmpeg.org&#x2F;ffmpeg.git ffmpeg   编写脚本文件  查看文件目录   查看支持的命令 1.&#x2F;configure --help             decoders   de"><meta property="og:type" content="article"><meta property="og:title" content="NDK r21d + FFmpeg 4.2 编写脚本文件 &amp; 编译生成 Android 所需的库"><meta property="og:url" content="https://weichao.io/49b14b58838c/index.html"><meta property="og:site_name" content="『魏超』的 blog"><meta property="og:description" content="Reference  FFmpeg FFMPEG 配置选项详细说明 FFmpeg编译4.1.4并移植到Android    下载 FFmpeg 源码 1git clone https:&#x2F;&#x2F;git.ffmpeg.org&#x2F;ffmpeg.git ffmpeg   编写脚本文件  查看文件目录   查看支持的命令 1.&#x2F;configure --help             decoders   de"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://weichao-io-1257283924.cos.ap-beijing.myqcloud.com/qldownload/NDK%20r21d%20%2B%20FFmpeg%204.2%20%E7%BC%96%E5%86%99%E8%84%9A%E6%9C%AC%E6%96%87%E4%BB%B6%20%26%20%E7%BC%96%E8%AF%91%E7%94%9F%E6%88%90%20Android%20%E6%89%80%E9%9C%80%E7%9A%84%E5%BA%93/1.png"><meta property="og:image" content="https://weichao-io-1257283924.cos.ap-beijing.myqcloud.com/qldownload/NDK%20r21d%20%2B%20FFmpeg%204.2%20%E7%BC%96%E5%86%99%E8%84%9A%E6%9C%AC%E6%96%87%E4%BB%B6%20%26%20%E7%BC%96%E8%AF%91%E7%94%9F%E6%88%90%20Android%20%E6%89%80%E9%9C%80%E7%9A%84%E5%BA%93/2.png"><meta property="og:image" content="https://weichao-io-1257283924.cos.ap-beijing.myqcloud.com/qldownload/NDK%20r21d%20%2B%20FFmpeg%204.2%20%E7%BC%96%E5%86%99%E8%84%9A%E6%9C%AC%E6%96%87%E4%BB%B6%20%26%20%E7%BC%96%E8%AF%91%E7%94%9F%E6%88%90%20Android%20%E6%89%80%E9%9C%80%E7%9A%84%E5%BA%93/3.png"><meta property="og:image" content="https://weichao-io-1257283924.cos.ap-beijing.myqcloud.com/qldownload/NDK%20r21d%20%2B%20FFmpeg%204.2%20%E7%BC%96%E5%86%99%E8%84%9A%E6%9C%AC%E6%96%87%E4%BB%B6%20%26%20%E7%BC%96%E8%AF%91%E7%94%9F%E6%88%90%20Android%20%E6%89%80%E9%9C%80%E7%9A%84%E5%BA%93/4.png"><meta property="og:image" content="https://weichao-io-1257283924.cos.ap-beijing.myqcloud.com/qldownload/NDK%20r21d%20%2B%20FFmpeg%204.2%20%E7%BC%96%E5%86%99%E8%84%9A%E6%9C%AC%E6%96%87%E4%BB%B6%20%26%20%E7%BC%96%E8%AF%91%E7%94%9F%E6%88%90%20Android%20%E6%89%80%E9%9C%80%E7%9A%84%E5%BA%93/5.png"><meta property="og:image" content="https://weichao-io-1257283924.cos.ap-beijing.myqcloud.com/qldownload/NDK%20r21d%20%2B%20FFmpeg%204.2%20%E7%BC%96%E5%86%99%E8%84%9A%E6%9C%AC%E6%96%87%E4%BB%B6%20%26%20%E7%BC%96%E8%AF%91%E7%94%9F%E6%88%90%20Android%20%E6%89%80%E9%9C%80%E7%9A%84%E5%BA%93/6.png"><meta property="og:image" content="https://weichao-io-1257283924.cos.ap-beijing.myqcloud.com/qldownload/NDK%20r21d%20%2B%20FFmpeg%204.2%20%E7%BC%96%E5%86%99%E8%84%9A%E6%9C%AC%E6%96%87%E4%BB%B6%20%26%20%E7%BC%96%E8%AF%91%E7%94%9F%E6%88%90%20Android%20%E6%89%80%E9%9C%80%E7%9A%84%E5%BA%93/7.png"><meta property="og:image" content="https://weichao-io-1257283924.cos.ap-beijing.myqcloud.com/qldownload/NDK%20r21d%20%2B%20FFmpeg%204.2%20%E7%BC%96%E5%86%99%E8%84%9A%E6%9C%AC%E6%96%87%E4%BB%B6%20%26%20%E7%BC%96%E8%AF%91%E7%94%9F%E6%88%90%20Android%20%E6%89%80%E9%9C%80%E7%9A%84%E5%BA%93/8.png"><meta property="og:image" content="https://weichao-io-1257283924.cos.ap-beijing.myqcloud.com/qldownload/NDK%20r21d%20%2B%20FFmpeg%204.2%20%E7%BC%96%E5%86%99%E8%84%9A%E6%9C%AC%E6%96%87%E4%BB%B6%20%26%20%E7%BC%96%E8%AF%91%E7%94%9F%E6%88%90%20Android%20%E6%89%80%E9%9C%80%E7%9A%84%E5%BA%93/9.png"><meta property="og:image" content="https://weichao-io-1257283924.cos.ap-beijing.myqcloud.com/qldownload/NDK%20r21d%20%2B%20FFmpeg%204.2%20%E7%BC%96%E5%86%99%E8%84%9A%E6%9C%AC%E6%96%87%E4%BB%B6%20%26%20%E7%BC%96%E8%AF%91%E7%94%9F%E6%88%90%20Android%20%E6%89%80%E9%9C%80%E7%9A%84%E5%BA%93/10.png"><meta property="og:image" content="https://weichao-io-1257283924.cos.ap-beijing.myqcloud.com/qldownload/NDK%20r21d%20%2B%20FFmpeg%204.2%20%E7%BC%96%E5%86%99%E8%84%9A%E6%9C%AC%E6%96%87%E4%BB%B6%20%26%20%E7%BC%96%E8%AF%91%E7%94%9F%E6%88%90%20Android%20%E6%89%80%E9%9C%80%E7%9A%84%E5%BA%93/11.png"><meta property="og:image" content="https://weichao-io-1257283924.cos.ap-beijing.myqcloud.com/qldownload/NDK%20r21d%20%2B%20FFmpeg%204.2%20%E7%BC%96%E5%86%99%E8%84%9A%E6%9C%AC%E6%96%87%E4%BB%B6%20%26%20%E7%BC%96%E8%AF%91%E7%94%9F%E6%88%90%20Android%20%E6%89%80%E9%9C%80%E7%9A%84%E5%BA%93/12.png"><meta property="og:image" content="https://weichao-io-1257283924.cos.ap-beijing.myqcloud.com/qldownload/NDK%20r21d%20%2B%20FFmpeg%204.2%20%E7%BC%96%E5%86%99%E8%84%9A%E6%9C%AC%E6%96%87%E4%BB%B6%20%26%20%E7%BC%96%E8%AF%91%E7%94%9F%E6%88%90%20Android%20%E6%89%80%E9%9C%80%E7%9A%84%E5%BA%93/13.png"><meta property="og:image" content="https://weichao-io-1257283924.cos.ap-beijing.myqcloud.com/qldownload/NDK%20r21d%20%2B%20FFmpeg%204.2%20%E7%BC%96%E5%86%99%E8%84%9A%E6%9C%AC%E6%96%87%E4%BB%B6%20%26%20%E7%BC%96%E8%AF%91%E7%94%9F%E6%88%90%20Android%20%E6%89%80%E9%9C%80%E7%9A%84%E5%BA%93/14.png"><meta property="og:image" content="https://weichao-io-1257283924.cos.ap-beijing.myqcloud.com/qldownload/NDK%20r21d%20%2B%20FFmpeg%204.2%20%E7%BC%96%E5%86%99%E8%84%9A%E6%9C%AC%E6%96%87%E4%BB%B6%20%26%20%E7%BC%96%E8%AF%91%E7%94%9F%E6%88%90%20Android%20%E6%89%80%E9%9C%80%E7%9A%84%E5%BA%93/15.png"><meta property="og:image" content="https://weichao-io-1257283924.cos.ap-beijing.myqcloud.com/qldownload/NDK%20r21d%20%2B%20FFmpeg%204.2%20%E7%BC%96%E5%86%99%E8%84%9A%E6%9C%AC%E6%96%87%E4%BB%B6%20%26%20%E7%BC%96%E8%AF%91%E7%94%9F%E6%88%90%20Android%20%E6%89%80%E9%9C%80%E7%9A%84%E5%BA%93/16.png"><meta property="og:image" content="https://weichao-io-1257283924.cos.ap-beijing.myqcloud.com/qldownload/NDK%20r21d%20%2B%20FFmpeg%204.2%20%E7%BC%96%E5%86%99%E8%84%9A%E6%9C%AC%E6%96%87%E4%BB%B6%20%26%20%E7%BC%96%E8%AF%91%E7%94%9F%E6%88%90%20Android%20%E6%89%80%E9%9C%80%E7%9A%84%E5%BA%93/17.png"><meta property="og:image" content="https://weichao-io-1257283924.cos.ap-beijing.myqcloud.com/qldownload/NDK%20r21d%20%2B%20FFmpeg%204.2%20%E7%BC%96%E5%86%99%E8%84%9A%E6%9C%AC%E6%96%87%E4%BB%B6%20%26%20%E7%BC%96%E8%AF%91%E7%94%9F%E6%88%90%20Android%20%E6%89%80%E9%9C%80%E7%9A%84%E5%BA%93/18.png"><meta property="og:image" content="https://weichao-io-1257283924.cos.ap-beijing.myqcloud.com/qldownload/NDK%20r21d%20%2B%20FFmpeg%204.2%20%E7%BC%96%E5%86%99%E8%84%9A%E6%9C%AC%E6%96%87%E4%BB%B6%20%26%20%E7%BC%96%E8%AF%91%E7%94%9F%E6%88%90%20Android%20%E6%89%80%E9%9C%80%E7%9A%84%E5%BA%93/19.png"><meta property="og:image" content="https://weichao-io-1257283924.cos.ap-beijing.myqcloud.com/qldownload/NDK%20r21d%20%2B%20FFmpeg%204.2%20%E7%BC%96%E5%86%99%E8%84%9A%E6%9C%AC%E6%96%87%E4%BB%B6%20%26%20%E7%BC%96%E8%AF%91%E7%94%9F%E6%88%90%20Android%20%E6%89%80%E9%9C%80%E7%9A%84%E5%BA%93/20.png"><meta property="og:image" content="https://weichao-io-1257283924.cos.ap-beijing.myqcloud.com/qldownload/NDK%20r21d%20%2B%20FFmpeg%204.2%20%E7%BC%96%E5%86%99%E8%84%9A%E6%9C%AC%E6%96%87%E4%BB%B6%20%26%20%E7%BC%96%E8%AF%91%E7%94%9F%E6%88%90%20Android%20%E6%89%80%E9%9C%80%E7%9A%84%E5%BA%93/21.png"><meta property="og:image" content="https://weichao-io-1257283924.cos.ap-beijing.myqcloud.com/qldownload/NDK%20r21d%20%2B%20FFmpeg%204.2%20%E7%BC%96%E5%86%99%E8%84%9A%E6%9C%AC%E6%96%87%E4%BB%B6%20%26%20%E7%BC%96%E8%AF%91%E7%94%9F%E6%88%90%20Android%20%E6%89%80%E9%9C%80%E7%9A%84%E5%BA%93/22.png"><meta property="og:image" content="https://weichao-io-1257283924.cos.ap-beijing.myqcloud.com/qldownload/NDK%20r21d%20%2B%20FFmpeg%204.2%20%E7%BC%96%E5%86%99%E8%84%9A%E6%9C%AC%E6%96%87%E4%BB%B6%20%26%20%E7%BC%96%E8%AF%91%E7%94%9F%E6%88%90%20Android%20%E6%89%80%E9%9C%80%E7%9A%84%E5%BA%93/23.png"><meta property="og:image" content="https://weichao-io-1257283924.cos.ap-beijing.myqcloud.com/qldownload/NDK%20r21d%20%2B%20FFmpeg%204.2%20%E7%BC%96%E5%86%99%E8%84%9A%E6%9C%AC%E6%96%87%E4%BB%B6%20%26%20%E7%BC%96%E8%AF%91%E7%94%9F%E6%88%90%20Android%20%E6%89%80%E9%9C%80%E7%9A%84%E5%BA%93/24.png"><meta property="og:image" content="https://weichao-io-1257283924.cos.ap-beijing.myqcloud.com/qldownload/NDK%20r21d%20%2B%20FFmpeg%204.2%20%E7%BC%96%E5%86%99%E8%84%9A%E6%9C%AC%E6%96%87%E4%BB%B6%20%26%20%E7%BC%96%E8%AF%91%E7%94%9F%E6%88%90%20Android%20%E6%89%80%E9%9C%80%E7%9A%84%E5%BA%93/31.png"><meta property="og:image" content="https://weichao-io-1257283924.cos.ap-beijing.myqcloud.com/qldownload/NDK%20r21d%20%2B%20FFmpeg%204.2%20%E7%BC%96%E5%86%99%E8%84%9A%E6%9C%AC%E6%96%87%E4%BB%B6%20%26%20%E7%BC%96%E8%AF%91%E7%94%9F%E6%88%90%20Android%20%E6%89%80%E9%9C%80%E7%9A%84%E5%BA%93/32.png"><meta property="og:image" content="https://weichao-io-1257283924.cos.ap-beijing.myqcloud.com/qldownload/NDK%20r21d%20%2B%20FFmpeg%204.2%20%E7%BC%96%E5%86%99%E8%84%9A%E6%9C%AC%E6%96%87%E4%BB%B6%20%26%20%E7%BC%96%E8%AF%91%E7%94%9F%E6%88%90%20Android%20%E6%89%80%E9%9C%80%E7%9A%84%E5%BA%93/33.png"><meta property="og:image" content="https://weichao-io-1257283924.cos.ap-beijing.myqcloud.com/qldownload/NDK%20r21d%20%2B%20FFmpeg%204.2%20%E7%BC%96%E5%86%99%E8%84%9A%E6%9C%AC%E6%96%87%E4%BB%B6%20%26%20%E7%BC%96%E8%AF%91%E7%94%9F%E6%88%90%20Android%20%E6%89%80%E9%9C%80%E7%9A%84%E5%BA%93/34.png"><meta property="og:image" content="https://weichao-io-1257283924.cos.ap-beijing.myqcloud.com/qldownload/NDK%20r21d%20%2B%20FFmpeg%204.2%20%E7%BC%96%E5%86%99%E8%84%9A%E6%9C%AC%E6%96%87%E4%BB%B6%20%26%20%E7%BC%96%E8%AF%91%E7%94%9F%E6%88%90%20Android%20%E6%89%80%E9%9C%80%E7%9A%84%E5%BA%93/35.png"><meta property="og:image" content="https://weichao-io-1257283924.cos.ap-beijing.myqcloud.com/qldownload/NDK%20r21d%20%2B%20FFmpeg%204.2%20%E7%BC%96%E5%86%99%E8%84%9A%E6%9C%AC%E6%96%87%E4%BB%B6%20%26%20%E7%BC%96%E8%AF%91%E7%94%9F%E6%88%90%20Android%20%E6%89%80%E9%9C%80%E7%9A%84%E5%BA%93/36.png"><meta property="og:image" content="https://weichao-io-1257283924.cos.ap-beijing.myqcloud.com/qldownload/NDK%20r21d%20%2B%20FFmpeg%204.2%20%E7%BC%96%E5%86%99%E8%84%9A%E6%9C%AC%E6%96%87%E4%BB%B6%20%26%20%E7%BC%96%E8%AF%91%E7%94%9F%E6%88%90%20Android%20%E6%89%80%E9%9C%80%E7%9A%84%E5%BA%93/37.png"><meta property="og:image" content="https://weichao-io-1257283924.cos.ap-beijing.myqcloud.com/qldownload/NDK%20r21d%20%2B%20FFmpeg%204.2%20%E7%BC%96%E5%86%99%E8%84%9A%E6%9C%AC%E6%96%87%E4%BB%B6%20%26%20%E7%BC%96%E8%AF%91%E7%94%9F%E6%88%90%20Android%20%E6%89%80%E9%9C%80%E7%9A%84%E5%BA%93/38.png"><meta property="og:image" content="https://weichao-io-1257283924.cos.ap-beijing.myqcloud.com/qldownload/NDK%20r21d%20%2B%20FFmpeg%204.2%20%E7%BC%96%E5%86%99%E8%84%9A%E6%9C%AC%E6%96%87%E4%BB%B6%20%26%20%E7%BC%96%E8%AF%91%E7%94%9F%E6%88%90%20Android%20%E6%89%80%E9%9C%80%E7%9A%84%E5%BA%93/39.png"><meta property="og:image" content="https://weichao-io-1257283924.cos.ap-beijing.myqcloud.com/qldownload/NDK%20r21d%20%2B%20FFmpeg%204.2%20%E7%BC%96%E5%86%99%E8%84%9A%E6%9C%AC%E6%96%87%E4%BB%B6%20%26%20%E7%BC%96%E8%AF%91%E7%94%9F%E6%88%90%20Android%20%E6%89%80%E9%9C%80%E7%9A%84%E5%BA%93/40.png"><meta property="og:image" content="https://weichao-io-1257283924.cos.ap-beijing.myqcloud.com/qldownload/NDK%20r21d%20%2B%20FFmpeg%204.2%20%E7%BC%96%E5%86%99%E8%84%9A%E6%9C%AC%E6%96%87%E4%BB%B6%20%26%20%E7%BC%96%E8%AF%91%E7%94%9F%E6%88%90%20Android%20%E6%89%80%E9%9C%80%E7%9A%84%E5%BA%93/41.png"><meta property="og:image" content="https://weichao-io-1257283924.cos.ap-beijing.myqcloud.com/qldownload/NDK%20r21d%20%2B%20FFmpeg%204.2%20%E7%BC%96%E5%86%99%E8%84%9A%E6%9C%AC%E6%96%87%E4%BB%B6%20%26%20%E7%BC%96%E8%AF%91%E7%94%9F%E6%88%90%20Android%20%E6%89%80%E9%9C%80%E7%9A%84%E5%BA%93/42.png"><meta property="og:image" content="https://weichao-io-1257283924.cos.ap-beijing.myqcloud.com/qldownload/NDK%20r21d%20%2B%20FFmpeg%204.2%20%E7%BC%96%E5%86%99%E8%84%9A%E6%9C%AC%E6%96%87%E4%BB%B6%20%26%20%E7%BC%96%E8%AF%91%E7%94%9F%E6%88%90%20Android%20%E6%89%80%E9%9C%80%E7%9A%84%E5%BA%93/43.png"><meta property="og:image" content="https://weichao-io-1257283924.cos.ap-beijing.myqcloud.com/qldownload/NDK%20r21d%20%2B%20FFmpeg%204.2%20%E7%BC%96%E5%86%99%E8%84%9A%E6%9C%AC%E6%96%87%E4%BB%B6%20%26%20%E7%BC%96%E8%AF%91%E7%94%9F%E6%88%90%20Android%20%E6%89%80%E9%9C%80%E7%9A%84%E5%BA%93/44.png"><meta property="og:image" content="https://weichao-io-1257283924.cos.ap-beijing.myqcloud.com/qldownload/NDK%20r21d%20%2B%20FFmpeg%204.2%20%E7%BC%96%E5%86%99%E8%84%9A%E6%9C%AC%E6%96%87%E4%BB%B6%20%26%20%E7%BC%96%E8%AF%91%E7%94%9F%E6%88%90%20Android%20%E6%89%80%E9%9C%80%E7%9A%84%E5%BA%93/45.png"><meta property="og:image" content="https://weichao-io-1257283924.cos.ap-beijing.myqcloud.com/qldownload/NDK%20r21d%20%2B%20FFmpeg%204.2%20%E7%BC%96%E5%86%99%E8%84%9A%E6%9C%AC%E6%96%87%E4%BB%B6%20%26%20%E7%BC%96%E8%AF%91%E7%94%9F%E6%88%90%20Android%20%E6%89%80%E9%9C%80%E7%9A%84%E5%BA%93/46.png"><meta property="article:published_time" content="2020-09-21T19:20:30.000Z"><meta property="article:modified_time" content="2022-12-04T06:04:05.232Z"><meta property="article:author" content="魏超"><meta property="article:tag" content="魏超,weichao"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:image" content="https://weichao-io-1257283924.cos.ap-beijing.myqcloud.com/qldownload/NDK%20r21d%20%2B%20FFmpeg%204.2%20%E7%BC%96%E5%86%99%E8%84%9A%E6%9C%AC%E6%96%87%E4%BB%B6%20%26%20%E7%BC%96%E8%AF%91%E7%94%9F%E6%88%90%20Android%20%E6%89%80%E9%9C%80%E7%9A%84%E5%BA%93/1.png"><title>NDK r21d + FFmpeg 4.2 编写脚本文件 &amp; 编译生成 Android 所需的库 - 『魏超』的 blog</title><link rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css"><link rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css"><link rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css"><link rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css"><link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_hj8rtnfg7um.css"><link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_lbnruvf0jn.css"><link rel="stylesheet" href="/css/main.css"><link id="highlight-css" rel="stylesheet" href="/css/highlight.css"><link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css"><link rel="stylesheet" href="/css/custom.css"><link rel="stylesheet" href="//at.alicdn.com/t/c/font_1956623_vyed6le6uz.css"><script id="fluid-configs">var Fluid=window.Fluid||{};Fluid.ctx=Object.assign({},Fluid.ctx);var CONFIG={hostname:"weichao.io",root:"/",version:"1.9.4",typing:{enable:!1,typeSpeed:70,cursorChar:"_",loop:!1,scope:[]},anchorjs:{enable:!0,element:"h1,h2,h3,h4,h5,h6",placement:"left",visible:"hover",icon:""},progressbar:{enable:!0,height_px:3,color:"#29d",options:{showSpinner:!1,trickleSpeed:100}},code_language:{enable:!0,default:"TEXT"},copy_btn:!0,image_caption:{enable:!1},image_zoom:{enable:!0,img_url_replace:["",""]},toc:{enable:!0,placement:"right",headingSelector:"h1,h2,h3,h4,h5,h6",collapseDepth:2},lazyload:{enable:!0,loading_img:"/img/loading.gif",onlypost:!0,offset_factor:2},web_analytics:{enable:!0,follow_dnt:!0,baidu:null,google:null,gtag:null,tencent:{sid:null,cid:null},woyaola:null,cnzz:null,leancloud:{app_id:"kQcwfNV9f5OTEb51AgXNco4o-gzGzoHsz",app_key:"IVVmse4bqkjcVx2bEJiswbJc",server_url:"https://kqcwfnv9.lc-cn-n1-shared.com",path:"window.location.pathname",ignore_local:!1}},search_path:"/local-search.xml"};if(CONFIG.web_analytics.follow_dnt){var dntVal=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack;Fluid.ctx.dnt=dntVal&&(dntVal.startsWith("1")||dntVal.startsWith("yes")||dntVal.startsWith("on"))}</script><script src="/js/utils.js"></script><script src="/js/color-schema.js"></script><meta name="generator" content="Hexo 6.3.0"></head><body><header><div class="header-inner" style="height:70vh"><nav id="navbar" class="navbar fixed-top navbar-expand-lg navbar-dark scrolling-navbar"><div class="container"><a class="navbar-brand" href="/"><strong>『魏超』的 blog</strong> </a><button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation"><div class="animated-icon"><span></span><span></span><span></span></div></button><div class="collapse navbar-collapse" id="navbarSupportedContent"><ul class="navbar-nav ml-auto text-center"><li class="nav-item"><a class="nav-link" href="/"><i class="iconfont icon-my-home"></i> <span>首页</span></a></li><li class="nav-item dropdown"><a class="nav-link dropdown-toggle" target="_self" href="javascript:;" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><i class="iconfont icon-my-document"></i> <span>文档</span></a><div class="dropdown-menu" aria-labelledby="navbarDropdown"><a class="dropdown-item" href="/archives/"><i class="iconfont icon-my-archive"></i> <span>归档</span> </a><a class="dropdown-item" href="/categories/"><i class="iconfont icon-my-category"></i> <span>分类</span> </a><a class="dropdown-item" href="/tags/"><i class="iconfont icon-my-tag"></i> <span>标签</span></a></div></li><li class="nav-item dropdown"><a class="nav-link dropdown-toggle" target="_self" href="javascript:;" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><i class="iconfont icon-my-image"></i> <span>图库</span></a><div class="dropdown-menu" aria-labelledby="navbarDropdown"><a class="dropdown-item" href="/photo/"><i class="iconfont icon-my-camera"></i> <span>摄影</span> </a><a class="dropdown-item" href="/skiing/"><i class="iconfont icon-my-skiing"></i> <span>滑雪</span> </a><a class="dropdown-item" href="/motor/"><i class="iconfont icon-my-motor"></i> <span>摩托车</span></a></div></li><li class="nav-item"><a class="nav-link" href="/about/"><i class="iconfont icon-my-me"></i> <span>关于</span></a></li><li class="nav-item"><a class="nav-link" href="/links/"><i class="iconfont icon-my-link"></i> <span>友链</span></a></li><li class="nav-item" id="search-btn"><a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search"><i class="iconfont icon-search"></i></a></li><li class="nav-item" id="color-toggle-btn"><a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle"><i class="iconfont icon-dark" id="color-toggle-icon"></i></a></li></ul></div></div></nav><div id="banner" class="banner" parallax="true" style="background:url(/img/my_background.jpg) no-repeat center center;background-size:cover"><div class="full-bg-img"><div class="mask flex-center" style="background-color:rgba(0,0,0,.3)"><div class="banner-text text-center fade-in-up"><div class="h2"><span id="subtitle">NDK r21d + FFmpeg 4.2 编写脚本文件 & 编译生成 Android 所需的库</span></div><div class="mt-3"><span class="post-meta mr-2"><i class="iconfont icon-author" aria-hidden="true"></i> 魏超 </span><span class="post-meta"><i class="iconfont icon-date-fill" aria-hidden="true"></i> <time datetime="2020-09-22 03:20" pubdate>2020年9月22日 凌晨</time></span></div><div class="mt-1"><span class="post-meta mr-2"><i class="iconfont icon-chart"></i> 30k 字 </span><span class="post-meta mr-2"><i class="iconfont icon-clock-fill"></i> 252 分钟</span></div></div></div></div></div></div></header><main><div class="container-fluid nopadding-x"><div class="row nomargin-x"><div class="side-col d-none d-lg-block col-lg-2"></div><div class="col-lg-8 nopadding-x-md"><div class="container nopadding-x-md" id="board-ctn"><div id="board"><article class="post-content mx-auto"><h1 style="display:none">NDK r21d + FFmpeg 4.2 编写脚本文件 &amp; 编译生成 Android 所需的库</h1><p class="note note-info">本文最后更新于：2 个月前</p><div class="markdown-body"><h1 id="reference"><a class="markdownIt-Anchor" href="#reference"></a> <strong>Reference</strong></h1><ul><li><a target="_blank" rel="noopener" href="http://ffmpeg.org/" title="http://ffmpeg.org/">FFmpeg</a></li><li><a target="_blank" rel="noopener" href="https://blog.csdn.net/z2066411585/article/details/81239446" title="https://blog.csdn.net/z2066411585/article/details/81239446">FFMPEG 配置选项详细说明</a></li><li><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/76462890" title="https://zhuanlan.zhihu.com/p/76462890">FFmpeg编译4.1.4并移植到Android</a></li></ul><hr><h1 id="下载-ffmpeg-源码"><a class="markdownIt-Anchor" href="#下载-ffmpeg-源码"></a> <strong>下载 FFmpeg 源码</strong></h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">git clone https://git.ffmpeg.org/ffmpeg.git ffmpeg<br></code></pre></td></tr></table></figure><hr><h1 id="编写脚本文件"><a class="markdownIt-Anchor" href="#编写脚本文件"></a> <strong>编写脚本文件</strong></h1><h2 id="查看文件目录"><a class="markdownIt-Anchor" href="#查看文件目录"></a> <strong>查看文件目录</strong></h2><p><img src="https://weichao-io-1257283924.cos.ap-beijing.myqcloud.com/qldownload/NDK%20r21d%20%2B%20FFmpeg%204.2%20%E7%BC%96%E5%86%99%E8%84%9A%E6%9C%AC%E6%96%87%E4%BB%B6%20%26%20%E7%BC%96%E8%AF%91%E7%94%9F%E6%88%90%20Android%20%E6%89%80%E9%9C%80%E7%9A%84%E5%BA%93/1.png" alt=""></p><h2 id="查看支持的命令"><a class="markdownIt-Anchor" href="#查看支持的命令"></a> <strong>查看支持的命令</strong></h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">./configure --help<br></code></pre></td></tr></table></figure><p><img src="https://weichao-io-1257283924.cos.ap-beijing.myqcloud.com/qldownload/NDK%20r21d%20%2B%20FFmpeg%204.2%20%E7%BC%96%E5%86%99%E8%84%9A%E6%9C%AC%E6%96%87%E4%BB%B6%20%26%20%E7%BC%96%E8%AF%91%E7%94%9F%E6%88%90%20Android%20%E6%89%80%E9%9C%80%E7%9A%84%E5%BA%93/2.png" alt=""><br><img src="https://weichao-io-1257283924.cos.ap-beijing.myqcloud.com/qldownload/NDK%20r21d%20%2B%20FFmpeg%204.2%20%E7%BC%96%E5%86%99%E8%84%9A%E6%9C%AC%E6%96%87%E4%BB%B6%20%26%20%E7%BC%96%E8%AF%91%E7%94%9F%E6%88%90%20Android%20%E6%89%80%E9%9C%80%E7%9A%84%E5%BA%93/3.png" alt=""><br><img src="https://weichao-io-1257283924.cos.ap-beijing.myqcloud.com/qldownload/NDK%20r21d%20%2B%20FFmpeg%204.2%20%E7%BC%96%E5%86%99%E8%84%9A%E6%9C%AC%E6%96%87%E4%BB%B6%20%26%20%E7%BC%96%E8%AF%91%E7%94%9F%E6%88%90%20Android%20%E6%89%80%E9%9C%80%E7%9A%84%E5%BA%93/4.png" alt=""><br><img src="https://weichao-io-1257283924.cos.ap-beijing.myqcloud.com/qldownload/NDK%20r21d%20%2B%20FFmpeg%204.2%20%E7%BC%96%E5%86%99%E8%84%9A%E6%9C%AC%E6%96%87%E4%BB%B6%20%26%20%E7%BC%96%E8%AF%91%E7%94%9F%E6%88%90%20Android%20%E6%89%80%E9%9C%80%E7%9A%84%E5%BA%93/5.png" alt=""><br><img src="https://weichao-io-1257283924.cos.ap-beijing.myqcloud.com/qldownload/NDK%20r21d%20%2B%20FFmpeg%204.2%20%E7%BC%96%E5%86%99%E8%84%9A%E6%9C%AC%E6%96%87%E4%BB%B6%20%26%20%E7%BC%96%E8%AF%91%E7%94%9F%E6%88%90%20Android%20%E6%89%80%E9%9C%80%E7%9A%84%E5%BA%93/6.png" alt=""><br><img src="https://weichao-io-1257283924.cos.ap-beijing.myqcloud.com/qldownload/NDK%20r21d%20%2B%20FFmpeg%204.2%20%E7%BC%96%E5%86%99%E8%84%9A%E6%9C%AC%E6%96%87%E4%BB%B6%20%26%20%E7%BC%96%E8%AF%91%E7%94%9F%E6%88%90%20Android%20%E6%89%80%E9%9C%80%E7%9A%84%E5%BA%93/7.png" alt=""><br><img src="https://weichao-io-1257283924.cos.ap-beijing.myqcloud.com/qldownload/NDK%20r21d%20%2B%20FFmpeg%204.2%20%E7%BC%96%E5%86%99%E8%84%9A%E6%9C%AC%E6%96%87%E4%BB%B6%20%26%20%E7%BC%96%E8%AF%91%E7%94%9F%E6%88%90%20Android%20%E6%89%80%E9%9C%80%E7%9A%84%E5%BA%93/8.png" alt=""><br><img src="https://weichao-io-1257283924.cos.ap-beijing.myqcloud.com/qldownload/NDK%20r21d%20%2B%20FFmpeg%204.2%20%E7%BC%96%E5%86%99%E8%84%9A%E6%9C%AC%E6%96%87%E4%BB%B6%20%26%20%E7%BC%96%E8%AF%91%E7%94%9F%E6%88%90%20Android%20%E6%89%80%E9%9C%80%E7%9A%84%E5%BA%93/9.png" alt=""><br><img src="https://weichao-io-1257283924.cos.ap-beijing.myqcloud.com/qldownload/NDK%20r21d%20%2B%20FFmpeg%204.2%20%E7%BC%96%E5%86%99%E8%84%9A%E6%9C%AC%E6%96%87%E4%BB%B6%20%26%20%E7%BC%96%E8%AF%91%E7%94%9F%E6%88%90%20Android%20%E6%89%80%E9%9C%80%E7%9A%84%E5%BA%93/10.png" alt=""><br><img src="https://weichao-io-1257283924.cos.ap-beijing.myqcloud.com/qldownload/NDK%20r21d%20%2B%20FFmpeg%204.2%20%E7%BC%96%E5%86%99%E8%84%9A%E6%9C%AC%E6%96%87%E4%BB%B6%20%26%20%E7%BC%96%E8%AF%91%E7%94%9F%E6%88%90%20Android%20%E6%89%80%E9%9C%80%E7%9A%84%E5%BA%93/11.png" alt=""><br><img src="https://weichao-io-1257283924.cos.ap-beijing.myqcloud.com/qldownload/NDK%20r21d%20%2B%20FFmpeg%204.2%20%E7%BC%96%E5%86%99%E8%84%9A%E6%9C%AC%E6%96%87%E4%BB%B6%20%26%20%E7%BC%96%E8%AF%91%E7%94%9F%E6%88%90%20Android%20%E6%89%80%E9%9C%80%E7%9A%84%E5%BA%93/12.png" alt=""></p><h3 id="decoders"><a class="markdownIt-Anchor" href="#decoders"></a> <strong>decoders</strong></h3><p><img src="https://weichao-io-1257283924.cos.ap-beijing.myqcloud.com/qldownload/NDK%20r21d%20%2B%20FFmpeg%204.2%20%E7%BC%96%E5%86%99%E8%84%9A%E6%9C%AC%E6%96%87%E4%BB%B6%20%26%20%E7%BC%96%E8%AF%91%E7%94%9F%E6%88%90%20Android%20%E6%89%80%E9%9C%80%E7%9A%84%E5%BA%93/13.png" alt=""><br><img src="https://weichao-io-1257283924.cos.ap-beijing.myqcloud.com/qldownload/NDK%20r21d%20%2B%20FFmpeg%204.2%20%E7%BC%96%E5%86%99%E8%84%9A%E6%9C%AC%E6%96%87%E4%BB%B6%20%26%20%E7%BC%96%E8%AF%91%E7%94%9F%E6%88%90%20Android%20%E6%89%80%E9%9C%80%E7%9A%84%E5%BA%93/14.png" alt=""></p><p>decoders||||||||<br>–|–<br>aac |amrwb |dst |hnm4_video |mp1 |pcm_f32le |rv30 |vc1_v4l2m2m<br>aac_at |amv |dvaudio |hq_hqa |mp1_at |pcm_f64be |rv40 |vc1image<br>aac_fixed |anm |dvbsub |hqx |mp1float |pcm_f64le |s302m |vcr1<br>aac_latm |ansi |dvdsub |huffyuv |mp2 |pcm_lxf |sami |vmdaudio<br>aasc |ape |dvvideo |hymt |mp2_at |pcm_mulaw |sanm |vmdvideo<br>ac3 |apng |dxa |iac |mp2float |pcm_mulaw_at |sbc |vmnc<br>ac3_at |aptx |dxtory |idcin |mp3 |pcm_s16be |scpr |vorbis<br>ac3_fixed |aptx_hd |dxv |idf |mp3_at |pcm_s16be_planar |screenpresso |vp3<br>acelp_kelvin |arbc |eac3 |iff_ilbm |mp3adu |pcm_s16le |sdx2_dpcm |vp4<br>adpcm_4xm |ass |eac3_at |ilbc |mp3adufloat |pcm_s16le_planar |sgi |vp5<br>adpcm_adx |asv1 |eacmv |ilbc_at |mp3float |pcm_s24be |sgirle |vp6<br>adpcm_afc |asv2 |eamad |imc |mp3on4 |pcm_s24daud |sheervideo |vp6a<br>adpcm_agm |atrac1 |eatgq |imm4 |mp3on4float |pcm_s24le |shorten |vp6f<br>adpcm_aica |atrac3 |eatgv |imm5 |mpc7 |pcm_s24le_planar |sipr |vp7<br>adpcm_argo |atrac3al |eatqi |indeo2 |mpc8 |pcm_s32be |siren |vp8<br>adpcm_ct |atrac3p |eightbps |indeo3 |mpeg1_cuvid |pcm_s32le |smackaud |vp8_cuvid<br>adpcm_dtk |atrac3pal |eightsvx_exp |indeo4 |mpeg1_v4l2m2m |pcm_s32le_planar |smacker |vp8_mediacodec<br>adpcm_ea |atrac9 |eightsvx_fib |indeo5 |mpeg1video |pcm_s64be |smc |vp8_qsv<br>adpcm_ea_maxis_xa |aura |escape124 |interplay_acm |mpeg2_crystalhd |pcm_s64le |smvjpeg |vp8_rkmpp<br>adpcm_ea_r1 |aura2 |escape130 |interplay_dpcm |mpeg2_cuvid |pcm_s8 |snow |vp8_v4l2m2m<br>adpcm_ea_r2 |av1 |evrc |interplay_video |mpeg2_mediacodec |pcm_s8_planar |sol_dpcm |vp9<br>adpcm_ea_r3 |avrn |exr |jacosub |mpeg2_mmal |pcm_u16be |sonic |vp9_cuvid<br>adpcm_ea_xas |avrp |fastaudio |jpeg2000 |mpeg2_qsv |pcm_u16le |sp5x |vp9_mediacodec<br>adpcm_g722 |avs |ffv1 |jpegls |mpeg2_v4l2m2m |pcm_u24be |speedhq |vp9_qsv<br>adpcm_g726 |avui |ffvhuff |jv |mpeg2video |pcm_u24le |srgc |vp9_rkmpp<br>adpcm_g726le |ayuv |ffwavesynth |kgv1 |mpeg4 |pcm_u32be |srt |vp9_v4l2m2m<br>adpcm_ima_alp |bethsoftvid |fic |kmvc |mpeg4_crystalhd |pcm_u32le |ssa |vplayer<br>adpcm_ima_amv |bfi |fits |lagarith |mpeg4_cuvid |pcm_u8 |stl |vqa<br>adpcm_ima_apc |bink |flac |libaom_av1 |mpeg4_mediacodec |pcm_vidc |subrip |wavpack<br>adpcm_ima_apm |binkaudio_dct |flashsv |libaribb24 |mpeg4_mmal |pcx |subviewer |wcmv<br>adpcm_ima_cunning |binkaudio_rdft |flashsv2 |libcelt |mpeg4_v4l2m2m |pfm |subviewer1 |webp<br>adpcm_ima_dat4 |bintext |flic |libcodec2 |mpegvideo |pgm |sunrast |webvtt<br>adpcm_ima_dk3 |bitpacked |flv |libdav1d |mpl2 |pgmyuv |svq1 |wmalossless<br>adpcm_ima_dk4 |bmp |fmvc |libdavs2 |msa1 |pgssub |svq3 |wmapro<br>adpcm_ima_ea_eacs |bmv_audio |fourxm |libfdk_aac |mscc |pgx |tak |wmav1<br>adpcm_ima_ea_sead |bmv_video |fraps |libgsm |msmpeg4_crystalhd |photocd |targa |wmav2<br>adpcm_ima_iss |brender_pix |frwu |libgsm_ms |msmpeg4v1 |pictor |targa_y216 |wmavoice<br>adpcm_ima_moflex |c93 |g2m |libilbc |msmpeg4v2 |pixlet |tdsc |wmv1<br>adpcm_ima_mtf |cavs |g723_1 |libopencore_amrnb |msmpeg4v3 |pjs |text |wmv2<br>adpcm_ima_oki |ccaption |g729 |libopencore_amrwb |msrle |png |theora |wmv3<br>adpcm_ima_qt |cdgraphics |gdv |libopenh264 |mss1 |ppm |thp |wmv3_crystalhd<br>adpcm_ima_qt_at |cdtoons |gif |libopenjpeg |mss2 |prores |tiertexseqvideo |wmv3image<br>adpcm_ima_rad |cdxl |gremlin_dpcm |libopus |msvideo1 |prosumer |tiff |wnv1<br>adpcm_ima_smjpeg |cfhd |gsm |librsvg |mszh |psd |tmv |wrapped_avframe<br>adpcm_ima_ssi |cinepak |gsm_ms |libspeex |mts2 |ptx |truehd |ws_snd1<br>adpcm_ima_wav |clearvideo |gsm_ms_at |libvorbis |mv30 |qcelp |truemotion1 |xan_dpcm<br>adpcm_ima_ws |cljr |h261 |libvpx_vp8 |mvc1 |qdm2 |truemotion2 |xan_wc3<br>adpcm_ms |cllc |h263 |libvpx_vp9 |mvc2 |qdm2_at |truemotion2rt |xan_wc4<br>adpcm_mtaf |comfortnoise |h263_v4l2m2m |libzvbi_teletext |mvdv |qdmc |truespeech |xbin<br>adpcm_psx |cook |h263i |loco |mvha |qdmc_at |tscc |xbm<br>adpcm_sbpro_2 |cpia |h263p |lscr |mwsc |qdraw |tscc2 |xface<br>adpcm_sbpro_3 |cscd |h264 |m101 |mxpeg |qpeg |tta |xl<br>adpcm_sbpro_4 |cyuv |h264_crystalhd |mace3 |nellymoser |qtrle |twinvq |xma1<br>adpcm_swf |dca |h264_cuvid |mace6 |notchlc |r10k |txd |xma2<br>adpcm_thp |dds |h264_mediacodec |magicyuv |nuv |r210 |ulti |xpm<br>adpcm_thp_le |derf_dpcm |h264_mmal |mdec |on2avc |ra_144 |utvideo |xsub<br>adpcm_vima |dfa |h264_qsv |metasound |opus |ra_288 |v210 |xwd<br>adpcm_xa |dirac |h264_rkmpp |microdvd |paf_audio |ralf |v210x |y41p<br>adpcm_yamaha |dnxhd |h264_v4l2m2m |mimic |paf_video |rasc |v308 |ylc<br>adpcm_zork |dolby_e |hap |mjpeg |pam |rawvideo |v408 |yop<br>agm |dpx |hca |mjpeg_cuvid |pbm |realtext |v410 |yuv4<br>aic |dsd_lsbf |hcom |mjpeg_qsv |pcm_alaw |rl2 |vb |zero12v<br>alac |dsd_lsbf_planar |hevc |mjpegb |pcm_alaw_at |roq |vble |zerocodec<br>alac_at |dsd_msbf |hevc_cuvid |mlp |pcm_bluray |roq_dpcm |vc1 |zlib<br>alias_pix |dsd_msbf_planar |hevc_mediacodec |mmvideo |pcm_dvd |rpza |vc1_crystalhd |zmbv<br>als |dsicinaudio |hevc_qsv |mobiclip |pcm_f16le |rscc |vc1_cuvid<br>amr_nb_at |dsicinvideo |hevc_rkmpp |motionpixels |pcm_f24le |rv10 |vc1_mmal<br>amrnb |dss_sp |hevc_v4l2m2m |movtext |pcm_f32be |rv20 |vc1_qsv</p><h3 id="encoders"><a class="markdownIt-Anchor" href="#encoders"></a> <strong>encoders</strong></h3><p><img src="https://weichao-io-1257283924.cos.ap-beijing.myqcloud.com/qldownload/NDK%20r21d%20%2B%20FFmpeg%204.2%20%E7%BC%96%E5%86%99%E8%84%9A%E6%9C%AC%E6%96%87%E4%BB%B6%20%26%20%E7%BC%96%E8%AF%91%E7%94%9F%E6%88%90%20Android%20%E6%89%80%E9%9C%80%E7%9A%84%E5%BA%93/15.png" alt=""></p><p>encoders||||||||<br>–|–<br>a64multi |asv2 |h264_amf |libopenh264 |movtext |pcm_mulaw_at |prores |utvideo<br>a64multi5 |avrp |h264_mf |libopenjpeg |mp2 |pcm_s16be |prores_aw |v210<br>aac |avui |h264_nvenc |libopus |mp2fixed |pcm_s16be_planar |prores_ks |v308<br>aac_at |ayuv |h264_omx |librav1e |mp3_mf |pcm_s16le |qtrle |v408<br>aac_mf |bmp |h264_qsv |libshine |mpeg1video |pcm_s16le_planar |r10k |v410<br>ac3 |cfhd |h264_v4l2m2m |libspeex |mpeg2_qsv |pcm_s24be |r210 |vc2<br>ac3_fixed |cinepak |h264_vaapi |libsvtav1 |mpeg2_vaapi |pcm_s24daud |ra_144 |vorbis<br>ac3_mf |cljr |h264_videotoolbox |libtheora |mpeg2video |pcm_s24le |rawvideo |vp8_v4l2m2m<br>adpcm_adx |comfortnoise |hap |libtwolame |mpeg4 |pcm_s24le_planar |roq |vp8_vaapi<br>adpcm_argo |dca |hevc_amf |libvo_amrwbenc |mpeg4_omx |pcm_s32be |roq_dpcm |vp9_qsv<br>adpcm_g722 |dnxhd |hevc_mf |libvorbis |mpeg4_v4l2m2m |pcm_s32le |rpza |vp9_vaapi<br>adpcm_g726 |dpx |hevc_nvenc |libvpx_vp8 |msmpeg4v2 |pcm_s32le_planar |rv10 |wavpack<br>adpcm_g726le |dvbsub |hevc_qsv |libvpx_vp9 |msmpeg4v3 |pcm_s64be |rv20 |webvtt<br>adpcm_ima_apm |dvdsub |hevc_v4l2m2m |libwavpack |msvideo1 |pcm_s64le |s302m |wmav1<br>adpcm_ima_qt |dvvideo |hevc_vaapi |libwebp |nellymoser |pcm_s8 |sbc |wmav2<br>adpcm_ima_ssi |eac3 |hevc_videotoolbox |libwebp_anim |nvenc |pcm_s8_planar |sgi |wmv1<br>adpcm_ima_wav |ffv1 |huffyuv |libx262 |nvenc_h264 |pcm_u16be |snow |wmv2<br>adpcm_ms |ffvhuff |ilbc_at |libx264 |nvenc_hevc |pcm_u16le |sonic |wrapped_avframe<br>adpcm_swf |fits |jpeg2000 |libx264rgb |opus |pcm_u24be |sonic_ls |xbm<br>adpcm_yamaha |flac |jpegls |libx265 |pam |pcm_u24le |srt |xface<br>alac |flashsv |libaom_av1 |libxavs |pbm |pcm_u32be |ssa |xsub<br>alac_at |flashsv2 |libcodec2 |libxavs2 |pcm_alaw |pcm_u32le |subrip |xwd<br>alias_pix |flv |libfdk_aac |libxvid |pcm_alaw_at |pcm_u8 |sunrast |y41p<br>amv |g723_1 |libgsm |ljpeg |pcm_dvd |pcm_vidc |svq1 |yuv4<br>apng |gif |libgsm_ms |magicyuv |pcm_f32be |pcx |targa |zlib<br>aptx |h261 |libilbc |mjpeg |pcm_f32le |pgm |text |zmbv<br>aptx_hd |h263 |libkvazaar |mjpeg_qsv |pcm_f64be |pgmyuv |tiff<br>ass |h263_v4l2m2m |libmp3lame |mjpeg_vaapi |pcm_f64le |png |truehd<br>asv1 |h263p |libopencore_amrnb |mlp |pcm_mulaw |ppm |tta</p><h3 id="hardware-accelerators"><a class="markdownIt-Anchor" href="#hardware-accelerators"></a> <strong>hardware accelerators</strong></h3><p><img src="https://weichao-io-1257283924.cos.ap-beijing.myqcloud.com/qldownload/NDK%20r21d%20%2B%20FFmpeg%204.2%20%E7%BC%96%E5%86%99%E8%84%9A%E6%9C%AC%E6%96%87%E4%BB%B6%20%26%20%E7%BC%96%E8%AF%91%E7%94%9F%E6%88%90%20Android%20%E6%89%80%E9%9C%80%E7%9A%84%E5%BA%93/16.png" alt=""></p><p>hardware accelerators||||||||<br>–|–<br>h263_vaapi |h264_vdpau |hevc_vdpau |mpeg1_xvmc |mpeg2_videotoolbox |vc1_d3d11va2 |vp9_d3d11va |wmv3_d3d11va2<br>h263_videotoolbox |h264_videotoolbox |hevc_videotoolbox |mpeg2_d3d11va |mpeg2_xvmc |vc1_dxva2 |vp9_d3d11va2 |wmv3_dxva2<br>h264_d3d11va |hevc_d3d11va |mjpeg_nvdec |mpeg2_d3d11va2 |mpeg4_nvdec |vc1_nvdec |vp9_dxva2 |wmv3_nvdec<br>h264_d3d11va2 |hevc_d3d11va2 |mjpeg_vaapi |mpeg2_dxva2 |mpeg4_vaapi |vc1_vaapi |vp9_nvdec |wmv3_vaapi<br>h264_dxva2 |hevc_dxva2 |mpeg1_nvdec |mpeg2_nvdec |mpeg4_vdpau |vc1_vdpau |vp9_vaapi |wmv3_vdpau<br>h264_nvdec |hevc_nvdec |mpeg1_vdpau |mpeg2_vaapi |mpeg4_videotoolbox |vp8_nvdec |vp9_vdpau<br>h264_vaapi |hevc_vaapi |mpeg1_videotoolbox |mpeg2_vdpau |vc1_d3d11va |vp8_vaapi |wmv3_d3d11va</p><h3 id="demuxers"><a class="markdownIt-Anchor" href="#demuxers"></a> <strong>demuxers</strong></h3><p><img src="https://weichao-io-1257283924.cos.ap-beijing.myqcloud.com/qldownload/NDK%20r21d%20%2B%20FFmpeg%204.2%20%E7%BC%96%E5%86%99%E8%84%9A%E6%9C%AC%E6%96%87%E4%BB%B6%20%26%20%E7%BC%96%E8%AF%91%E7%94%9F%E6%88%90%20Android%20%E6%89%80%E9%9C%80%E7%9A%84%E5%BA%93/17.png" alt=""></p><p>demuxers||||||||<br>–|–<br>aa |bfstm |flac |image_jpeg_pipe |lxf |obu |rtp |txd<br>aac |bink |flic |image_jpegls_pipe |m4v |ogg |rtsp |ty<br>aax |bintext |flv |image_pam_pipe |matroska |oma |s337m |v210<br>ac3 |bit |fourxm |image_pbm_pipe |mca |paf |sami |v210x<br>acm |bmv |frm |image_pcx_pipe |mcc |pcm_alaw |sap |vag<br>act |boa |fsb |image_pgm_pipe |mgsts |pcm_f32be |sbc |vapoursynth<br>adf |brstm |fwse |image_pgmyuv_pipe |microdvd |pcm_f32le |sbg |vc1<br>adp |c93 |g722 |image_pgx_pipe |mjpeg |pcm_f64be |scc |vc1t<br>ads |caf |g723_1 |image_photocd_pipe |mjpeg_2000 |pcm_f64le |sdp |vividas<br>adx |cavsvideo |g726 |image_pictor_pipe |mlp |pcm_mulaw |sdr2 |vivo<br>aea |cdg |g726le |image_png_pipe |mlv |pcm_s16be |sds |vmd<br>afc |cdxl |g729 |image_ppm_pipe |mm |pcm_s16le |sdx |vobsub<br>aiff |cine |gdv |image_psd_pipe |mmf |pcm_s24be |segafilm |voc<br>aix |codec2 |genh |image_qdraw_pipe |mods |pcm_s24le |ser |vpk<br>alp |codec2raw |gif |image_sgi_pipe |moflex |pcm_s32be |shorten |vplayer<br>amr |concat |gsm |image_sunrast_pipe |mov |pcm_s32le |siff |vqf<br>amrnb |dash |gxf |image_svg_pipe |mp3 |pcm_s8 |sln |w64<br>amrwb |data |h261 |image_tiff_pipe |mpc |pcm_u16be |smacker |wav<br>anm |daud |h263 |image_webp_pipe |mpc8 |pcm_u16le |smjpeg |wc3<br>apc |dcstr |h264 |image_xpm_pipe |mpegps |pcm_u24be |smush |webm_dash_manifest<br>ape |derf |hca |image_xwd_pipe |mpegts |pcm_u24le |sol |webvtt<br>apm |dfa |hcom |ingenient |mpegtsraw |pcm_u32be |sox |wsaud<br>apng |dhav |hevc |ipmovie |mpegvideo |pcm_u32le |spdif |wsd<br>aptx |dirac |hls |ircam |mpjpeg |pcm_u8 |srt |wsvqa<br>aptx_hd |dnxhd |hnm |iss |mpl2 |pcm_vidc |stl |wtv<br>aqtitle |dsf |ico |iv8 |mpsub |pjs |str |wv<br>argo_asf |dsicin |idcin |ivf |msf |pmp |subviewer |wve<br>argo_brp |dss |idf |ivr |msnwc_tcp |pp_bnk |subviewer1 |xa<br>asf |dts |iff |jacosub |mtaf |pva |sup |xbin<br>asf_o |dtshd |ifv |jv |mtv |pvf |svag |xmv<br>ass |dv |ilbc |kux |musx |qcp |svs |xvag<br>ast |dvbsub |image2 |kvag |mv |r3d |swf |xwma<br>au |dvbtxt |image2_alias_pix |libgme |mvi |rawvideo |tak |yop<br>av1 |dxa |image2_brender_pix |libmodplug |mxf |realtext |tedcaptions |yuv4mpegpipe<br>avi |ea |image2pipe |libopenmpt |mxg |redspark |thp<br>avisynth |ea_cdata |image_bmp_pipe |live_flv |nc |rl2 |threedostr<br>avr |eac3 |image_dds_pipe |lmlm4 |nistsphere |rm |tiertexseq<br>avs |epaf |image_dpx_pipe |loas |nsp |roq |tmv<br>avs2 |ffmetadata |image_exr_pipe |lrc |nsv |rpl |truehd<br>bethsoftvid |filmstrip |image_gif_pipe |luodat |nut |rsd |tta<br>bfi |fits |image_j2k_pipe |lvf |nuv |rso |tty</p><h3 id="muxers"><a class="markdownIt-Anchor" href="#muxers"></a> <strong>muxers</strong></h3><p><img src="https://weichao-io-1257283924.cos.ap-beijing.myqcloud.com/qldownload/NDK%20r21d%20%2B%20FFmpeg%204.2%20%E7%BC%96%E5%86%99%E8%84%9A%E6%9C%AC%E6%96%87%E4%BB%B6%20%26%20%E7%BC%96%E8%AF%91%E7%94%9F%E6%88%90%20Android%20%E6%89%80%E9%9C%80%E7%9A%84%E5%BA%93/18.png" alt=""></p><p>muxers||||||||<br>–|–<br>a64 |cavsvideo |framecrc |ipod |mpeg1system |pcm_f32le |rm |swf<br>ac3 |chromaprint |framehash |ircam |mpeg1vcd |pcm_f64be |roq |tee<br>adts |codec2 |framemd5 |ismv |mpeg1video |pcm_f64le |rso |tg2<br>adx |codec2raw |g722 |ivf |mpeg2dvd |pcm_mulaw |rtp |tgp<br>aiff |crc |g723_1 |jacosub |mpeg2svcd |pcm_s16be |rtp_mpegts |truehd<br>amr |dash |g726 |kvag |mpeg2video |pcm_s16le |rtsp |tta<br>apm |data |g726le |latm |mpeg2vob |pcm_s24be |sap |uncodedframecrc<br>apng |daud |gif |lrc |mpegts |pcm_s24le |sbc |vc1<br>aptx |dirac |gsm |m4v |mpjpeg |pcm_s32be |scc |vc1t<br>aptx_hd |dnxhd |gxf |matroska |mxf |pcm_s32le |segafilm |voc<br>argo_asf |dts |h261 |matroska_audio |mxf_d10 |pcm_s8 |segment |w64<br>asf |dv |h263 |md5 |mxf_opatom |pcm_u16be |singlejpeg |wav<br>asf_stream |eac3 |h264 |microdvd |null |pcm_u16le |smjpeg |webm<br>ass |f4v |hash |mjpeg |nut |pcm_u24be |smoothstreaming |webm_chunk<br>ast |ffmetadata |hds |mkvtimestamp_v2 |oga |pcm_u24le |sox |webm_dash_manifest<br>au |fifo |hevc |mlp |ogg |pcm_u32be |spdif |webp<br>avi |fifo_test |hls |mmf |ogv |pcm_u32le |spx |webvtt<br>avm2 |filmstrip |ico |mov |oma |pcm_u8 |srt |wtv<br>avs2 |fits |ilbc |mp2 |opus |pcm_vidc |stream_segment |wv<br>bit |flac |image2 |mp3 |pcm_alaw |psp |streamhash |yuv4mpegpipe<br>caf |flv |image2pipe |mp4 |pcm_f32be |rawvideo |sup</p><h3 id="parsers"><a class="markdownIt-Anchor" href="#parsers"></a> <strong>parsers</strong></h3><p><img src="https://weichao-io-1257283924.cos.ap-beijing.myqcloud.com/qldownload/NDK%20r21d%20%2B%20FFmpeg%204.2%20%E7%BC%96%E5%86%99%E8%84%9A%E6%9C%AC%E6%96%87%E4%BB%B6%20%26%20%E7%BC%96%E8%AF%91%E7%94%9F%E6%88%90%20Android%20%E6%89%80%E9%9C%80%E7%9A%84%E5%BA%93/19.png" alt=""></p><p>parsers||||||||<br>–|–<br>aac |bmp |dpx |g723_1 |h264 |mpegaudio |rv40 |vp3<br>aac_latm |cavsvideo |dvaudio |g729 |hevc |mpegvideo |sbc |vp8<br>ac3 |cook |dvbsub |gif |jpeg2000 |opus |sipr |vp9<br>adx |dca |dvd_nav |gsm |mjpeg |png |tak |webp<br>av1 |dirac |dvdsub |h261 |mlp |pnm |vc1 |xma<br>avs2 |dnxhd |flac |h263 |mpeg4video |rv30 |vorbis</p><h3 id="protocols"><a class="markdownIt-Anchor" href="#protocols"></a> <strong>protocols</strong></h3><p><img src="https://weichao-io-1257283924.cos.ap-beijing.myqcloud.com/qldownload/NDK%20r21d%20%2B%20FFmpeg%204.2%20%E7%BC%96%E5%86%99%E8%84%9A%E6%9C%AC%E6%96%87%E4%BB%B6%20%26%20%E7%BC%96%E8%AF%91%E7%94%9F%E6%88%90%20Android%20%E6%89%80%E9%9C%80%E7%9A%84%E5%BA%93/20.png" alt=""></p><p>protocols||||||||<br>–|–<br>async |ffrtmpcrypt |http |librtmpe |libssh |prompeg |rtmpts |tee<br>bluray |ffrtmphttp |httpproxy |librtmps |libzmq |rtmp |rtp |tls<br>cache |file |https |librtmpt |md5 |rtmpe |sctp |udp<br>concat |ftp |icecast |librtmpte |mmsh |rtmps |srtp |udplite<br>crypto |gopher |libamqp |libsmbclient |mmst |rtmpt |subfile |unix<br>data |hls |librtmp |libsrt |pipe |rtmpte |tcp</p><h3 id="bitstream-filters"><a class="markdownIt-Anchor" href="#bitstream-filters"></a> <strong>bitstream filters</strong></h3><p><img src="https://weichao-io-1257283924.cos.ap-beijing.myqcloud.com/qldownload/NDK%20r21d%20%2B%20FFmpeg%204.2%20%E7%BC%96%E5%86%99%E8%84%9A%E6%9C%AC%E6%96%87%E4%BB%B6%20%26%20%E7%BC%96%E8%AF%91%E7%94%9F%E6%88%90%20Android%20%E6%89%80%E9%9C%80%E7%9A%84%E5%BA%93/21.png" alt=""></p><p>bitstream filters||||||||<br>–|–<br>aac_adtstoasc |dca_core |h264_metadata |hevc_mp4toannexb |mp3_header_decompress |opus_metadata |trace_headers |vp9_superframe_split<br>av1_frame_merge |dump_extradata |h264_mp4toannexb |imx_dump_header |mpeg2_metadata |pcm_rechunk |truehd_core<br>av1_frame_split |eac3_core |h264_redundant_pps |mjpeg2jpeg |mpeg4_unpack_bframes |prores_metadata |vp9_metadata<br>av1_metadata |extract_extradata |hapqa_extract |mjpega_dump_header |noise |remove_extradata |vp9_raw_reorder<br>chomp |filter_units |hevc_metadata |mov2textsub |null |text2movsub |vp9_superframe</p><h3 id="input-devices"><a class="markdownIt-Anchor" href="#input-devices"></a> <strong>input devices</strong></h3><p><img src="https://weichao-io-1257283924.cos.ap-beijing.myqcloud.com/qldownload/NDK%20r21d%20%2B%20FFmpeg%204.2%20%E7%BC%96%E5%86%99%E8%84%9A%E6%9C%AC%E6%96%87%E4%BB%B6%20%26%20%E7%BC%96%E8%AF%91%E7%94%9F%E6%88%90%20Android%20%E6%89%80%E9%9C%80%E7%9A%84%E5%BA%93/22.png" alt=""></p><p>input devices|||||||<br>–|–<br>alsa |bktr |fbdev |jack |libcdio |oss |v4l2<br>android_camera |decklink |gdigrab |kmsgrab |libdc1394 |pulse |vfwcap<br>avfoundation |dshow |iec61883 |lavfi |openal |sndio |xcbgrab</p><h3 id="output-devices"><a class="markdownIt-Anchor" href="#output-devices"></a> <strong>output devices</strong></h3><p><img src="https://weichao-io-1257283924.cos.ap-beijing.myqcloud.com/qldownload/NDK%20r21d%20%2B%20FFmpeg%204.2%20%E7%BC%96%E5%86%99%E8%84%9A%E6%9C%AC%E6%96%87%E4%BB%B6%20%26%20%E7%BC%96%E8%AF%91%E7%94%9F%E6%88%90%20Android%20%E6%89%80%E9%9C%80%E7%9A%84%E5%BA%93/23.png" alt=""></p><p>output devices||||||<br>–|–<br>alsa |caca |fbdev |oss |sdl2 |v4l2<br>audiotoolbox |decklink |opengl |pulse |sndio |xv</p><h3 id="filters"><a class="markdownIt-Anchor" href="#filters"></a> <strong>filters</strong></h3><p><img src="https://weichao-io-1257283924.cos.ap-beijing.myqcloud.com/qldownload/NDK%20r21d%20%2B%20FFmpeg%204.2%20%E7%BC%96%E5%86%99%E8%84%9A%E6%9C%AC%E6%96%87%E4%BB%B6%20%26%20%E7%BC%96%E8%AF%91%E7%94%9F%E6%88%90%20Android%20%E6%89%80%E9%9C%80%E7%9A%84%E5%BA%93/24.png" alt=""></p><p>filters||||||||<br>–|–<br>abench |aresample |colorhold |elbg |idet |oscilloscope |select |testsrc2<br>abitscope |areverse |colorkey |entropy |il |overlay |selectivecolor |thistogram<br>acompressor |arnndn |colorkey_opencl |eq |inflate |overlay_cuda |sendcmd |threshold<br>acontrast |aselect |colorlevels |equalizer |interlace |overlay_opencl |separatefields |thumbnail<br>acopy |asendcmd |colormatrix |erosion |interleave |overlay_qsv |setdar |thumbnail_cuda<br>acrossfade |asetnsamples |colorspace |erosion_opencl |join |overlay_vulkan |setfield |tile<br>acrossover |asetpts |compand |extractplanes |kerndeint |owdenoise |setparams |tinterlace<br>acrusher |asetrate |compensationdelay |extrastereo |ladspa |pad |setpts |tlut2<br>acue |asettb |concat |fade |lagfun |pad_opencl |setrange |tmedian<br>addroi |ashowinfo |convolution |fftdnoiz |lenscorrection |pal100bars |setsar |tmix<br>adeclick |asidedata |convolution_opencl |fftfilt |lensfun |pal75bars |settb |tonemap<br>adeclip |asoftclip |convolve |field |libvmaf |palettegen |sharpness_vaapi |tonemap_opencl<br>adelay |asplit |copy |fieldhint |life |paletteuse |showcqt |tonemap_vaapi<br>aderivative |asr |coreimage |fieldmatch |limiter |pan |showfreqs |tpad<br>adrawgraph |ass |coreimagesrc |fieldorder |loop |perms |showinfo |transpose<br>aecho |astats |cover_rect |fifo |loudnorm |perspective |showpalette |transpose_npp<br>aemphasis |astreamselect |crop |fillborders |lowpass |phase |showspatial |transpose_opencl<br>aeval |asubboost |cropdetect |find_rect |lowshelf |photosensitivity |showspectrum |transpose_vaapi<br>aevalsrc |atadenoise |crossfeed |firequalizer |lumakey |pixdesctest |showspectrumpic |treble<br>afade |atempo |crystalizer |flanger |lut |pixscope |showvolume |tremolo<br>afftdn |atrim |cue |flite |lut1d |pp |showwaves |trim<br>afftfilt |avectorscope |curves |floodfill |lut2 |pp7 |showwavespic |unpremultiply<br>afifo |avgblur |datascope |format |lut3d |premultiply |shuffleframes |unsharp<br>afir |avgblur_opencl |dblur |fps |lutrgb |prewitt |shuffleplanes |unsharp_opencl<br>afirsrc |avgblur_vulkan |dcshift |framepack |lutyuv |prewitt_opencl |sidechaincompress |untile<br>aformat |axcorrelate |dctdnoiz |framerate |lv2 |procamp_vaapi |sidechaingate |uspp<br>agate |azmq |deband |framestep |mandelbrot |program_opencl |sidedata |v360<br>agraphmonitor |bandpass |deblock |freezedetect |maskedclamp |pseudocolor |sierpinski |vaguedenoiser<br>ahistogram |bandreject |decimate |freezeframes |maskedmax |psnr |signalstats |vectorscope<br>aiir |bass |deconvolve |frei0r |maskedmerge |pullup |signature |vflip<br>aintegral |bbox |dedot |frei0r_src |maskedmin |qp |silencedetect |vfrdet<br>ainterleave |bench |deesser |fspp |maskedthreshold |random |silenceremove |vibrance<br>alimiter |bilateral |deflate |gblur |maskfun |readeia608 |sinc |vibrato<br>allpass |biquad |deflicker |geq |mcdeint |readvitc |sine |vidstabdetect<br>allrgb |bitplanenoise |deinterlace_qsv |gradfun |mcompand |realtime |smartblur |vidstabtransform<br>allyuv |blackdetect |deinterlace_vaapi |gradients |median |remap |smptebars |vignette<br>aloop |blackframe |dejudder |graphmonitor |mergeplanes |removegrain |smptehdbars |vmafmotion<br>alphaextract |blend |delogo |greyedge |mestimate |removelogo |sobel |volume<br>alphamerge |bm3d |denoise_vaapi |haas |metadata |repeatfields |sobel_opencl |volumedetect<br>amerge |boxblur |derain |haldclut |midequalizer |replaygain |sofalizer |vpp_qsv<br>ametadata |boxblur_opencl |deshake |haldclutsrc |minterpolate |resample |spectrumsynth |vstack<br>amix |bs2b |deshake_opencl |hdcd |mix |reverse |split |w3fdif<br>amovie |bwdif |despill |headphone |movie |rgbashift |spp |waveform<br>amplify |cas |detelecine |hflip |mpdecimate |rgbtestsrc |sr |weave<br>amultiply |cellauto |dilation |highpass |mptestsrc |roberts |ssim |xbr<br>anequalizer |channelmap |dilation_opencl |highshelf |negate |roberts_opencl |stereo3d |xfade<br>anlmdn |channelsplit |displace |hilbert |nlmeans |rotate |stereotools |xfade_opencl<br>anlms |chorus |dnn_processing |histeq |nlmeans_opencl |rubberband |stereowiden |xmedian<br>anoisesrc |chromaber_vulkan |doubleweave |histogram |nnedi |sab |streamselect |xstack<br>anull |chromahold |drawbox |hqdn3d |noformat |scale |subtitles |yadif<br>anullsink |chromakey |drawgraph |hqx |noise |scale2ref |super2xsai |yadif_cuda<br>anullsrc |chromanr |drawgrid |hstack |normalize |scale_cuda |superequalizer |yaepblur<br>apad |chromashift |drawtext |hue |null |scale_npp |surround |yuvtestsrc<br>aperms |ciescope |drmeter |hwdownload |nullsink |scale_qsv |swaprect |zmq<br>aphasemeter |codecview |dynaudnorm |hwmap |nullsrc |scale_vaapi |swapuv |zoompan<br>aphaser |color |earwax |hwupload |ocr |scale_vulkan |tblend |zscale<br>apulsator |colorbalance |ebur128 |hwupload_cuda |ocv |scdet |telecine<br>arealtime |colorchannelmixer |edgedetect |hysteresis |openclsrc |scroll |testsrc</p><h2 id="部分命令说明"><a class="markdownIt-Anchor" href="#部分命令说明"></a> <strong>部分命令说明</strong></h2><table><thead><tr><th>Standard options</th><th>描述</th></tr></thead><tbody><tr><td>–logfile=FILE</td><td>记录测试并输出到文件 FILE</td></tr><tr><td>–disable-logging</td><td></td></tr><tr><td>–fatal-warnings</td><td></td></tr><tr><td>–prefix=PREFIX</td><td>安装程序到指定目录</td></tr><tr><td>–bindir=DIR</td><td></td></tr><tr><td>–datadir=DIR</td><td></td></tr><tr><td>–docdir=DIR</td><td></td></tr><tr><td>–libdir=DIR</td><td></td></tr><tr><td>–shlibdir=DIR</td><td></td></tr><tr><td>–incdir=DIR</td><td></td></tr><tr><td>–mandir=DIR</td><td></td></tr><tr><td>–pkgconfigdir=DIR</td><td></td></tr><tr><td>–enable-rpath</td><td></td></tr><tr><td>–install-name-dir=DIR</td><td></td></tr></tbody></table><table><thead><tr><th>Licensing options</th><th>描述</th></tr></thead><tbody><tr><td>–enable-gpl</td><td>只要这种修改文本在整体上或者其某个部分来源于遵循 GPL 的程序，该修改文本的整体就必须按照 GPL 流通，不仅该修改文本的源码必须向社会公开，而且对于这种修改文本的流通不准许附加修改者自己作出的限制。</td></tr><tr><td>–enable-version3</td><td></td></tr><tr><td>–enable-nonfree</td><td></td></tr></tbody></table><table><thead><tr><th>Configuration options</th><th>描述</th></tr></thead><tbody><tr><td>–disable-static</td><td>不生成静态库（no）</td></tr><tr><td>–enable-shared</td><td>生成动态库（no）</td></tr><tr><td>–enable-small</td><td>针对 size 优化，而针对不是速度优化</td></tr><tr><td>–disable-runtime-cpudetect</td><td>禁止在运行时检测 CPU 适配性</td></tr><tr><td>–enable-gray</td><td>启用完全的 grayscale 支持</td></tr><tr><td>–disable-swscale-alpha</td><td>禁止 swscale 的 alpha 通道</td></tr><tr><td>–disable-all</td><td>禁止生成文件</td></tr><tr><td>–disable-autodetect</td><td>禁止自动检测外部的库（no）</td></tr></tbody></table><table><thead><tr><th>Program options</th><th>描述</th></tr></thead><tbody><tr><td>–disable-programs</td><td>不生成命令行程序</td></tr><tr><td>–disable-ffmpeg</td><td>不生成 ffmpeg</td></tr><tr><td>–disable-ffplay</td><td>不生成 ffplay</td></tr><tr><td>–disable-ffprobe</td><td>不生成 ffprobe</td></tr></tbody></table><table><thead><tr><th>Documentation options</th><th>描述</th></tr></thead><tbody><tr><td>–disable-doc</td><td>不生成文档</td></tr><tr><td>–disable-htmlpages</td><td>不生成 HTML 文档</td></tr><tr><td>–disable-manpages</td><td>不生成 man 文档</td></tr><tr><td>–disable-podpages</td><td>不生成 POD 文档</td></tr><tr><td>–disable-txtpages</td><td>不生成 text 文档</td></tr></tbody></table><table><thead><tr><th>Component options</th><th>描述</th></tr></thead><tbody><tr><td>–disable-avdevice</td><td>不生成 libavdevice</td></tr><tr><td>–disable-avcodec</td><td>不生成 libavcodec</td></tr><tr><td>–disable-avformat</td><td>不生成 libavformat</td></tr><tr><td>–disable-swresample</td><td>不生成 libswresample</td></tr><tr><td>–disable-swscale</td><td>不生成 libswscale</td></tr><tr><td>–disable-postproc</td><td>不生成 libpostproc</td></tr><tr><td>–disable-avfilter</td><td>不生成 libavfilter</td></tr><tr><td>–enable-avresample</td><td>生成 libavresample（已废弃）（no）</td></tr><tr><td>–disable-pthreads</td><td>禁止 pthreads</td></tr><tr><td>–disable-w32threads</td><td>禁止 win32 threads</td></tr><tr><td>–disable-os2threads</td><td>禁止 OS/2 threads</td></tr><tr><td>–disable-network</td><td>禁止网络支持</td></tr><tr><td>–disable-dct</td><td>禁止 DCT</td></tr><tr><td>–disable-dwt</td><td>禁止 DWT</td></tr><tr><td>–disable-error-resilience</td><td>禁止错误恢复</td></tr><tr><td>–disable-lsp</td><td>禁止 LSP</td></tr><tr><td>–disable-lzo</td><td>禁止 LZO 解码</td></tr><tr><td>–disable-mdct</td><td>禁止 MDCT</td></tr><tr><td>–disable-rdft</td><td>禁止 RDFT</td></tr><tr><td>–disable-fft</td><td>禁止 FFT</td></tr><tr><td>–disable-faan</td><td>禁止浮点 AAN（I）DCT</td></tr><tr><td>–disable-pixelutils</td><td>禁止 libavutil 中的 pixel util</td></tr></tbody></table><table><thead><tr><th>Individual component options</th><th>描述</th></tr></thead><tbody><tr><td>–disable-everything</td><td>禁止以下所有组件</td></tr><tr><td>–disable-encoder=NAME</td><td>禁止编码器 NAME</td></tr><tr><td>–enable-encoder=NAME</td><td>允许解码器 NAME</td></tr><tr><td>–disable-encoders</td><td>禁止所有编码器</td></tr><tr><td>–disable-decoder=NAME</td><td>禁止解码器 NAME</td></tr><tr><td>–enable-decoder=NAME</td><td>允许解码器 NAME</td></tr><tr><td>–disable-decoders</td><td>禁止所有解码器</td></tr><tr><td>–disable-hwaccel=NAME</td><td>禁止硬件加速 hwaccel</td></tr><tr><td>–enable-hwaccel=NAME</td><td>允许硬件加速 hwaccel</td></tr><tr><td>–disable-hwaccels</td><td>禁止所有硬件加速</td></tr><tr><td>–disable-muxer=NAME</td><td>禁止封装 NAME</td></tr><tr><td>–enable-muxer=NAME</td><td>允许封装 NAME</td></tr><tr><td>–disable-muxers</td><td>禁止所有封装</td></tr><tr><td>–disable-demuxer=NAME</td><td>禁止解封装 NAME</td></tr><tr><td>–enable-demuxer=NAME</td><td>允许解封装 NAME</td></tr><tr><td>–disable-demuxers</td><td>禁止所有解封装</td></tr><tr><td>–enable-parser=NAME</td><td>允许解析 NAME</td></tr><tr><td>–disable-parser=NAME</td><td>禁止解析 NAME</td></tr><tr><td>–disable-parsers</td><td>禁止所有解析 NAME</td></tr><tr><td>–enable-bsf=NAME</td><td>允许比特流过滤器 NAME</td></tr><tr><td>–disable-bsf=NAME</td><td>禁止比特流过滤器 NAME</td></tr><tr><td>–disable-bsfs</td><td>禁止所有比特流过滤器 NAME</td></tr><tr><td>–enable-protocol=NAME</td><td></td></tr><tr><td>–disable-protocol=NAME</td><td></td></tr><tr><td>–disable-protocols</td><td></td></tr><tr><td>–enable-indev=NAME</td><td></td></tr><tr><td>–disable-indev=NAME</td><td></td></tr><tr><td>–disable-indevs</td><td></td></tr><tr><td>–enable-outdev=NAME</td><td></td></tr><tr><td>–disable-outdev=NAME</td><td></td></tr><tr><td>–disable-outdevs</td><td></td></tr><tr><td>–disable-devices</td><td></td></tr><tr><td>–enable-filter=NAME</td><td>允许过滤器 NAME</td></tr><tr><td>–disable-filter=NAME</td><td>禁止过滤器 NAME</td></tr><tr><td>–disable-filters</td><td>禁止所有过滤器 NAME</td></tr></tbody></table><table><thead><tr><th>External library support</th><th>描述</th></tr></thead><tbody><tr><td>–disable-alsa</td><td></td></tr><tr><td>–disable-appkit</td><td>禁用 Apple AppKit 框架</td></tr><tr><td>–disable-avfoundation</td><td>禁用 Apple AVFoundation 框架</td></tr><tr><td>–enable-avisynth</td><td></td></tr><tr><td>–disable-bzlib</td><td></td></tr><tr><td>–disable-coreimage</td><td>禁用 Apple CoreImage 框架</td></tr><tr><td>–enable-chromaprint</td><td></td></tr><tr><td>–enable-frei0r</td><td></td></tr><tr><td>–enable-gcrypt</td><td></td></tr><tr><td>–enable-gmp</td><td></td></tr><tr><td>–enable-gnutls</td><td></td></tr><tr><td>–disable-iconv</td><td></td></tr><tr><td>–enable-jni</td><td>允许 JNI 支持（no）</td></tr><tr><td>–enable-ladspa</td><td></td></tr><tr><td>–enable-libaom</td><td></td></tr><tr><td>–enable-libaribb24</td><td></td></tr><tr><td>–enable-libass</td><td></td></tr><tr><td>–enable-libbluray</td><td></td></tr><tr><td>–enable-libbs2b</td><td></td></tr><tr><td>–enable-libcaca</td><td></td></tr><tr><td>–enable-libcelt</td><td></td></tr><tr><td>–enable-libcdio</td><td></td></tr><tr><td>–enable-libcodec2</td><td></td></tr><tr><td>–enable-libdav1d</td><td></td></tr><tr><td>–enable-libdavs2</td><td></td></tr><tr><td>–enable-libdc1394</td><td></td></tr><tr><td>–enable-libfdk-aac</td><td></td></tr><tr><td>–enable-libflite</td><td></td></tr><tr><td>–enable-libfontconfig</td><td></td></tr><tr><td>–enable-libfreetype</td><td></td></tr><tr><td>–enable-libfribidi</td><td></td></tr><tr><td>–enable-libglslang</td><td></td></tr><tr><td>–enable-libgme</td><td></td></tr><tr><td>–enable-libgsm</td><td></td></tr><tr><td>–enable-libiec61883</td><td></td></tr><tr><td>–enable-libilbc</td><td></td></tr><tr><td>–enable-libjack</td><td></td></tr><tr><td>–enable-libklvanc</td><td></td></tr><tr><td>–enable-libkvazaar</td><td></td></tr><tr><td>–enable-liblensfun</td><td></td></tr><tr><td>–enable-libmodplug</td><td></td></tr><tr><td>–enable-libmp3lame</td><td></td></tr><tr><td>–enable-libopencore-amrnb</td><td></td></tr><tr><td>–enable-libopencore-amrwb</td><td></td></tr><tr><td>–enable-libopencv</td><td></td></tr><tr><td>–enable-libopenh264</td><td></td></tr><tr><td>–enable-libopenjpeg</td><td></td></tr><tr><td>–enable-libopenmpt</td><td></td></tr><tr><td>–enable-libopenvino</td><td></td></tr><tr><td>–enable-libopus</td><td></td></tr><tr><td>–enable-libpulse</td><td></td></tr><tr><td>–enable-librabbitmq</td><td></td></tr><tr><td>–enable-librav1e</td><td></td></tr><tr><td>–enable-librsvg</td><td></td></tr><tr><td>–enable-librubberband</td><td></td></tr><tr><td>–enable-librtmp</td><td></td></tr><tr><td>–enable-libshine</td><td></td></tr><tr><td>–enable-libsmbclient</td><td></td></tr><tr><td>–enable-libsnappy</td><td></td></tr><tr><td>–enable-libsoxr</td><td></td></tr><tr><td>–enable-libspeex</td><td></td></tr><tr><td>–enable-libsrt</td><td></td></tr><tr><td>–enable-libssh</td><td></td></tr><tr><td>–enable-libsvtav1</td><td></td></tr><tr><td>–enable-libtensorflow</td><td></td></tr><tr><td>–enable-libtesseract</td><td></td></tr><tr><td>–enable-libtheora</td><td></td></tr><tr><td>–enable-libtls</td><td></td></tr><tr><td>–enable-libtwolame</td><td></td></tr><tr><td>–enable-libv4l2</td><td></td></tr><tr><td>–enable-libvidstab</td><td></td></tr><tr><td>–enable-libvmaf</td><td></td></tr><tr><td>–enable-libvo-amrwbenc</td><td></td></tr><tr><td>–enable-libvorbis</td><td></td></tr><tr><td>–enable-libvpx</td><td></td></tr><tr><td>–enable-libwavpack</td><td></td></tr><tr><td>–enable-libwebp</td><td></td></tr><tr><td>–enable-libx264</td><td></td></tr><tr><td>–enable-libx265</td><td></td></tr><tr><td>–enable-libxavs</td><td></td></tr><tr><td>–enable-libxavs2</td><td></td></tr><tr><td>–enable-libxcb</td><td></td></tr><tr><td>–enable-libxcb-shm</td><td></td></tr><tr><td>–enable-libxcb-xfixes</td><td></td></tr><tr><td>–enable-libxcb-shape</td><td></td></tr><tr><td>–enable-libxvid</td><td></td></tr><tr><td>–enable-libxml2</td><td></td></tr><tr><td>–enable-libzimg</td><td></td></tr><tr><td>–enable-libzmq</td><td></td></tr><tr><td>–enable-libzvbi</td><td></td></tr><tr><td>–enable-lv2</td><td></td></tr><tr><td>–disable-lzma</td><td></td></tr><tr><td>–enable-decklink</td><td></td></tr><tr><td>–enable-mbedtls</td><td></td></tr><tr><td>–enable-mediacodec</td><td>支持 Android MediaCodec</td></tr><tr><td>–enable-mediafoundation</td><td></td></tr><tr><td>–enable-libmysofa</td><td></td></tr><tr><td>–enable-openal</td><td></td></tr><tr><td>–enable-opencl</td><td></td></tr><tr><td>–enable-opengl</td><td></td></tr><tr><td>–enable-openssl</td><td></td></tr><tr><td>–enable-pocketsphinx</td><td></td></tr><tr><td>–disable-sndio</td><td></td></tr><tr><td>–disable-schannel</td><td></td></tr><tr><td>–disable-sdl2</td><td></td></tr><tr><td>–disable-securetransport</td><td></td></tr><tr><td>–enable-vapoursynth</td><td></td></tr><tr><td>–enable-vulkan</td><td></td></tr><tr><td>–disable-xlib</td><td></td></tr><tr><td>–disable-zlib</td><td></td></tr></tbody></table><table><thead><tr><th>External library support</th><th>描述</th></tr></thead><tbody><tr><td>–disable-amf</td><td></td></tr><tr><td>–disable-audiotoolbox</td><td>禁用 Apple AudioToolbox 代码</td></tr><tr><td>–enable-cuda-nvcc</td><td></td></tr><tr><td>–disable-cuda-llvm</td><td></td></tr><tr><td>–disable-cuvid</td><td></td></tr><tr><td>–disable-d3d11va</td><td></td></tr><tr><td>–disable-dxva2</td><td></td></tr><tr><td>–disable-ffnvcodec</td><td></td></tr><tr><td>–enable-libdrm</td><td></td></tr><tr><td>–enable-libmfx</td><td></td></tr><tr><td>–enable-libnpp</td><td></td></tr><tr><td>–enable-mmal</td><td></td></tr><tr><td>–disable-nvdec</td><td></td></tr><tr><td>–disable-nvenc</td><td></td></tr><tr><td>–enable-omx</td><td></td></tr><tr><td>–enable-omx-rpi</td><td></td></tr><tr><td>–enable-rkmpp</td><td></td></tr><tr><td>–disable-v4l2-m2m</td><td></td></tr><tr><td>–disable-vaapi</td><td></td></tr><tr><td>–disable-vdpau</td><td></td></tr><tr><td>–disable-videotoolbox</td><td></td></tr></tbody></table><table><thead><tr><th>Toolchain options</th><th>描述</th></tr></thead><tbody><tr><td>–arch=ARCH</td><td>架构</td></tr><tr><td>–cpu=CPU</td><td>最小 CPU</td></tr><tr><td>–cross-prefix=PREFIX</td><td>编译工具前缀 PREFIX</td></tr><tr><td>–progs-suffix=SUFFIX</td><td>程序名后缀 SUFFIX</td></tr><tr><td>–enable-cross-compile</td><td>使用交叉编译器</td></tr><tr><td>–sysroot=PATH</td><td>sysroot PATH</td></tr><tr><td>–sysinclude=PATH</td><td></td></tr><tr><td>–target-os=OS</td><td>target-os OS</td></tr><tr><td>–target-exec=CMD</td><td></td></tr><tr><td>–target-path=DIR</td><td></td></tr><tr><td>–target-samples=DIR</td><td></td></tr><tr><td>–tempprefix=PATH</td><td></td></tr><tr><td>–toolchain=NAME</td><td>toolchain NAME</td></tr><tr><td>–nm=NM</td><td>nm NM</td></tr><tr><td>–ar=AR</td><td>ar AR</td></tr><tr><td>–as=AS</td><td>as AS</td></tr><tr><td>–ln_s=LN_S</td><td></td></tr><tr><td>–strip=STRIP</td><td>strip STRIP</td></tr><tr><td>–windres=WINDRES</td><td></td></tr><tr><td>–x86asmexe=EXE</td><td></td></tr><tr><td>–cc=CC</td><td>C 编译器 CC</td></tr><tr><td>–cxx=CXX</td><td>C++ 编译器 CXX</td></tr><tr><td>–objcc=OCC</td><td></td></tr><tr><td>–dep-cc=DEPCC</td><td></td></tr><tr><td>–nvcc=NVCC</td><td></td></tr><tr><td>–ld=LD</td><td>ld LD</td></tr><tr><td>–pkg-config=PKGCONFIG</td><td></td></tr><tr><td>–pkg-config-flags=FLAGS</td><td></td></tr><tr><td>–ranlib=RANLIB</td><td>ranlib RANLIB</td></tr><tr><td>–doxygen=DOXYGEN</td><td></td></tr><tr><td>–host-cc=HOSTCC</td><td></td></tr><tr><td>–host-cflags=HCFLAGS</td><td></td></tr><tr><td>–host-cppflags=HCPPFLAGS</td><td></td></tr><tr><td>–host-ld=HOSTLD</td><td></td></tr><tr><td>–host-ldflags=HLDFLAGS</td><td></td></tr><tr><td>–host-extralibs=HLIBS</td><td></td></tr><tr><td>–host-os=OS</td><td></td></tr><tr><td>–extra-cflags=ECFLAGS</td><td>CFLAGS</td></tr><tr><td>–extra-cxxflags=ECFLAGS</td><td></td></tr><tr><td>–extra-objcflags=FLAGS</td><td></td></tr><tr><td>–extra-ldflags=ELDFLAGS</td><td></td></tr><tr><td>–extra-ldexeflags=ELDFLAGS</td><td></td></tr><tr><td>–extra-ldsoflags=ELDFLAGS</td><td></td></tr><tr><td>–extra-libs=ELIBS</td><td></td></tr><tr><td>–extra-version=STRING</td><td></td></tr><tr><td>–optflags=OPTFLAGS</td><td></td></tr><tr><td>–nvccflags=NVCCFLAGS</td><td></td></tr><tr><td>–build-suffix=SUFFIX</td><td></td></tr><tr><td>–enable-pic</td><td>允许 PIC</td></tr><tr><td>–enable-thumb</td><td></td></tr><tr><td>–enable-lto</td><td></td></tr><tr><td>–env=“ENV=override”</td><td></td></tr></tbody></table><table><thead><tr><th>Advanced options (experts only)</th><th>描述</th></tr></thead><tbody><tr><td>–malloc-prefix=PREFIX</td><td></td></tr><tr><td>–custom-allocator=NAME</td><td></td></tr><tr><td>–disable-symver</td><td></td></tr><tr><td>–enable-hardcoded-tables</td><td></td></tr><tr><td>–disable-safe-bitstream-reader</td><td></td></tr><tr><td>–sws-max-filter-size=N</td><td></td></tr></tbody></table><table><thead><tr><th>Optimization options (experts only)</th><th>描述</th></tr></thead><tbody><tr><td>–disable-asm</td><td></td></tr><tr><td>–disable-altivec</td><td></td></tr><tr><td>–disable-vsx</td><td></td></tr><tr><td>–disable-power8</td><td></td></tr><tr><td>–disable-amd3dnow</td><td></td></tr><tr><td>–disable-amd3dnowext</td><td></td></tr><tr><td>–disable-mmx</td><td></td></tr><tr><td>–disable-mmxext</td><td></td></tr><tr><td>–disable-sse</td><td></td></tr><tr><td>–disable-sse2</td><td></td></tr><tr><td>–disable-sse3</td><td></td></tr><tr><td>–disable-ssse3</td><td></td></tr><tr><td>–disable-sse4</td><td></td></tr><tr><td>–disable-sse42</td><td></td></tr><tr><td>–disable-avx</td><td></td></tr><tr><td>–disable-xop</td><td></td></tr><tr><td>–disable-fma3</td><td></td></tr><tr><td>–disable-fma4</td><td></td></tr><tr><td>–disable-avx2</td><td></td></tr><tr><td>–disable-avx512</td><td></td></tr><tr><td>–disable-aesni</td><td></td></tr><tr><td>–disable-armv5te</td><td></td></tr><tr><td>–disable-armv6</td><td></td></tr><tr><td>–disable-armv6t2</td><td></td></tr><tr><td>–disable-vfp</td><td></td></tr><tr><td>–disable-neon</td><td>用 ARM 扩展的 neon 指令集可以很大的优化 FFmpeg 的解码功能</td></tr><tr><td>–disable-inline-asm</td><td></td></tr><tr><td>–disable-x86asm</td><td></td></tr><tr><td>–disable-mipsdsp</td><td></td></tr><tr><td>–disable-mipsdspr2</td><td></td></tr><tr><td>–disable-msa</td><td></td></tr><tr><td>–disable-msa2</td><td></td></tr><tr><td>–disable-mipsfpu</td><td></td></tr><tr><td>–disable-mmi</td><td></td></tr><tr><td>–disable-fast-unaligned</td><td></td></tr></tbody></table><table><thead><tr><th>Developer options (useful when working on FFmpeg itself)</th><th>描述</th></tr></thead><tbody><tr><td>–disable-debug</td><td></td></tr><tr><td>–enable-debug=LEVEL</td><td>设置调试级别 LEVEL</td></tr><tr><td>–disable-optimizations</td><td></td></tr><tr><td>–enable-extra-warnings</td><td>启用更多编译器警告</td></tr><tr><td>–disable-stripping</td><td></td></tr><tr><td>–assert-level=level</td><td></td></tr><tr><td>–enable-memory-poisoning</td><td></td></tr><tr><td>–valgrind=VALGRIND</td><td></td></tr><tr><td>–enable-ftrapv</td><td></td></tr><tr><td>–samples=PATH</td><td></td></tr><tr><td>–enable-neon-clobber-test</td><td></td></tr><tr><td>–enable-xmm-clobber-test</td><td></td></tr><tr><td>–enable-random</td><td></td></tr><tr><td>–disable-random</td><td></td></tr><tr><td>–enable-random=LIST</td><td></td></tr><tr><td>–disable-random=LIST</td><td></td></tr><tr><td>–random-seed=VALUE</td><td></td></tr><tr><td>–disable-valgrind-backtrace</td><td></td></tr><tr><td>–enable-ossfuzz</td><td></td></tr><tr><td>–libfuzzer=PATH</td><td></td></tr><tr><td>–ignore-tests=TESTS</td><td></td></tr><tr><td>–enable-linux-perf</td><td></td></tr><tr><td>–disable-large-tests</td><td></td></tr></tbody></table><h2 id="编写脚本文件-2"><a class="markdownIt-Anchor" href="#编写脚本文件-2"></a> <strong>编写脚本文件</strong></h2><p>1、创建文件（创建成 .txt 文件可以直接打开，但是 .sh 有文字颜色）</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">gedit build.sh<br></code></pre></td></tr></table></figure><p>2、脚本文件：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">#</span><span class="language-bash">!/bin/sh</span><br><br>NDK=/home/weichao/android-ndk-r21d<br>TOOLCHAIN=$NDK/toolchains/llvm/prebuilt/linux-x86_64<br>SYSROOT=$TOOLCHAIN/sysroot<br>API=21<br><br>function my_build<br>&#123;<br>echo &quot;Compiling FFmpeg for $CPU...&quot;<br><br>./configure \<br>\<br>--logfile=$LOGFILE \<br>--prefix=$PREFIX \<br>\<br>--enable-gpl \<br>\<br>--disable-static \<br>--enable-shared \<br>--disable-runtime-cpudetect \<br>\<br>--disable-programs \<br>\<br>--disable-doc \<br>\<br>--disable-avdevice \<br>--disable-postproc \<br>--disable-w32threads \<br>--disable-os2threads \<br>\<br>--enable-decoder=h264_mediacodec \<br>\<br>--enable-jni \<br>--enable-mediacodec \<br>\<br>--arch=$ARCH \<br>--cpu=$CPU  \<br>--cross-prefix=$CROSS_PREFIX \<br>--enable-cross-compile \<br>--sysroot=$SYSROOT \<br>--target-os=android \<br>--cc=$CC \<br>--cxx=$CXX \<br>--extra-cflags=&quot;$EXTRA_CFLAGS&quot; \<br>--enable-pic \<br>\<br>--enable-neon \<br><br>make clean<br>make -j8<br>make install<br><br>echo &quot;The Compilation of FFmpeg for $CPU is completed.&quot;<br>&#125;<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">armeabi-v7a</span><br>CPU=armv7-a<br>ARCH=arm<br>ANDROID_ARCH_ABI=armeabi<br>LOGFILE=`pwd`/Android/log_armeabi-v7a.txt<br>PREFIX=`pwd`/Android/armeabi-v7a<br>CC=$TOOLCHAIN/bin/armv7a-linux-androideabi$API-clang<br>CXX=$TOOLCHAIN/bin/armv7a-linux-androideabi$API-clang++<br>EXTRA_CFLAGS=&quot;-g -DANDROID -fdata-sections -ffunction-sections -funwind-tables -fstack-protector-strong -no-canonical-prefixes -D_FORTIFY_SOURCE=2 -march=armv7-a -mthumb -Wformat -Werror=format-security   -Oz -DNDEBUG  -fPIC --gcc-toolchain=$TOOLCHAIN&quot;<br>CROSS_PREFIX=$TOOLCHAIN/bin/arm-linux-androideabi-<br>my_build<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">arm64-v8a</span><br>CPU=armv8-a<br>ARCH=arm64<br>ANDROID_ARCH_ABI=aarch64<br>LOGFILE=`pwd`/Android/log_arm64-v8a.txt<br>PREFIX=`pwd`/Android/arm64-v8a<br>CC=$TOOLCHAIN/bin/aarch64-linux-android$API-clang<br>CXX=$TOOLCHAIN/bin/aarch64-linux-android$API-clang++<br>EXTRA_CFLAGS=&quot;-g -DANDROID -fdata-sections -ffunction-sections -funwind-tables -fstack-protector-strong -no-canonical-prefixes -D_FORTIFY_SOURCE=2 -Wformat -Werror=format-security   -O2 -DNDEBUG  -fPIC --target=aarch64-none-linux-android21 --gcc-toolchain=$TOOLCHAIN&quot;<br>CROSS_PREFIX=$TOOLCHAIN/bin/aarch64-linux-android-<br>my_build<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">x86_64</span><br>CPU=x86_64<br>ARCH=x86_64<br>LOGFILE=`pwd`/Android/log_x86_64.txt<br>PREFIX=`pwd`/Android/x86_64<br>CC=$TOOLCHAIN/bin/x86_64-linux-android$API-clang<br>CXX=$TOOLCHAIN/bin/x86_64-linux-android$API-clang++<br>EXTRA_CFLAGS=&quot;-g -DANDROID -fdata-sections -ffunction-sections -funwind-tables -fstack-protector-strong -no-canonical-prefixes -D_FORTIFY_SOURCE=2 -Wformat -Werror=format-security   -O2 -DNDEBUG  -fPIC --target=x86_64-none-linux-android21 --gcc-toolchain=$TOOLCHAIN&quot;<br>CROSS_PREFIX=$TOOLCHAIN/bin/x86_64-linux-android-<br>my_build<br></code></pre></td></tr></table></figure><p>3、x86 多一个配置参数，单独一个文件：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">#</span><span class="language-bash">!/bin/sh</span><br><br>NDK=/home/weichao/android-ndk-r21d<br>TOOLCHAIN=$NDK/toolchains/llvm/prebuilt/linux-x86_64<br>SYSROOT=$TOOLCHAIN/sysroot<br>API=21<br><br>function my_build<br>&#123;<br>echo &quot;Compiling FFmpeg for $CPU...&quot;<br><br>./configure \<br>\<br>--logfile=$LOGFILE \<br>--prefix=$PREFIX \<br>\<br>--enable-gpl \<br>\<br>--disable-static \<br>--enable-shared \<br>--disable-runtime-cpudetect \<br>\<br>--disable-programs \<br>\<br>--disable-doc \<br>\<br>--disable-avdevice \<br>--disable-postproc \<br>--disable-w32threads \<br>--disable-os2threads \<br>\<br>--enable-decoder=h264_mediacodec \<br>\<br>--enable-jni \<br>--enable-mediacodec \<br>\<br>--arch=$ARCH \<br>--cpu=$CPU  \<br>--cross-prefix=$CROSS_PREFIX \<br>--enable-cross-compile \<br>--sysroot=$SYSROOT \<br>--target-os=android \<br>--cc=$CC \<br>--cxx=$CXX \<br>--extra-cflags=&quot;$EXTRA_CFLAGS&quot; \<br>--enable-pic \<br>\<br>--disable-asm \<br>\<br>--enable-neon \<br><br>make clean<br>make -j8<br>make install<br><br>echo &quot;The Compilation of FFmpeg for $CPU is completed.&quot;<br>&#125;<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">x86</span><br>CPU=i686<br>ARCH=i686<br>LOGFILE=`pwd`/Android/log_x86.txt<br>PREFIX=`pwd`/Android/x86<br>CC=$TOOLCHAIN/bin/i686-linux-android$API-clang<br>CXX=$TOOLCHAIN/bin/i686-linux-android$API-clang++<br>EXTRA_CFLAGS=&quot;-g -DANDROID -fdata-sections -ffunction-sections -funwind-tables -fstack-protector-strong -no-canonical-prefixes -mstackrealign -D_FORTIFY_SOURCE=2 -Wformat -Werror=format-security   -O2 -DNDEBUG  -fPIC --target=i686-none-linux-android21 --gcc-toolchain=$TOOLCHAIN&quot;<br>CROSS_PREFIX=$TOOLCHAIN/bin/i686-linux-android-<br>my_build<br></code></pre></td></tr></table></figure><h3 id="添加-android-项目需要的-cflags-的技巧"><a class="markdownIt-Anchor" href="#添加-android-项目需要的-cflags-的技巧"></a> <strong>添加 Android 项目需要的 CFLAGS 的技巧</strong></h3><p>当 configure 不支持某个参数时，需要主动在 CFLAGS 中添加。</p><p>1、新建 Android 的 C++ 项目</p><p>2、build release 版本，生成 build.ninja、rules.ninja<br><img src="https://weichao-io-1257283924.cos.ap-beijing.myqcloud.com/qldownload/NDK%20r21d%20%2B%20FFmpeg%204.2%20%E7%BC%96%E5%86%99%E8%84%9A%E6%9C%AC%E6%96%87%E4%BB%B6%20%26%20%E7%BC%96%E8%AF%91%E7%94%9F%E6%88%90%20Android%20%E6%89%80%E9%9C%80%E7%9A%84%E5%BA%93/31.png" alt=""></p><p><img src="https://weichao-io-1257283924.cos.ap-beijing.myqcloud.com/qldownload/NDK%20r21d%20%2B%20FFmpeg%204.2%20%E7%BC%96%E5%86%99%E8%84%9A%E6%9C%AC%E6%96%87%E4%BB%B6%20%26%20%E7%BC%96%E8%AF%91%E7%94%9F%E6%88%90%20Android%20%E6%89%80%E9%9C%80%E7%9A%84%E5%BA%93/32.png" alt=""></p><p>3、使用 build.ninja 中的 FLAGS<br><img src="https://weichao-io-1257283924.cos.ap-beijing.myqcloud.com/qldownload/NDK%20r21d%20%2B%20FFmpeg%204.2%20%E7%BC%96%E5%86%99%E8%84%9A%E6%9C%AC%E6%96%87%E4%BB%B6%20%26%20%E7%BC%96%E8%AF%91%E7%94%9F%E6%88%90%20Android%20%E6%89%80%E9%9C%80%E7%9A%84%E5%BA%93/33.png" alt=""></p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs routeros">-g -DANDROID -fdata-sections -ffunction-sections -funwind-tables -fstack-protector-strong -no-canonical-prefixes <span class="hljs-attribute">-D_FORTIFY_SOURCE</span>=2 <span class="hljs-attribute">-march</span>=armv7-a -mthumb -Wformat <span class="hljs-attribute">-Werror</span>=format-security   -Oz -DNDEBUG  -fPIC<br></code></pre></td></tr></table></figure><p>4、使用 rules.ninja 中的参数<br><img src="https://weichao-io-1257283924.cos.ap-beijing.myqcloud.com/qldownload/NDK%20r21d%20%2B%20FFmpeg%204.2%20%E7%BC%96%E5%86%99%E8%84%9A%E6%9C%AC%E6%96%87%E4%BB%B6%20%26%20%E7%BC%96%E8%AF%91%E7%94%9F%E6%88%90%20Android%20%E6%89%80%E9%9C%80%E7%9A%84%E5%BA%93/34.png" alt=""></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">--target=armv7-none-linux-androideabi21 --gcc-toolchain=/home/weichao/android-sdk/ndk/21.3.6528147/toolchains/llvm/prebuilt/linux-x86_64 --sysroot=/home/weichao/android-sdk/ndk/21.3.6528147/toolchains/llvm/prebuilt/linux-x86_64/sysroot<br></code></pre></td></tr></table></figure><p>调整路径，修改参数，去掉重复的参数：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">--target=armv7-none-linux-androideabi21 --gcc-toolchain=/home/weichao/android-ndk-r21d/toolchains/llvm/prebuilt/linux-x86_64<br></code></pre></td></tr></table></figure><hr><h1 id="编译生成-android-所需的库"><a class="markdownIt-Anchor" href="#编译生成-android-所需的库"></a> <strong>编译生成 Android 所需的库</strong></h1><h2 id="给脚本文件设置权限"><a class="markdownIt-Anchor" href="#给脚本文件设置权限"></a> <strong>给脚本文件设置权限</strong></h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">chmod +x build.sh<br></code></pre></td></tr></table></figure><h2 id="执行脚本文件"><a class="markdownIt-Anchor" href="#执行脚本文件"></a> <strong>执行脚本文件</strong></h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">. build.sh<br></code></pre></td></tr></table></figure><h2 id="编译过程"><a class="markdownIt-Anchor" href="#编译过程"></a> <strong>编译过程</strong></h2><p>先打印信息概览：<br><img src="https://weichao-io-1257283924.cos.ap-beijing.myqcloud.com/qldownload/NDK%20r21d%20%2B%20FFmpeg%204.2%20%E7%BC%96%E5%86%99%E8%84%9A%E6%9C%AC%E6%96%87%E4%BB%B6%20%26%20%E7%BC%96%E8%AF%91%E7%94%9F%E6%88%90%20Android%20%E6%89%80%E9%9C%80%E7%9A%84%E5%BA%93/35.png" alt=""><br><img src="https://weichao-io-1257283924.cos.ap-beijing.myqcloud.com/qldownload/NDK%20r21d%20%2B%20FFmpeg%204.2%20%E7%BC%96%E5%86%99%E8%84%9A%E6%9C%AC%E6%96%87%E4%BB%B6%20%26%20%E7%BC%96%E8%AF%91%E7%94%9F%E6%88%90%20Android%20%E6%89%80%E9%9C%80%E7%9A%84%E5%BA%93/36.png" alt=""></p><p>编译完成后生成文件：<br><img src="https://weichao-io-1257283924.cos.ap-beijing.myqcloud.com/qldownload/NDK%20r21d%20%2B%20FFmpeg%204.2%20%E7%BC%96%E5%86%99%E8%84%9A%E6%9C%AC%E6%96%87%E4%BB%B6%20%26%20%E7%BC%96%E8%AF%91%E7%94%9F%E6%88%90%20Android%20%E6%89%80%E9%9C%80%E7%9A%84%E5%BA%93/37.png" alt=""></p><hr><h1 id="编译和使用时可能会遇到的问题"><a class="markdownIt-Anchor" href="#编译和使用时可能会遇到的问题"></a> <strong>编译和使用时可能会遇到的问题</strong></h1><h2 id="not-found"><a class="markdownIt-Anchor" href="#not-found"></a> <strong>not found</strong></h2><p>1、WARNING: /home/weichao/android-ndk-r21d/toolchains/llvm/prebuilt/linux-x86_64/bin/arm-linux-androideabi-pkg-config not found, library detection may fail.<br><img src="https://weichao-io-1257283924.cos.ap-beijing.myqcloud.com/qldownload/NDK%20r21d%20%2B%20FFmpeg%204.2%20%E7%BC%96%E5%86%99%E8%84%9A%E6%9C%AC%E6%96%87%E4%BB%B6%20%26%20%E7%BC%96%E8%AF%91%E7%94%9F%E6%88%90%20Android%20%E6%89%80%E9%9C%80%E7%9A%84%E5%BA%93/38.png" alt=""></p><p>未发现有什么影响。</p><p>2、java.lang.UnsatisfiedLinkError: dlopen failed: library “libclang_rt.ubsan_standalone-aarch64-android.so” not found<br><img src="https://weichao-io-1257283924.cos.ap-beijing.myqcloud.com/qldownload/NDK%20r21d%20%2B%20FFmpeg%204.2%20%E7%BC%96%E5%86%99%E8%84%9A%E6%9C%AC%E6%96%87%E4%BB%B6%20%26%20%E7%BC%96%E8%AF%91%E7%94%9F%E6%88%90%20Android%20%E6%89%80%E9%9C%80%E7%9A%84%E5%BA%93/39.png" alt=""></p><p>查看 log.txt，有相关信息：<br><img src="https://weichao-io-1257283924.cos.ap-beijing.myqcloud.com/qldownload/NDK%20r21d%20%2B%20FFmpeg%204.2%20%E7%BC%96%E5%86%99%E8%84%9A%E6%9C%AC%E6%96%87%E4%BB%B6%20%26%20%E7%BC%96%E8%AF%91%E7%94%9F%E6%88%90%20Android%20%E6%89%80%E9%9C%80%E7%9A%84%E5%BA%93/40.png" alt=""></p><p><a target="_blank" rel="noopener" href="http://liblog.so">liblog.so</a> 是在：/home/weichao/android-ndk-r21d/toolchains/llvm/prebuilt/linux-x86_64/sysroot/usr/lib/aarch64-linux-android/21/liblog.so</p><p>2.1、（失败）按照 clang 的建议，启用 rpath，并设置 ldflags：</p><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cmake">EXTRA_LDFLAGS=<span class="hljs-string">&quot;-Wl,-rpath=/home/weichao/android-ndk-r21d/toolchains/llvm/prebuilt/linux-x86_64/sysroot/usr/lib/aarch64-linux-android/21&quot;</span><br></code></pre></td></tr></table></figure><p>同时尝试修改 CMakeLists.txt：</p><ul><li>修改方式 1</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs cmkae">add_library(lib_log SHARED IMPORTED)<br>set_target_properties(lib_log PROPERTIES IMPORTED_LOCATION /home/weichao/android-ndk-r21d/toolchains/llvm/prebuilt/linux-x86_64/sysroot/usr/lib/aarch64-linux-android/21/liblog.so)<br></code></pre></td></tr></table></figure><ul><li>修改方式 2</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs cmkae">set(CMAKE_BUILD_WITH_INSTALL_RPATH TRUE)<br>set(CMAKE_INSTALL_RPATH &quot;/home/weichao/android-ndk-r21d/toolchains/llvm/prebuilt/linux-x86_64/sysroot/usr/lib/aarch64-linux-android/21&quot;)<br></code></pre></td></tr></table></figure><p>这样是在 log.txt 中没有报错了，但是在 Android 中依然报错，原因可能是在 CMakeLists.txt 中的修改方式不对，没有链接上。</p><p>2.2、找出是哪个配置导致的这个问题：</p><ul><li>–toolchain=clang-usan<br>直接去掉这个配置就可以了。</li></ul><h2 id="unable-to-create-an-executable-file"><a class="markdownIt-Anchor" href="#unable-to-create-an-executable-file"></a> <strong>unable to create an executable file</strong></h2><p>1、/home/weichao/android-ndk-r21d/toolchains/llvm/prebuilt/linux-x86_64/bin/aarch64-linux-android21-clang is unable to create an executable file.<br>C compiler test failed.<br><img src="https://weichao-io-1257283924.cos.ap-beijing.myqcloud.com/qldownload/NDK%20r21d%20%2B%20FFmpeg%204.2%20%E7%BC%96%E5%86%99%E8%84%9A%E6%9C%AC%E6%96%87%E4%BB%B6%20%26%20%E7%BC%96%E8%AF%91%E7%94%9F%E6%88%90%20Android%20%E6%89%80%E9%9C%80%E7%9A%84%E5%BA%93/41.png" alt=""></p><p>没有信息概览，很明显编译失败了。</p><p>查看 log.txt，是 CPU 的值设置错误：<br><img src="https://weichao-io-1257283924.cos.ap-beijing.myqcloud.com/qldownload/NDK%20r21d%20%2B%20FFmpeg%204.2%20%E7%BC%96%E5%86%99%E8%84%9A%E6%9C%AC%E6%96%87%E4%BB%B6%20%26%20%E7%BC%96%E8%AF%91%E7%94%9F%E6%88%90%20Android%20%E6%89%80%E9%9C%80%E7%9A%84%E5%BA%93/42.png" alt=""></p><p>arm64-v8a 的 CPU 的值应该为 armv8-a，修改后：<br><img src="https://weichao-io-1257283924.cos.ap-beijing.myqcloud.com/qldownload/NDK%20r21d%20%2B%20FFmpeg%204.2%20%E7%BC%96%E5%86%99%E8%84%9A%E6%9C%AC%E6%96%87%E4%BB%B6%20%26%20%E7%BC%96%E8%AF%91%E7%94%9F%E6%88%90%20Android%20%E6%89%80%E9%9C%80%E7%9A%84%E5%BA%93/43.png" alt=""></p><h2 id="dlopen-failed"><a class="markdownIt-Anchor" href="#dlopen-failed"></a> <strong>dlopen failed</strong></h2><p>1、java.lang.UnsatisfiedLinkError: dlopen failed: cannot locate symbol “ff_parse_a53_cc” referenced by “/data/app/io.weichao.bwk-D1NGyDX98F4V4LoBM5Qlvg==/lib/arm64/libavcodec.so”…<br><img src="https://weichao-io-1257283924.cos.ap-beijing.myqcloud.com/qldownload/NDK%20r21d%20%2B%20FFmpeg%204.2%20%E7%BC%96%E5%86%99%E8%84%9A%E6%9C%AC%E6%96%87%E4%BB%B6%20%26%20%E7%BC%96%E8%AF%91%E7%94%9F%E6%88%90%20Android%20%E6%89%80%E9%9C%80%E7%9A%84%E5%BA%93/44.png" alt=""></p><ul><li>–disable-everything<br>很明显是裁减导致的库没有加入 <a target="_blank" rel="noopener" href="http://libavcodec.so">libavcodec.so</a>，关闭 disable everything，验证可以解决这个问题。</li></ul><p>应该是播放 MP4 文件时缺少解封装、解码器等，由于功能还在增加中，暂时先关闭 disable everything，以解决这个问题。</p><h2 id="requires-more-registers-than-available"><a class="markdownIt-Anchor" href="#requires-more-registers-than-available"></a> <strong>requires more registers than available</strong></h2><p>1、In file included from libswscale/x86/rgb2rgb.c:102:<br>libswscale/x86/rgb2rgb_template.c:1666:13: error: inline assembly requires more registers than available<br>“mov %4, %%“FF_REG_a”\n\t”<br>^<br><img src="https://weichao-io-1257283924.cos.ap-beijing.myqcloud.com/qldownload/NDK%20r21d%20%2B%20FFmpeg%204.2%20%E7%BC%96%E5%86%99%E8%84%9A%E6%9C%AC%E6%96%87%E4%BB%B6%20%26%20%E7%BC%96%E8%AF%91%E7%94%9F%E6%88%90%20Android%20%E6%89%80%E9%9C%80%E7%9A%84%E5%BA%93/45.png" alt=""></p><p>参考<a target="_blank" rel="noopener" href="https://blog.k-res.net/archives/2521.html" title="https://blog.k-res.net/archives/2521.html">解决Android NDK编译FFmpeg 4.2.2的x86 cpu版时的问题</a></p><p>将 <code>libavutil/x86/asm.h:75</code> 中的</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs C"><span class="hljs-meta">#<span class="hljs-keyword">define</span> HAVE_7REGS (ARCH_X86_64 || (HAVE_EBX_AVAILABLE &amp;amp;&amp;amp; HAVE_EBP_AVAILABLE))</span><br></code></pre></td></tr></table></figure><p>修改为</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs C"><span class="hljs-meta">#<span class="hljs-keyword">define</span> HAVE_7REGS (ARCH_X86_64)</span><br></code></pre></td></tr></table></figure><h2 id="has-text-relocations"><a class="markdownIt-Anchor" href="#has-text-relocations"></a> <strong>has text relocations</strong></h2><p>1、E/linker: “/data/app/io.weichao.module_player-Eq7EWqLlZw91dj1uZMG3YA==/lib/x86/libavcodec.so” has text relocations<br><img src="https://weichao-io-1257283924.cos.ap-beijing.myqcloud.com/qldownload/NDK%20r21d%20%2B%20FFmpeg%204.2%20%E7%BC%96%E5%86%99%E8%84%9A%E6%9C%AC%E6%96%87%E4%BB%B6%20%26%20%E7%BC%96%E8%AF%91%E7%94%9F%E6%88%90%20Android%20%E6%89%80%E9%9C%80%E7%9A%84%E5%BA%93/46.png" alt=""></p><p>参考<a target="_blank" rel="noopener" href="https://blog.csdn.net/marco_0631/article/details/73292199?locationNum=5&amp;fps=1" title="https://blog.csdn.net/marco_0631/article/details/73292199?locationNum=5&amp;fps=1">ffmpeg安卓x86平台编译错误</a></p><p>设置：</p><ul><li>–disable-asm</li></ul><hr></div><hr><div><div class="post-metas my-3"></div><div class="license-box my-3"><div class="license-title"><div>NDK r21d + FFmpeg 4.2 编写脚本文件 &amp; 编译生成 Android 所需的库</div><div>https://weichao.io/49b14b58838c/</div></div><div class="license-meta"><div class="license-meta-item"><div>作者</div><div>魏超</div></div><div class="license-meta-item license-meta-date"><div>发布于</div><div>2020年9月22日</div></div><div class="license-meta-item license-meta-date"><div>更新于</div><div>2022年12月4日</div></div><div class="license-meta-item"><div>许可协议</div><div><a target="_blank" href="https://creativecommons.org/licenses/by-nc-sa/4.0/"><span class="hint--top hint--rounded" aria-label="BY - 署名"><i class="iconfont icon-by"></i> </span></a><a target="_blank" href="https://creativecommons.org/licenses/by-nc-sa/4.0/"><span class="hint--top hint--rounded" aria-label="NC - 非商业性使用"><i class="iconfont icon-nc"></i> </span></a><a target="_blank" href="https://creativecommons.org/licenses/by-nc-sa/4.0/"><span class="hint--top hint--rounded" aria-label="SA - 相同方式共享"><i class="iconfont icon-sa"></i></span></a></div></div></div><div class="license-icon iconfont"></div></div><div class="post-prevnext my-3"><article class="post-prev col-6"><a href="/3c8edfb928da/" title="Android NDK sample 之 audio-echo"><i class="iconfont icon-arrowleft"></i> <span class="hidden-mobile">Android NDK sample 之 audio-echo</span> <span class="visible-mobile">上一篇</span></a></article><article class="post-next col-6"><a href="/01bc0b7a05c2/" title="NDK r21d + x264 编写脚本文件 &amp; 编译生成 Android 所需的库"><span class="hidden-mobile">NDK r21d + x264 编写脚本文件 &amp; 编译生成 Android 所需的库</span> <span class="visible-mobile">下一篇</span> <i class="iconfont icon-arrowright"></i></a></article></div></div></article></div></div></div><div class="side-col d-none d-lg-block col-lg-2"><aside class="sidebar" style="margin-left:-1rem"><div id="toc"><p class="toc-header"><i class="iconfont icon-list"></i> <span>目录</span></p><div class="toc-body" id="toc-body"></div></div></aside></div></div></div><a id="scroll-top-button" aria-label="TOP" href="#" role="button"><i class="iconfont icon-arrowup" aria-hidden="true"></i></a><div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable modal-lg" role="document"><div class="modal-content"><div class="modal-header text-center"><h4 class="modal-title w-100 font-weight-bold">搜索</h4><button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button></div><div class="modal-body mx-3"><div class="md-form mb-5"><input type="text" id="local-search-input" class="form-control validate"> <label data-error="x" data-success="v" for="local-search-input">关键词</label></div><div class="list-group" id="local-search-result"></div></div></div></div></div></main><footer><div class="footer-inner"><div class="footer-content"><a href="https://hexo.io" target="_blank" rel="nofollow noopener"><i class="iconfont icon-my-hexo"></i>&nbsp;<span>博客框架Hexo&nbsp;&nbsp;</span></a> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><i class="iconfont icon-my-theme"></i>&nbsp;<span>博客主题Fluid&nbsp;&nbsp;</span></a> <a href="https://weichao.io" target="_blank" rel="nofollow noopener"><i class="iconfont icon-my-copyright"></i>&nbsp;2023<span>魏超</span></a></div><div class="statistics"><span id="leancloud-site-pv-container" style="display:none">总访问量 <span id="leancloud-site-pv"></span> 次 </span><span id="leancloud-site-uv-container" style="display:none">总访客数 <span id="leancloud-site-uv"></span> 人</span></div></div></footer><script src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js"></script><link rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css"><script>NProgress.configure({showSpinner:!1,trickleSpeed:100}),NProgress.start(),window.addEventListener("load",(function(){NProgress.done()}))</script><script src="https://lib.baomitu.com/jquery/3.6.0/jquery.min.js"></script><script src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js"></script><script src="/js/events.js"></script><script src="/js/plugins.js"></script><script src="/js/img-lazyload.js"></script><script>Fluid.utils.createScript("https://lib.baomitu.com/tocbot/4.18.2/tocbot.min.js",(function(){var t=jQuery("#toc");if(0!==t.length&&window.tocbot){var i=jQuery("#board-ctn").offset().top;window.tocbot.init(Object.assign({tocSelector:"#toc-body",contentSelector:".markdown-body",linkClass:"tocbot-link",activeLinkClass:"tocbot-active-link",listClass:"tocbot-list",isCollapsedClass:"tocbot-is-collapsed",collapsibleClass:"tocbot-is-collapsible",scrollSmooth:!0,includeTitleTags:!0,headingsOffset:-i},CONFIG.toc)),t.find(".toc-list-item").length>0&&t.css("visibility","visible"),Fluid.events.registerRefreshCallback((function(){if("tocbot"in window){tocbot.refresh();var t=jQuery("#toc");if(0===t.length||!tocbot)return;t.find(".toc-list-item").length>0&&t.css("visibility","visible")}}))}}))</script><script src="https://lib.baomitu.com/clipboard.js/2.0.11/clipboard.min.js"></script><script>Fluid.plugins.codeWidget()</script><script>Fluid.utils.createScript("https://lib.baomitu.com/anchor-js/4.3.1/anchor.min.js",(function(){window.anchors.options={placement:CONFIG.anchorjs.placement,visible:CONFIG.anchorjs.visible},CONFIG.anchorjs.icon&&(window.anchors.options.icon=CONFIG.anchorjs.icon);var n=(CONFIG.anchorjs.element||"h1,h2,h3,h4,h5,h6").split(","),o=[];for(var s of n)o.push(".markdown-body > "+s.trim());"left"===CONFIG.anchorjs.placement&&(window.anchors.options.class="anchorjs-link-left"),window.anchors.add(o.join(", ")),Fluid.events.registerRefreshCallback((function(){if("anchors"in window){anchors.removeAll();var n=(CONFIG.anchorjs.element||"h1,h2,h3,h4,h5,h6").split(","),o=[];for(var s of n)o.push(".markdown-body > "+s.trim());"left"===CONFIG.anchorjs.placement&&(anchors.options.class="anchorjs-link-left"),anchors.add(o.join(", "))}}))}))</script><script>Fluid.utils.createScript("https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js",(function(){Fluid.plugins.fancyBox()}))</script><script defer src="/js/leancloud.js"></script><script src="/js/local-search.js"></script><script src="/js/boot.js"></script><noscript><div class="noscript-warning">博客在允许 JavaScript 运行的环境下浏览效果更佳</div></noscript></body></html>