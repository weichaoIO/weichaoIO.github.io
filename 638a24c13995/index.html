<!DOCTYPE html><html lang="zh-CN" data-default-color-scheme="auto"><head><meta charset="UTF-8"><link rel="apple-touch-icon" sizes="76x76" href="/img/my_icon.ico"><link rel="icon" href="/img/my_icon.ico"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=5,shrink-to-fit=no"><meta http-equiv="x-ua-compatible" content="ie=edge"><meta name="theme-color" content="#2f4154"><meta name="author" content="魏超"><meta name="keywords" content="魏超,weichao"><meta name="description" content="Reference  Android彻底组件化方案实践 全面组件化—DDComponentForAndroid分析(1)    最后实现的效果 一个模块既可以作为 application 进行单独打包，也可以作为其他模块的 library 进行打包。   从零开始实现功能  下载 JIMU 项目 JIMU 项目下载地址，后面需要用到其中的 module。  新建项目 比如 component_d"><meta property="og:type" content="article"><meta property="og:title" content="使用 JIMU 框架实现组件化"><meta property="og:url" content="https://weichao.io/638a24c13995/index.html"><meta property="og:site_name" content="『魏超』的 blog"><meta property="og:description" content="Reference  Android彻底组件化方案实践 全面组件化—DDComponentForAndroid分析(1)    最后实现的效果 一个模块既可以作为 application 进行单独打包，也可以作为其他模块的 library 进行打包。   从零开始实现功能  下载 JIMU 项目 JIMU 项目下载地址，后面需要用到其中的 module。  新建项目 比如 component_d"><meta property="og:locale" content="zh_CN"><meta property="article:published_time" content="2018-04-19T13:44:58.000Z"><meta property="article:modified_time" content="2022-12-04T06:04:05.240Z"><meta property="article:author" content="魏超"><meta property="article:tag" content="魏超,weichao"><meta name="twitter:card" content="summary_large_image"><title>使用 JIMU 框架实现组件化 - 『魏超』的 blog</title><link rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css"><link rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css"><link rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css"><link rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css"><link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_hj8rtnfg7um.css"><link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_lbnruvf0jn.css"><link rel="stylesheet" href="/css/main.css"><link id="highlight-css" rel="stylesheet" href="/css/highlight.css"><link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css"><link rel="stylesheet" href="/css/custom.css"><link rel="stylesheet" href="//at.alicdn.com/t/c/font_1956623_vyed6le6uz.css"><script id="fluid-configs">var Fluid=window.Fluid||{};Fluid.ctx=Object.assign({},Fluid.ctx);var CONFIG={hostname:"weichao.io",root:"/",version:"1.9.4",typing:{enable:!1,typeSpeed:70,cursorChar:"_",loop:!1,scope:[]},anchorjs:{enable:!0,element:"h1,h2,h3,h4,h5,h6",placement:"left",visible:"hover",icon:""},progressbar:{enable:!0,height_px:3,color:"#29d",options:{showSpinner:!1,trickleSpeed:100}},code_language:{enable:!0,default:"TEXT"},copy_btn:!0,image_caption:{enable:!1},image_zoom:{enable:!0,img_url_replace:["",""]},toc:{enable:!0,placement:"right",headingSelector:"h1,h2,h3,h4,h5,h6",collapseDepth:2},lazyload:{enable:!0,loading_img:"/img/loading.gif",onlypost:!0,offset_factor:2},web_analytics:{enable:!0,follow_dnt:!0,baidu:null,google:null,gtag:null,tencent:{sid:null,cid:null},woyaola:null,cnzz:null,leancloud:{app_id:"kQcwfNV9f5OTEb51AgXNco4o-gzGzoHsz",app_key:"IVVmse4bqkjcVx2bEJiswbJc",server_url:"https://kqcwfnv9.lc-cn-n1-shared.com",path:"window.location.pathname",ignore_local:!1}},search_path:"/local-search.xml"};if(CONFIG.web_analytics.follow_dnt){var dntVal=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack;Fluid.ctx.dnt=dntVal&&(dntVal.startsWith("1")||dntVal.startsWith("yes")||dntVal.startsWith("on"))}</script><script src="/js/utils.js"></script><script src="/js/color-schema.js"></script><meta name="generator" content="Hexo 6.3.0"></head><body><header><div class="header-inner" style="height:70vh"><nav id="navbar" class="navbar fixed-top navbar-expand-lg navbar-dark scrolling-navbar"><div class="container"><a class="navbar-brand" href="/"><strong>『魏超』的 blog</strong> </a><button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation"><div class="animated-icon"><span></span><span></span><span></span></div></button><div class="collapse navbar-collapse" id="navbarSupportedContent"><ul class="navbar-nav ml-auto text-center"><li class="nav-item"><a class="nav-link" href="/"><i class="iconfont icon-my-home"></i> <span>首页</span></a></li><li class="nav-item dropdown"><a class="nav-link dropdown-toggle" target="_self" href="javascript:;" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><i class="iconfont icon-my-document"></i> <span>文档</span></a><div class="dropdown-menu" aria-labelledby="navbarDropdown"><a class="dropdown-item" href="/archives/"><i class="iconfont icon-my-archive"></i> <span>归档</span> </a><a class="dropdown-item" href="/categories/"><i class="iconfont icon-my-category"></i> <span>分类</span> </a><a class="dropdown-item" href="/tags/"><i class="iconfont icon-my-tag"></i> <span>标签</span></a></div></li><li class="nav-item dropdown"><a class="nav-link dropdown-toggle" target="_self" href="javascript:;" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><i class="iconfont icon-my-image"></i> <span>图库</span></a><div class="dropdown-menu" aria-labelledby="navbarDropdown"><a class="dropdown-item" href="/photo/"><i class="iconfont icon-my-camera"></i> <span>摄影</span> </a><a class="dropdown-item" href="/skiing/"><i class="iconfont icon-my-skiing"></i> <span>滑雪</span> </a><a class="dropdown-item" href="/motor/"><i class="iconfont icon-my-motor"></i> <span>摩托车</span></a></div></li><li class="nav-item"><a class="nav-link" href="/about/"><i class="iconfont icon-my-me"></i> <span>关于</span></a></li><li class="nav-item"><a class="nav-link" href="/links/"><i class="iconfont icon-my-link"></i> <span>友链</span></a></li><li class="nav-item" id="search-btn"><a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search"><i class="iconfont icon-search"></i></a></li><li class="nav-item" id="color-toggle-btn"><a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle"><i class="iconfont icon-dark" id="color-toggle-icon"></i></a></li></ul></div></div></nav><div id="banner" class="banner" parallax="true" style="background:url(/img/my_background.jpg) no-repeat center center;background-size:cover"><div class="full-bg-img"><div class="mask flex-center" style="background-color:rgba(0,0,0,.3)"><div class="banner-text text-center fade-in-up"><div class="h2"><span id="subtitle">使用 JIMU 框架实现组件化</span></div><div class="mt-3"><span class="post-meta mr-2"><i class="iconfont icon-author" aria-hidden="true"></i> 魏超 </span><span class="post-meta"><i class="iconfont icon-date-fill" aria-hidden="true"></i> <time datetime="2018-04-19 21:44" pubdate>2018年4月19日 晚上</time></span></div><div class="mt-1"><span class="post-meta mr-2"><i class="iconfont icon-chart"></i> 23k 字 </span><span class="post-meta mr-2"><i class="iconfont icon-clock-fill"></i> 191 分钟</span></div></div></div></div></div></div></header><main><div class="container-fluid nopadding-x"><div class="row nomargin-x"><div class="side-col d-none d-lg-block col-lg-2"></div><div class="col-lg-8 nopadding-x-md"><div class="container nopadding-x-md" id="board-ctn"><div id="board"><article class="post-content mx-auto"><h1 style="display:none">使用 JIMU 框架实现组件化</h1><p class="note note-info">本文最后更新于：1 个月前</p><div class="markdown-body"><h1 id="reference"><a class="markdownIt-Anchor" href="#reference"></a> <strong>Reference</strong></h1><ul><li><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/1b1d77f58e84" title="https://www.jianshu.com/p/1b1d77f58e84">Android彻底组件化方案实践</a></li><li><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/5746e50ed572" title="https://www.jianshu.com/p/5746e50ed572">全面组件化—DDComponentForAndroid分析(1)</a></li></ul><hr><h1 id="最后实现的效果"><a class="markdownIt-Anchor" href="#最后实现的效果"></a> <strong>最后实现的效果</strong></h1><p>一个模块既可以作为 application 进行单独打包，也可以作为其他模块的 library 进行打包。</p><hr><h1 id="从零开始实现功能"><a class="markdownIt-Anchor" href="#从零开始实现功能"></a> <strong>从零开始实现功能</strong></h1><h2 id="下载-jimu-项目"><a class="markdownIt-Anchor" href="#下载-jimu-项目"></a> <strong>下载 JIMU 项目</strong></h2><p>JIMU 项目<a target="_blank" rel="noopener" href="https://github.com/mqzhangw/JIMU/tree/master" title="https://github.com/mqzhangw/JIMU/tree/master">下载地址</a>，后面需要用到其中的 module。</p><h2 id="新建项目"><a class="markdownIt-Anchor" href="#新建项目"></a> <strong>新建项目</strong></h2><p>比如 component_demo。</p><h2 id="新建-module"><a class="markdownIt-Anchor" href="#新建-module"></a> <strong>新建 module</strong></h2><p>比如 component1。</p><h2 id="按照-jimu-使用指南配置"><a class="markdownIt-Anchor" href="#按照-jimu-使用指南配置"></a> <strong>按照<a target="_blank" rel="noopener" href="https://github.com/mqzhangw/JIMU#%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97" title="https://github.com/mqzhangw/JIMU#%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97"> JIMU 使用指南</a>配置</strong></h2><h3 id="主项目引用编译脚本"><a class="markdownIt-Anchor" href="#主项目引用编译脚本"></a> <strong>主项目引用编译脚本</strong></h3><p>1、修改<code>component_demo\gradle.properties</code>为：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs property"># Project-wide Gradle settings.<br><br># IDE (e.g. Android Studio) users:<br># Gradle settings configured through the IDE *will override*<br># any settings specified in this file.<br><br># For more details on how to configure your build environment visit<br># http://www.gradle.org/docs/current/userguide/build_environment.html<br><br># Specifies the JVM arguments used for the daemon process.<br># The setting is particularly useful for tweaking memory settings.<br>org.gradle.jvmargs=-Xmx1536m<br><br># When configured, Gradle will run in incubating parallel mode.<br># This option should only be used with decoupled projects. More details, visit<br># http://www.gradle.org/docs/current/userguide/multi_project_builds.html#sec:decoupled_projects<br># org.gradle.parallel=true<br><br>mainmodulename=app<br></code></pre></td></tr></table></figure><p>2、修改<code>component_demo\build.gradle</code>为：</p><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs gradle"><span class="hljs-comment">// Top-level build file where you can add configuration options common to all sub-projects/modules.</span><br><br><span class="hljs-keyword">buildscript</span> &#123;<br>    <span class="hljs-keyword">repositories</span> &#123;<br>        google()<br>        jcenter()<br>    &#125;<br>    <span class="hljs-keyword">dependencies</span> &#123;<br>        <span class="hljs-keyword">classpath</span> <span class="hljs-string">&#x27;com.android.tools.build:gradle:3.1.1&#x27;</span><br>        <span class="hljs-keyword">classpath</span> <span class="hljs-string">&#x27;com.luojilab.ddcomponent:build-gradle:1.2.0&#x27;</span><br><br>        <span class="hljs-comment">// <span class="hljs-doctag">NOTE:</span> Do not place your application dependencies here; they belong</span><br>        <span class="hljs-comment">// in the individual module build.gradle files</span><br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">allprojects</span> &#123;<br>    <span class="hljs-keyword">repositories</span> &#123;<br>        google()<br>        jcenter()<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">task</span> clean(type: <span class="hljs-keyword">Delete</span>) &#123;<br>    <span class="hljs-keyword">delete</span> rootProject.buildDir<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="设置组件可独立打包"><a class="markdownIt-Anchor" href="#设置组件可独立打包"></a> <strong>设置组件可独立打包</strong></h3><p>新建<code>component_demo\app\gradle.properties</code>和<code>component_demo\component1\gradle.properties</code>，并写入内容：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs property"># Project-wide Gradle settings.<br><br># IDE (e.g. Android Studio) users:<br># Gradle settings configured through the IDE *will override*<br># any settings specified in this file.<br><br># For more details on how to configure your build environment visit<br># http://www.gradle.org/docs/current/userguide/build_environment.html<br><br># Specifies the JVM arguments used for the daemon process.<br># The setting is particularly useful for tweaking memory settings.<br>org.gradle.jvmargs=-Xmx1536m<br><br># When configured, Gradle will run in incubating parallel mode.<br># This option should only be used with decoupled projects. More details, visit<br># http://www.gradle.org/docs/current/userguide/multi_project_builds.html#sec:decoupled_projects<br># org.gradle.parallel=true<br><br>isRunAlone=true<br>debugComponent=sharecomponent<br>compileComponent=sharecomponent<br></code></pre></td></tr></table></figure><h3 id="应用组件化编译脚本"><a class="markdownIt-Anchor" href="#应用组件化编译脚本"></a> <strong>应用组件化编译脚本</strong></h3><p>1、修改<code>component_demo\app\build.gradle</code>为：</p><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs gradle">apply plugin: <span class="hljs-string">&#x27;com.dd.comgradle&#x27;</span><br><br>android &#123;<br>    compileSdkVersion <span class="hljs-number">27</span><br>    defaultConfig &#123;<br>        applicationId <span class="hljs-string">&quot;io.weichao.component_demo&quot;</span><br>        minSdkVersion <span class="hljs-number">21</span><br>        targetSdkVersion <span class="hljs-number">27</span><br>        versionCode <span class="hljs-number">1</span><br>        versionName <span class="hljs-string">&quot;1.0&quot;</span><br>    &#125;<br>    buildTypes &#123;<br>        release &#123;<br>            minifyEnabled <span class="hljs-keyword">false</span><br>            proguardFiles getDefaultProguardFile(<span class="hljs-string">&#x27;proguard-android.txt&#x27;</span>), <span class="hljs-string">&#x27;proguard-rules.pro&#x27;</span><br>        &#125;<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">dependencies</span> &#123;<br>    implementation <span class="hljs-keyword">fileTree</span>(dir: <span class="hljs-string">&#x27;libs&#x27;</span>, <span class="hljs-keyword">include</span>: [<span class="hljs-string">&#x27;*.jar&#x27;</span>])<br>    implementation <span class="hljs-string">&#x27;com.android.support:appcompat-v7:27.1.1&#x27;</span><br>&#125;<br><br>combuild &#123;<br>    applicationName = <span class="hljs-string">&#x27;com.luojilab.reader.runalone.application.ReaderApplication&#x27;</span><br>    isRegisterCompoAuto = <span class="hljs-keyword">true</span><br>&#125;<br></code></pre></td></tr></table></figure><p>2、修改<code>component_demo\component1\build.gradle</code>为：</p><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs gradle">apply plugin: <span class="hljs-string">&#x27;com.dd.comgradle&#x27;</span><br><br>android &#123;<br>    compileSdkVersion <span class="hljs-number">27</span><br>    defaultConfig &#123;<br>        applicationId <span class="hljs-string">&quot;io.weichao.component1&quot;</span><br>        minSdkVersion <span class="hljs-number">21</span><br>        targetSdkVersion <span class="hljs-number">27</span><br>        versionCode <span class="hljs-number">1</span><br>        versionName <span class="hljs-string">&quot;1.0&quot;</span><br>    &#125;<br>    buildTypes &#123;<br>        release &#123;<br>            minifyEnabled <span class="hljs-keyword">false</span><br>            proguardFiles getDefaultProguardFile(<span class="hljs-string">&#x27;proguard-android.txt&#x27;</span>), <span class="hljs-string">&#x27;proguard-rules.pro&#x27;</span><br>        &#125;<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">dependencies</span> &#123;<br>    implementation <span class="hljs-keyword">fileTree</span>(dir: <span class="hljs-string">&#x27;libs&#x27;</span>, <span class="hljs-keyword">include</span>: [<span class="hljs-string">&#x27;*.jar&#x27;</span>])<br>    implementation <span class="hljs-string">&#x27;com.android.support:appcompat-v7:27.1.1&#x27;</span><br>&#125;<br><br>combuild &#123;<br>    applicationName = <span class="hljs-string">&#x27;com.luojilab.reader.runalone.application.ReaderApplication&#x27;</span><br>    isRegisterCompoAuto = <span class="hljs-keyword">true</span><br>&#125;<br></code></pre></td></tr></table></figure><h3 id="混淆"><a class="markdownIt-Anchor" href="#混淆"></a> <strong>混淆</strong></h3><p>修改<code>component_demo\app\proguard-rules.pro</code>和<code>component_demo\component1\proguard-rules.pro</code>为：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs property">-keep interface * &#123;<br>  &lt;methods&gt;;<br>&#125;<br>-keep class com.luojilab.component.componentlib.** &#123;*;&#125;<br>-keep class com.luojilab.router.** &#123;*;&#125;<br>-keep class * implements com.luojilab.component.componentlib.router.ISyringe &#123;*;&#125;<br>-keep class * implements com.luojilab.component.componentlib.applicationlike.IApplicationLike &#123;*;&#125;<br></code></pre></td></tr></table></figure><h2 id="application-式打包运行-component1"><a class="markdownIt-Anchor" href="#application-式打包运行-component1"></a> <strong>application 式打包（运行 component1）</strong></h2><h3 id="报错project-with-path-sharecomponent-could-not-be-found-in-project-xx"><a class="markdownIt-Anchor" href="#报错project-with-path-sharecomponent-could-not-be-found-in-project-xx"></a> <strong>报错：Project with path ‘:sharecomponent’ could not be found in project ‘:xx’.</strong></h3><p>修改<code>component_demo\app\gradle.properties</code>和<code>component_demo\component1\gradle.properties</code>为：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs property"># Project-wide Gradle settings.<br><br># IDE (e.g. Android Studio) users:<br># Gradle settings configured through the IDE *will override*<br># any settings specified in this file.<br><br># For more details on how to configure your build environment visit<br># http://www.gradle.org/docs/current/userguide/build_environment.html<br><br># Specifies the JVM arguments used for the daemon process.<br># The setting is particularly useful for tweaking memory settings.<br>org.gradle.jvmargs=-Xmx1536m<br><br># When configured, Gradle will run in incubating parallel mode.<br># This option should only be used with decoupled projects. More details, visit<br># http://www.gradle.org/docs/current/userguide/multi_project_builds.html#sec:decoupled_projects<br># org.gradle.parallel=true<br><br>isRunAlone=true<br></code></pre></td></tr></table></figure><h3 id="报错cannot-read-packagename-from-xxsrcmainrunaloneandroidmanifestxml"><a class="markdownIt-Anchor" href="#报错cannot-read-packagename-from-xxsrcmainrunaloneandroidmanifestxml"></a> <strong>报错：Cannot read packageName from xx\src\main\runalone\AndroidManifest.xml</strong></h3><p>新建<code>component_demo\component1\src\main\runalone</code>，在该文件夹中新建<code>AndroidManifest.xml</code>并写入：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">&quot;1.0&quot;</span> encoding=<span class="hljs-string">&quot;utf-8&quot;</span>?&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">manifest</span> <span class="hljs-attr">xmlns:android</span>=<span class="hljs-string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span><br><span class="hljs-tag">    <span class="hljs-attr">package</span>=<span class="hljs-string">&quot;io.weichao.component1&quot;</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">application</span></span><br><span class="hljs-tag">        <span class="hljs-attr">android:allowBackup</span>=<span class="hljs-string">&quot;true&quot;</span></span><br><span class="hljs-tag">        <span class="hljs-attr">android:icon</span>=<span class="hljs-string">&quot;@mipmap/ic_launcher&quot;</span></span><br><span class="hljs-tag">        <span class="hljs-attr">android:label</span>=<span class="hljs-string">&quot;@string/app_name&quot;</span></span><br><span class="hljs-tag">        <span class="hljs-attr">android:roundIcon</span>=<span class="hljs-string">&quot;@mipmap/ic_launcher_round&quot;</span></span><br><span class="hljs-tag">        <span class="hljs-attr">android:supportsRtl</span>=<span class="hljs-string">&quot;true&quot;</span></span><br><span class="hljs-tag">        <span class="hljs-attr">android:theme</span>=<span class="hljs-string">&quot;@style/AppTheme&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">activity</span> <span class="hljs-attr">android:name</span>=<span class="hljs-string">&quot;.MainActivity&quot;</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">intent-filter</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">action</span> <span class="hljs-attr">android:name</span>=<span class="hljs-string">&quot;android.intent.action.MAIN&quot;</span> /&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">category</span> <span class="hljs-attr">android:name</span>=<span class="hljs-string">&quot;android.intent.category.LAUNCHER&quot;</span> /&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">intent-filter</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">activity</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">application</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">manifest</span>&gt;</span><br></code></pre></td></tr></table></figure><h3 id="运行成功"><a class="markdownIt-Anchor" href="#运行成功"></a> <strong>运行成功</strong></h3><p>为了便于展示，修改<code>component_demo\component1\src\main\res\layout\activity_main.xml</code>为：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">&quot;1.0&quot;</span> encoding=<span class="hljs-string">&quot;utf-8&quot;</span>?&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">RelativeLayout</span> <span class="hljs-attr">xmlns:android</span>=<span class="hljs-string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span><br><span class="hljs-tag">    <span class="hljs-attr">xmlns:tools</span>=<span class="hljs-string">&quot;http://schemas.android.com/tools&quot;</span></span><br><span class="hljs-tag">    <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">&quot;match_parent&quot;</span></span><br><span class="hljs-tag">    <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">&quot;match_parent&quot;</span></span><br><span class="hljs-tag">    <span class="hljs-attr">tools:context</span>=<span class="hljs-string">&quot;.MainActivity&quot;</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">TextView</span></span><br><span class="hljs-tag">        <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">&quot;wrap_content&quot;</span></span><br><span class="hljs-tag">        <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">&quot;wrap_content&quot;</span></span><br><span class="hljs-tag">        <span class="hljs-attr">android:text</span>=<span class="hljs-string">&quot;component1&quot;</span> /&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">RelativeLayout</span>&gt;</span><br></code></pre></td></tr></table></figure><h2 id="library-式打包运行-app"><a class="markdownIt-Anchor" href="#library-式打包运行-app"></a> <strong>library 式打包（运行 app）</strong></h2><p>【非必须】修改<code>component_demo\component1\src\main\AndroidManifest.xml</code>为：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">&quot;1.0&quot;</span> encoding=<span class="hljs-string">&quot;utf-8&quot;</span>?&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">manifest</span> <span class="hljs-attr">xmlns:android</span>=<span class="hljs-string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span><br><span class="hljs-tag">    <span class="hljs-attr">package</span>=<span class="hljs-string">&quot;io.weichao.component1&quot;</span> /&gt;</span><br></code></pre></td></tr></table></figure><h3 id="app-集成-component1"><a class="markdownIt-Anchor" href="#app-集成-component1"></a> <strong>app 集成 component1</strong></h3><p>修改<code>component_demo\app\gradle.properties</code>为：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs property"># Project-wide Gradle settings.<br><br># IDE (e.g. Android Studio) users:<br># Gradle settings configured through the IDE *will override*<br># any settings specified in this file.<br><br># For more details on how to configure your build environment visit<br># http://www.gradle.org/docs/current/userguide/build_environment.html<br><br># Specifies the JVM arguments used for the daemon process.<br># The setting is particularly useful for tweaking memory settings.<br>org.gradle.jvmargs=-Xmx1536m<br><br># When configured, Gradle will run in incubating parallel mode.<br># This option should only be used with decoupled projects. More details, visit<br># http://www.gradle.org/docs/current/userguide/multi_project_builds.html#sec:decoupled_projects<br># org.gradle.parallel=true<br><br>isRunAlone=true<br>debugComponent=component1<br>compileComponent=component1<br></code></pre></td></tr></table></figure><h3 id="组件数据交互"><a class="markdownIt-Anchor" href="#组件数据交互"></a> <strong>组件数据交互</strong></h3><h4 id="新建专用于数据交互的-module"><a class="markdownIt-Anchor" href="#新建专用于数据交互的-module"></a> <strong>新建专用于数据交互的 module</strong></h4><p>新建<code>component_demo\component_service\src\main\java\io\weichao\component_service\Component1Service.java</code>用于其他 module 和 component1 的交互：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> io.weichao.component_service;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">Component1Service</span> &#123;<br>    String <span class="hljs-title function_">getComponentStr</span><span class="hljs-params">()</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="component1-引入-component_service"><a class="markdownIt-Anchor" href="#component1-引入-component_service"></a> <strong>component1 引入 component_service</strong></h4><p>修改<code>component_demo\component1\build.gradle</code>为：</p><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs gradle">apply plugin: <span class="hljs-string">&#x27;com.dd.comgradle&#x27;</span><br><br>android &#123;<br>    compileSdkVersion <span class="hljs-number">27</span><br>    defaultConfig &#123;<br>        minSdkVersion <span class="hljs-number">21</span><br>        targetSdkVersion <span class="hljs-number">27</span><br>        versionCode <span class="hljs-number">1</span><br>        versionName <span class="hljs-string">&quot;1.0&quot;</span><br>    &#125;<br>    buildTypes &#123;<br>        release &#123;<br>            minifyEnabled <span class="hljs-keyword">false</span><br>            proguardFiles getDefaultProguardFile(<span class="hljs-string">&#x27;proguard-android.txt&#x27;</span>), <span class="hljs-string">&#x27;proguard-rules.pro&#x27;</span><br>        &#125;<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">dependencies</span> &#123;<br>    implementation <span class="hljs-keyword">fileTree</span>(dir: <span class="hljs-string">&#x27;libs&#x27;</span>, <span class="hljs-keyword">include</span>: [<span class="hljs-string">&#x27;*.jar&#x27;</span>])<br>    <span class="hljs-keyword">compile</span> <span class="hljs-keyword">project</span>(<span class="hljs-string">&#x27;:component_service&#x27;</span>)<br>    implementation <span class="hljs-string">&#x27;com.android.support:appcompat-v7:27.1.1&#x27;</span><br>&#125;<br><br>combuild &#123;<br>    applicationName = <span class="hljs-string">&#x27;com.luojilab.reader.runalone.application.ReaderApplication&#x27;</span><br>    isRegisterCompoAuto = <span class="hljs-keyword">true</span><br>&#125;<br></code></pre></td></tr></table></figure><h4 id="component1-实现-component1service-接口"><a class="markdownIt-Anchor" href="#component1-实现-component1service-接口"></a> <strong>component1 实现 Component1Service 接口</strong></h4><p>新建<code>component_demo\component1\src\main\java\io\weichao\component1\Component1ServiceImpl.java</code>，并写入内容：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> io.weichao.component1;<br><br><span class="hljs-keyword">import</span> io.weichao.component_service.Component1Service;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Component1ServiceImpl</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Component1Service</span> &#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getComponentStr</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;component1&quot;</span>;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="将-component1serviceimpl-注册到-router-中"><a class="markdownIt-Anchor" href="#将-component1serviceimpl-注册到-router-中"></a> <strong>将 Component1ServiceImpl 注册到 Router 中</strong></h4><p>1、导入已下载的 JIMU 项目中的 componentlib。</p><h5 id="报错plugin-with-id-comgithubdcendentsandroid-maven-not-found"><a class="markdownIt-Anchor" href="#报错plugin-with-id-comgithubdcendentsandroid-maven-not-found"></a> <strong>报错：Plugin with id ‘com.github.dcendents.android-maven’ not found.</strong></h5><p>修改<code>component_demo\componentlib\build.gradle</code>为：</p><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><code class="hljs gradle">apply plugin: <span class="hljs-string">&#x27;com.android.library&#x27;</span><br><br><span class="hljs-keyword">sourceCompatibility</span> = <span class="hljs-string">&quot;1.7&quot;</span><br><span class="hljs-keyword">targetCompatibility</span> = <span class="hljs-string">&quot;1.7&quot;</span><br><br><br>ext &#123;<br>    bintrayName = <span class="hljs-string">&#x27;componentlib&#x27;</span><br>    artifact = bintrayName<br>    libraryName = <span class="hljs-string">&#x27;component build lib &#x27;</span><br>    libraryDescription = <span class="hljs-string">&#x27;component build lib &#x27;</span><br>    libraryVersion = <span class="hljs-string">&quot;1.3.1&quot;</span><br>    licenseName = <span class="hljs-string">&#x27;The Apache Software License, Version 2.0&#x27;</span><br>    licenseUrl = <span class="hljs-string">&#x27;http://www.apache.org/licenses/LICENSE-2.0.txt&#x27;</span><br>    allLicenses = [<span class="hljs-string">&quot;Apache-2.0&quot;</span>]<br>&#125;<br><br>android &#123;<br>    compileSdkVersion <span class="hljs-number">26</span><br>    buildToolsVersion <span class="hljs-string">&quot;26.0.0&quot;</span><br><br>    defaultConfig &#123;<br>        minSdkVersion <span class="hljs-number">15</span><br>        targetSdkVersion <span class="hljs-number">26</span><br>        versionCode <span class="hljs-number">1</span><br>        versionName <span class="hljs-string">&quot;1.0&quot;</span><br><br>        testInstrumentationRunner <span class="hljs-string">&quot;android.support.test.runner.AndroidJUnitRunner&quot;</span><br><br>    &#125;<br>    buildTypes &#123;<br>        release &#123;<br>            minifyEnabled <span class="hljs-keyword">false</span><br>            proguardFiles getDefaultProguardFile(<span class="hljs-string">&#x27;proguard-android.txt&#x27;</span>), <span class="hljs-string">&#x27;proguard-rules.pro&#x27;</span><br>        &#125;<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">dependencies</span> &#123;<br>    <span class="hljs-keyword">compile</span> <span class="hljs-keyword">fileTree</span>(<span class="hljs-keyword">include</span>: [<span class="hljs-string">&#x27;*.jar&#x27;</span>], dir: <span class="hljs-string">&#x27;libs&#x27;</span>)<br>    <span class="hljs-keyword">compile</span> <span class="hljs-string">&#x27;com.android.support:appcompat-v7:26.+&#x27;</span><br>    androidTestCompile(<span class="hljs-string">&#x27;com.android.support.test.espresso:espresso-core:2.2.2&#x27;</span>, &#123;<br>        <span class="hljs-keyword">exclude</span> <span class="hljs-keyword">group</span>: <span class="hljs-string">&#x27;com.android.support&#x27;</span>, module: <span class="hljs-string">&#x27;support-annotations&#x27;</span><br>    &#125;)<br>    testCompile <span class="hljs-string">&#x27;junit:junit:4.12&#x27;</span><br><span class="hljs-comment">//    compile project(&#x27;:router-annotation&#x27;)</span><br>    <span class="hljs-keyword">compile</span> <span class="hljs-string">&#x27;com.github.jimu:router-annotation:1.0.1&#x27;</span><br>    <span class="hljs-keyword">compile</span> <span class="hljs-string">&#x27;com.google.code.gson:gson:2.8.2&#x27;</span><br><br>&#125;<br><br><br><span class="hljs-comment">//apply from: &#x27;https://raw.githubusercontent.com/nuuneoi/JCenter/master/installv1.gradle&#x27;</span><br><span class="hljs-comment">//apply from: &#x27;https://raw.githubusercontent.com/nuuneoi/JCenter/master/bintrayv1.gradle&#x27;</span><br></code></pre></td></tr></table></figure><p>2、修改<code>component_demo\component_service\build.gradle</code>：</p><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs gradle">apply plugin: <span class="hljs-string">&#x27;com.android.library&#x27;</span><br><br>android &#123;<br>    compileSdkVersion <span class="hljs-number">27</span><br>    defaultConfig &#123;<br>        minSdkVersion <span class="hljs-number">21</span><br>        targetSdkVersion <span class="hljs-number">27</span><br>        versionCode <span class="hljs-number">1</span><br>        versionName <span class="hljs-string">&quot;1.0&quot;</span><br>    &#125;<br>    buildTypes &#123;<br>        release &#123;<br>            minifyEnabled <span class="hljs-keyword">false</span><br>            proguardFiles getDefaultProguardFile(<span class="hljs-string">&#x27;proguard-android.txt&#x27;</span>), <span class="hljs-string">&#x27;proguard-rules.pro&#x27;</span><br>        &#125;<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">dependencies</span> &#123;<br>    implementation <span class="hljs-keyword">fileTree</span>(dir: <span class="hljs-string">&#x27;libs&#x27;</span>, <span class="hljs-keyword">include</span>: [<span class="hljs-string">&#x27;*.jar&#x27;</span>])<br>    implementation <span class="hljs-string">&#x27;com.android.support:appcompat-v7:27.1.1&#x27;</span><br>    <span class="hljs-keyword">compile</span> <span class="hljs-keyword">project</span>(<span class="hljs-string">&#x27;:componentlib&#x27;</span>)<br>&#125;<br></code></pre></td></tr></table></figure><p>3、新建<code>component_demo\component1\src\main\java\io\weichao\component1\Component1ApplicationLike.java</code>，并写入内容：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> io.weichao.component1;<br><br><span class="hljs-keyword">import</span> com.luojilab.component.componentlib.applicationlike.IApplicationLike;<br><span class="hljs-keyword">import</span> com.luojilab.component.componentlib.router.Router;<br><br><span class="hljs-keyword">import</span> io.weichao.component_service.Component1Service;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Component1ApplicationLike</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">IApplicationLike</span> &#123;<br>    <span class="hljs-type">Router</span> <span class="hljs-variable">router</span> <span class="hljs-operator">=</span> Router.getInstance();<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onCreate</span><span class="hljs-params">()</span> &#123;<br>        router.addService(Component1Service.class.getSimpleName(), <span class="hljs-keyword">new</span> <span class="hljs-title class_">Component1ServiceImpl</span>());<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onStop</span><span class="hljs-params">()</span> &#123;<br>        router.removeService(Component1Service.class.getSimpleName());<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="app-调用-component1"><a class="markdownIt-Anchor" href="#app-调用-component1"></a> <strong>app 调用 Component1</strong></h4><p>1、修改<code>component_demo\app\build.gradle</code>为：</p><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs gradle">apply plugin: <span class="hljs-string">&#x27;com.dd.comgradle&#x27;</span><br><br>android &#123;<br>    compileSdkVersion <span class="hljs-number">27</span><br>    defaultConfig &#123;<br>        applicationId <span class="hljs-string">&quot;io.weichao.component_demo&quot;</span><br>        minSdkVersion <span class="hljs-number">21</span><br>        targetSdkVersion <span class="hljs-number">27</span><br>        versionCode <span class="hljs-number">1</span><br>        versionName <span class="hljs-string">&quot;1.0&quot;</span><br>    &#125;<br>    buildTypes &#123;<br>        release &#123;<br>            minifyEnabled <span class="hljs-keyword">false</span><br>            proguardFiles getDefaultProguardFile(<span class="hljs-string">&#x27;proguard-android.txt&#x27;</span>), <span class="hljs-string">&#x27;proguard-rules.pro&#x27;</span><br>        &#125;<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">dependencies</span> &#123;<br>    implementation <span class="hljs-keyword">fileTree</span>(dir: <span class="hljs-string">&#x27;libs&#x27;</span>, <span class="hljs-keyword">include</span>: [<span class="hljs-string">&#x27;*.jar&#x27;</span>])<br>    <span class="hljs-keyword">compile</span> <span class="hljs-keyword">project</span>(<span class="hljs-string">&#x27;:component_service&#x27;</span>)<br>    implementation <span class="hljs-string">&#x27;com.android.support:appcompat-v7:27.1.1&#x27;</span><br>&#125;<br><br>combuild &#123;<br>    applicationName = <span class="hljs-string">&#x27;io.weichao.component_demo.MainApplication&#x27;</span><br>    isRegisterCompoAuto = <span class="hljs-keyword">true</span><br>&#125;<br></code></pre></td></tr></table></figure><p>2、修改<code>component_demo\app\src\main\java\io\weichao\component_demo\MainActivity.java</code>为：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> io.weichao.component_demo;<br><br><span class="hljs-keyword">import</span> android.support.v7.app.AppCompatActivity;<br><span class="hljs-keyword">import</span> android.os.Bundle;<br><span class="hljs-keyword">import</span> android.widget.Toast;<br><br><span class="hljs-keyword">import</span> com.luojilab.component.componentlib.router.Router;<br><br><span class="hljs-keyword">import</span> io.weichao.component_service.Component1Service;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MainActivity</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">AppCompatActivity</span> &#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onCreate</span><span class="hljs-params">(Bundle savedInstanceState)</span> &#123;<br>        <span class="hljs-built_in">super</span>.onCreate(savedInstanceState);<br>        setContentView(R.layout.activity_main);<br><br>        <span class="hljs-type">Router</span> <span class="hljs-variable">router</span> <span class="hljs-operator">=</span> Router.getInstance();<br>        <span class="hljs-keyword">if</span> (router.getService(Component1Service.class.getSimpleName()) != <span class="hljs-literal">null</span>) &#123;<br>            <span class="hljs-type">Component1Service</span> <span class="hljs-variable">service</span> <span class="hljs-operator">=</span> (Component1Service) router.getService(Component1Service.class.getSimpleName());<br>            Toast.makeText(<span class="hljs-built_in">this</span>, service.getComponentStr(), Toast.LENGTH_LONG).show();<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="报错library-projects-cannot-set-applicationid-applicationid-is-set-to-xx-in-default-config"><a class="markdownIt-Anchor" href="#报错library-projects-cannot-set-applicationid-applicationid-is-set-to-xx-in-default-config"></a> <strong>报错：Library projects cannot set applicationId. applicationId is set to ‘xx’ in default config.</strong></h3><p>修改<code>component_demo\component1\build.gradle</code>为：</p><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs gradle">apply plugin: <span class="hljs-string">&#x27;com.dd.comgradle&#x27;</span><br><br>android &#123;<br>    compileSdkVersion <span class="hljs-number">27</span><br>    defaultConfig &#123;<br>        minSdkVersion <span class="hljs-number">21</span><br>        targetSdkVersion <span class="hljs-number">27</span><br>        versionCode <span class="hljs-number">1</span><br>        versionName <span class="hljs-string">&quot;1.0&quot;</span><br>    &#125;<br>    buildTypes &#123;<br>        release &#123;<br>            minifyEnabled <span class="hljs-keyword">false</span><br>            proguardFiles getDefaultProguardFile(<span class="hljs-string">&#x27;proguard-android.txt&#x27;</span>), <span class="hljs-string">&#x27;proguard-rules.pro&#x27;</span><br>        &#125;<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">dependencies</span> &#123;<br>    implementation <span class="hljs-keyword">fileTree</span>(dir: <span class="hljs-string">&#x27;libs&#x27;</span>, <span class="hljs-keyword">include</span>: [<span class="hljs-string">&#x27;*.jar&#x27;</span>])<br>    implementation <span class="hljs-string">&#x27;com.android.support:appcompat-v7:27.1.1&#x27;</span><br>&#125;<br><br>combuild &#123;<br>    applicationName = <span class="hljs-string">&#x27;com.luojilab.reader.runalone.application.ReaderApplication&#x27;</span><br>    isRegisterCompoAuto = <span class="hljs-keyword">true</span><br>&#125;<br></code></pre></td></tr></table></figure><h3 id="报错unable-to-find-source-java-class-xx-because-it-does-not-belong-to-any-of-the-source-dirs-xx"><a class="markdownIt-Anchor" href="#报错unable-to-find-source-java-class-xx-because-it-does-not-belong-to-any-of-the-source-dirs-xx"></a> <strong>报错：Unable to find source java class: ‘xx’ because it does not belong to any of the source dirs: ‘xx’</strong></h3><p>clean 项目。</p><h3 id="运行成功-2"><a class="markdownIt-Anchor" href="#运行成功-2"></a> <strong>运行成功</strong></h3><h2 id="ui-跳转"><a class="markdownIt-Anchor" href="#ui-跳转"></a> <strong>UI 跳转</strong></h2><h3 id="组件添加必要的依赖"><a class="markdownIt-Anchor" href="#组件添加必要的依赖"></a> <strong>组件添加必要的依赖</strong></h3><p>修改<code>component_demo\component1\build.gradle</code>为：</p><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs gradle">apply plugin: <span class="hljs-string">&#x27;com.dd.comgradle&#x27;</span><br><br>android &#123;<br>    compileSdkVersion <span class="hljs-number">27</span><br>    defaultConfig &#123;<br>        minSdkVersion <span class="hljs-number">21</span><br>        targetSdkVersion <span class="hljs-number">27</span><br>        versionCode <span class="hljs-number">1</span><br>        versionName <span class="hljs-string">&quot;1.0&quot;</span><br>        javaCompileOptions &#123;<br>            annotationProcessorOptions &#123;<br>                arguments = [host: <span class="hljs-string">&quot;component1&quot;</span>]<br>            &#125;<br>        &#125;<br>    &#125;<br>    buildTypes &#123;<br>        release &#123;<br>            minifyEnabled <span class="hljs-keyword">false</span><br>            proguardFiles getDefaultProguardFile(<span class="hljs-string">&#x27;proguard-android.txt&#x27;</span>), <span class="hljs-string">&#x27;proguard-rules.pro&#x27;</span><br>        &#125;<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">dependencies</span> &#123;<br>    implementation <span class="hljs-keyword">fileTree</span>(dir: <span class="hljs-string">&#x27;libs&#x27;</span>, <span class="hljs-keyword">include</span>: [<span class="hljs-string">&#x27;*.jar&#x27;</span>])<br>    <span class="hljs-keyword">compile</span> <span class="hljs-keyword">project</span>(<span class="hljs-string">&#x27;:component_service&#x27;</span>)<br>    implementation <span class="hljs-string">&#x27;com.android.support:appcompat-v7:27.1.1&#x27;</span><br>    annotationProcessor <span class="hljs-string">&#x27;com.github.jimu:router-anno-compiler:1.0.1&#x27;</span><br>&#125;<br><br>combuild &#123;<br>    applicationName = <span class="hljs-string">&#x27;io.weichao.component1.MainApplication&#x27;</span><br>    isRegisterCompoAuto = <span class="hljs-keyword">true</span><br>&#125;<br></code></pre></td></tr></table></figure><h3 id="注册组件到-uirouter-中"><a class="markdownIt-Anchor" href="#注册组件到-uirouter-中"></a> <strong>注册组件到 UIRouter 中</strong></h3><p>修改<code>component_demo\component1\src\main\java\io\weichao\component1\Component1ApplicationLike.java</code>为：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> io.weichao.component1;<br><br><span class="hljs-keyword">import</span> com.luojilab.component.componentlib.applicationlike.IApplicationLike;<br><span class="hljs-keyword">import</span> com.luojilab.component.componentlib.router.Router;<br><span class="hljs-keyword">import</span> com.luojilab.component.componentlib.router.ui.UIRouter;<br><br><span class="hljs-keyword">import</span> io.weichao.component_service.Component1Service;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Component1ApplicationLike</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">IApplicationLike</span> &#123;<br>    <span class="hljs-type">Router</span> <span class="hljs-variable">router</span> <span class="hljs-operator">=</span> Router.getInstance();<br>    <span class="hljs-type">UIRouter</span> <span class="hljs-variable">uiRouter</span> <span class="hljs-operator">=</span> UIRouter.getInstance();<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onCreate</span><span class="hljs-params">()</span> &#123;<br>        router.addService(Component1Service.class.getSimpleName(), <span class="hljs-keyword">new</span> <span class="hljs-title class_">Component1ServiceImpl</span>());<br>        uiRouter.registerUI(<span class="hljs-string">&quot;component1&quot;</span>);<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onStop</span><span class="hljs-params">()</span> &#123;<br>        router.removeService(Component1Service.class.getSimpleName());<br>        uiRouter.unregisterUI(<span class="hljs-string">&quot;component1&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="目标页面添加注解"><a class="markdownIt-Anchor" href="#目标页面添加注解"></a> <strong>目标页面添加注解</strong></h3><p>修改<code>component_demo\component1\src\main\java\io\weichao\component1\MainActivity.java</code>为：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> io.weichao.component1;<br><br><span class="hljs-keyword">import</span> android.content.Intent;<br><span class="hljs-keyword">import</span> android.support.v7.app.AppCompatActivity;<br><span class="hljs-keyword">import</span> android.os.Bundle;<br><span class="hljs-keyword">import</span> android.text.TextUtils;<br><span class="hljs-keyword">import</span> android.widget.TextView;<br><br><span class="hljs-keyword">import</span> com.luojilab.component.componentlib.service.AutowiredService;<br><span class="hljs-keyword">import</span> com.luojilab.router.facade.annotation.Autowired;<br><span class="hljs-keyword">import</span> com.luojilab.router.facade.annotation.RouteNode;<br><br><span class="hljs-meta">@RouteNode(path = &quot;/main&quot;, desc = &quot;主页面&quot;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MainActivity</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">AppCompatActivity</span> &#123;<br>    <span class="hljs-meta">@Autowired</span><br>    String arg;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onCreate</span><span class="hljs-params">(Bundle savedInstanceState)</span> &#123;<br>        <span class="hljs-built_in">super</span>.onCreate(savedInstanceState);<br>        setContentView(R.layout.component1_activity_main);<br>        <span class="hljs-type">TextView</span> <span class="hljs-variable">tv</span> <span class="hljs-operator">=</span> findViewById(R.id.textview);<br><br>        AutowiredService.Factory.getSingletonImpl().autowire(<span class="hljs-built_in">this</span>);<br><br>        <span class="hljs-keyword">if</span> (!TextUtils.isEmpty(arg)) &#123;<br>            tv.setText(arg);<br>        &#125;<br><br>        <span class="hljs-type">Intent</span> <span class="hljs-variable">intent</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Intent</span>();<br>        intent.putExtra(<span class="hljs-string">&quot;callbackArg&quot;</span>, <span class="hljs-string">&quot;success&quot;</span>);<br>        setResult(RESULT_OK, intent);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="跳转"><a class="markdownIt-Anchor" href="#跳转"></a> <strong>跳转</strong></h3><p>1、修改<code>component_demo\app\src\main\res\layout\activity_main.xml</code>为：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">&quot;1.0&quot;</span> encoding=<span class="hljs-string">&quot;utf-8&quot;</span>?&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">LinearLayout</span> <span class="hljs-attr">xmlns:android</span>=<span class="hljs-string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span><br><span class="hljs-tag">    <span class="hljs-attr">xmlns:tools</span>=<span class="hljs-string">&quot;http://schemas.android.com/tools&quot;</span></span><br><span class="hljs-tag">    <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">&quot;match_parent&quot;</span></span><br><span class="hljs-tag">    <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">&quot;match_parent&quot;</span></span><br><span class="hljs-tag">    <span class="hljs-attr">android:orientation</span>=<span class="hljs-string">&quot;vertical&quot;</span></span><br><span class="hljs-tag">    <span class="hljs-attr">tools:context</span>=<span class="hljs-string">&quot;.MainActivity&quot;</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">Button</span></span><br><span class="hljs-tag">        <span class="hljs-attr">android:id</span>=<span class="hljs-string">&quot;@+id/btn_bundle&quot;</span></span><br><span class="hljs-tag">        <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">&quot;wrap_content&quot;</span></span><br><span class="hljs-tag">        <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">&quot;wrap_content&quot;</span></span><br><span class="hljs-tag">        <span class="hljs-attr">android:text</span>=<span class="hljs-string">&quot;Bundle 方式&quot;</span> /&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">Button</span></span><br><span class="hljs-tag">        <span class="hljs-attr">android:id</span>=<span class="hljs-string">&quot;@+id/btn_uri&quot;</span></span><br><span class="hljs-tag">        <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">&quot;wrap_content&quot;</span></span><br><span class="hljs-tag">        <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">&quot;wrap_content&quot;</span></span><br><span class="hljs-tag">        <span class="hljs-attr">android:text</span>=<span class="hljs-string">&quot;URI 方式&quot;</span> /&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">Button</span></span><br><span class="hljs-tag">        <span class="hljs-attr">android:id</span>=<span class="hljs-string">&quot;@+id/btn_callback&quot;</span></span><br><span class="hljs-tag">        <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">&quot;wrap_content&quot;</span></span><br><span class="hljs-tag">        <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">&quot;wrap_content&quot;</span></span><br><span class="hljs-tag">        <span class="hljs-attr">android:text</span>=<span class="hljs-string">&quot;有 callback 方式&quot;</span> /&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">LinearLayout</span>&gt;</span><br></code></pre></td></tr></table></figure><p>2、修改<code>component_demo\app\src\main\java\io\weichao\component_demo\MainActivity.java</code>为：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> io.weichao.component_demo;<br><br><span class="hljs-keyword">import</span> android.content.Intent;<br><span class="hljs-keyword">import</span> android.support.v7.app.AppCompatActivity;<br><span class="hljs-keyword">import</span> android.os.Bundle;<br><span class="hljs-keyword">import</span> android.text.TextUtils;<br><span class="hljs-keyword">import</span> android.view.View;<br><span class="hljs-keyword">import</span> android.widget.Button;<br><span class="hljs-keyword">import</span> android.widget.Toast;<br><br><span class="hljs-keyword">import</span> com.luojilab.component.componentlib.router.Router;<br><span class="hljs-keyword">import</span> com.luojilab.component.componentlib.router.ui.UIRouter;<br><br><span class="hljs-keyword">import</span> io.weichao.component_service.Component1Service;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MainActivity</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">AppCompatActivity</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">View</span>.OnClickListener &#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onCreate</span><span class="hljs-params">(Bundle savedInstanceState)</span> &#123;<br>        <span class="hljs-built_in">super</span>.onCreate(savedInstanceState);<br>        setContentView(R.layout.activity_main);<br>        <span class="hljs-type">Button</span> <span class="hljs-variable">bundleBtn</span> <span class="hljs-operator">=</span> findViewById(R.id.btn_bundle);<br>        <span class="hljs-type">Button</span> <span class="hljs-variable">uriBtn</span> <span class="hljs-operator">=</span> findViewById(R.id.btn_uri);<br>        <span class="hljs-type">Button</span> <span class="hljs-variable">callbackBtn</span> <span class="hljs-operator">=</span> findViewById(R.id.btn_callback);<br>        bundleBtn.setOnClickListener(<span class="hljs-built_in">this</span>);<br>        uriBtn.setOnClickListener(<span class="hljs-built_in">this</span>);<br>        callbackBtn.setOnClickListener(<span class="hljs-built_in">this</span>);<br><br>        <span class="hljs-type">Router</span> <span class="hljs-variable">router</span> <span class="hljs-operator">=</span> Router.getInstance();<br>        <span class="hljs-keyword">if</span> (router.getService(Component1Service.class.getSimpleName()) != <span class="hljs-literal">null</span>) &#123;<br>            <span class="hljs-type">Component1Service</span> <span class="hljs-variable">service</span> <span class="hljs-operator">=</span> (Component1Service) router.getService(Component1Service.class.getSimpleName());<br>            Toast.makeText(<span class="hljs-built_in">this</span>, service.getComponentStr(), Toast.LENGTH_LONG).show();<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onClick</span><span class="hljs-params">(View v)</span> &#123;<br>        <span class="hljs-type">String</span> <span class="hljs-variable">arg</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;app arg&quot;</span>;<br><br>        <span class="hljs-type">Bundle</span> <span class="hljs-variable">bundle</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Bundle</span>();<br>        bundle.putString(<span class="hljs-string">&quot;arg&quot;</span>, arg);<br><br>        <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">URI_LEGAL</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;DDComp://component1/main?arg=&quot;</span> + arg;<br><br>        <span class="hljs-keyword">switch</span> (v.getId()) &#123;<br>            <span class="hljs-keyword">case</span> R.id.btn_bundle:<br>                UIRouter.getInstance().openUri(<span class="hljs-built_in">this</span>, <span class="hljs-string">&quot;DDComp://component1/main&quot;</span>, bundle);<br>                <span class="hljs-keyword">break</span>;<br>            <span class="hljs-keyword">case</span> R.id.btn_uri:<br>                UIRouter.getInstance().openUri(<span class="hljs-built_in">this</span>, URI_LEGAL, <span class="hljs-literal">null</span>);<br>                <span class="hljs-keyword">break</span>;<br>            <span class="hljs-keyword">case</span> R.id.btn_callback:<br>                UIRouter.getInstance().openUri(<span class="hljs-built_in">this</span>, URI_LEGAL, <span class="hljs-literal">null</span>, <span class="hljs-number">7777</span>);<br>                <span class="hljs-keyword">break</span>;<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onActivityResult</span><span class="hljs-params">(<span class="hljs-type">int</span> requestCode, <span class="hljs-type">int</span> resultCode, Intent data)</span> &#123;<br>        <span class="hljs-built_in">super</span>.onActivityResult(requestCode, resultCode, data);<br>        <span class="hljs-keyword">if</span> (data != <span class="hljs-literal">null</span>) &#123;<br>            <span class="hljs-keyword">if</span> (requestCode == <span class="hljs-number">7777</span> &amp;&amp; resultCode == RESULT_OK) &#123;<br>                <span class="hljs-type">String</span> <span class="hljs-variable">callbackArg</span> <span class="hljs-operator">=</span> data.getStringExtra(<span class="hljs-string">&quot;callbackArg&quot;</span>);<br>                <span class="hljs-keyword">if</span> (!TextUtils.isEmpty(callbackArg)) &#123;<br>                    Toast.makeText(<span class="hljs-built_in">this</span>, callbackArg, Toast.LENGTH_LONG).show();<br>                &#125;<br>            &#125;<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="报错androidcontentactivitynotfoundexception-unable-to-find-explicit-activity-class-xxactivity-have-you-declared-this-activity-in-your-androidmanifestxml"><a class="markdownIt-Anchor" href="#报错androidcontentactivitynotfoundexception-unable-to-find-explicit-activity-class-xxactivity-have-you-declared-this-activity-in-your-androidmanifestxml"></a> <strong>报错：android.content.ActivityNotFoundException: Unable to find explicit activity class {xxActivity}; have you declared this activity in your AndroidManifest.xml?</strong></h4><p>修改<code>component_demo\component1\src\main\AndroidManifest.xml</code>为：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">&quot;1.0&quot;</span> encoding=<span class="hljs-string">&quot;utf-8&quot;</span>?&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">manifest</span> <span class="hljs-attr">xmlns:android</span>=<span class="hljs-string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span><br><span class="hljs-tag">    <span class="hljs-attr">package</span>=<span class="hljs-string">&quot;io.weichao.component1&quot;</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">application</span></span><br><span class="hljs-tag">        <span class="hljs-attr">android:allowBackup</span>=<span class="hljs-string">&quot;true&quot;</span></span><br><span class="hljs-tag">        <span class="hljs-attr">android:icon</span>=<span class="hljs-string">&quot;@mipmap/ic_launcher&quot;</span></span><br><span class="hljs-tag">        <span class="hljs-attr">android:label</span>=<span class="hljs-string">&quot;@string/app_name&quot;</span></span><br><span class="hljs-tag">        <span class="hljs-attr">android:roundIcon</span>=<span class="hljs-string">&quot;@mipmap/ic_launcher_round&quot;</span></span><br><span class="hljs-tag">        <span class="hljs-attr">android:supportsRtl</span>=<span class="hljs-string">&quot;true&quot;</span></span><br><span class="hljs-tag">        <span class="hljs-attr">android:theme</span>=<span class="hljs-string">&quot;@style/AppTheme&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">activity</span> <span class="hljs-attr">android:name</span>=<span class="hljs-string">&quot;.MainActivity&quot;</span> /&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">application</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">manifest</span>&gt;</span><br></code></pre></td></tr></table></figure><h4 id="报错javalangnosuchfielderror-no-field-xx-in-class-lxxrid-or-its-superclasses-declaration-of-xxrid-appears-in-dataappxxbaseapk"><a class="markdownIt-Anchor" href="#报错javalangnosuchfielderror-no-field-xx-in-class-lxxrid-or-its-superclasses-declaration-of-xxrid-appears-in-dataappxxbaseapk"></a> <strong>报错：java.lang.NoSuchFieldError: No field xx in class Lxx/R<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi><mi>d</mi><mo separator="true">;</mo><mi>o</mi><mi>r</mi><mi>i</mi><mi>t</mi><mi>s</mi><mi>s</mi><mi>u</mi><mi>p</mi><mi>e</mi><mi>r</mi><mi>c</mi><mi>l</mi><mi>a</mi><mi>s</mi><mi>s</mi><mi>e</mi><mi>s</mi><mo stretchy="false">(</mo><mi>d</mi><mi>e</mi><mi>c</mi><mi>l</mi><mi>a</mi><mi>r</mi><mi>a</mi><mi>t</mi><mi>i</mi><mi>o</mi><mi>n</mi><mi>o</mi><msup><mi>f</mi><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup><mi>x</mi><mi>x</mi><mi mathvariant="normal">.</mi><mi>R</mi></mrow><annotation encoding="application/x-tex">id; or its superclasses (declaration of &#x27;xx.R</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.001892em;vertical-align:-.25em"></span><span class="mord mathnormal">i</span><span class="mord mathnormal">d</span><span class="mpunct">;</span><span class="mspace" style="margin-right:.16666666666666666em"></span><span class="mord mathnormal">o</span><span class="mord mathnormal" style="margin-right:.02778em">r</span><span class="mord mathnormal">i</span><span class="mord mathnormal">t</span><span class="mord mathnormal">s</span><span class="mord mathnormal">s</span><span class="mord mathnormal">u</span><span class="mord mathnormal">p</span><span class="mord mathnormal">e</span><span class="mord mathnormal" style="margin-right:.02778em">r</span><span class="mord mathnormal">c</span><span class="mord mathnormal" style="margin-right:.01968em">l</span><span class="mord mathnormal">a</span><span class="mord mathnormal">s</span><span class="mord mathnormal">s</span><span class="mord mathnormal">e</span><span class="mord mathnormal">s</span><span class="mopen">(</span><span class="mord mathnormal">d</span><span class="mord mathnormal">e</span><span class="mord mathnormal">c</span><span class="mord mathnormal" style="margin-right:.01968em">l</span><span class="mord mathnormal">a</span><span class="mord mathnormal" style="margin-right:.02778em">r</span><span class="mord mathnormal">a</span><span class="mord mathnormal">t</span><span class="mord mathnormal">i</span><span class="mord mathnormal">o</span><span class="mord mathnormal">n</span><span class="mord mathnormal">o</span><span class="mord"><span class="mord mathnormal" style="margin-right:.10764em">f</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:.751892em"><span style="top:-3.063em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span><span class="mord mathnormal">x</span><span class="mord mathnormal">x</span><span class="mord">.</span><span class="mord mathnormal" style="margin-right:.00773em">R</span></span></span></span>id’ appears in /data/app/xx/base.apk)</strong></h4><p>重命名<code>component_demo\component1\src\main\res\layout\activity_main.xml</code>为<code>component_demo\component1\src\main\res\layout\component1_activity_main.xml</code>。</p><p>修改<code>component_demo\component1\src\main\res\layout\component1_activity_main.xml</code>为：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">&quot;1.0&quot;</span> encoding=<span class="hljs-string">&quot;utf-8&quot;</span>?&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">RelativeLayout</span> <span class="hljs-attr">xmlns:android</span>=<span class="hljs-string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span><br><span class="hljs-tag">    <span class="hljs-attr">xmlns:tools</span>=<span class="hljs-string">&quot;http://schemas.android.com/tools&quot;</span></span><br><span class="hljs-tag">    <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">&quot;match_parent&quot;</span></span><br><span class="hljs-tag">    <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">&quot;match_parent&quot;</span></span><br><span class="hljs-tag">    <span class="hljs-attr">tools:context</span>=<span class="hljs-string">&quot;.MainActivity&quot;</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">TextView</span></span><br><span class="hljs-tag">        <span class="hljs-attr">android:id</span>=<span class="hljs-string">&quot;@+id/textview&quot;</span></span><br><span class="hljs-tag">        <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">&quot;wrap_content&quot;</span></span><br><span class="hljs-tag">        <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">&quot;wrap_content&quot;</span></span><br><span class="hljs-tag">        <span class="hljs-attr">android:text</span>=<span class="hljs-string">&quot;component1&quot;</span> /&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">RelativeLayout</span>&gt;</span><br></code></pre></td></tr></table></figure><h3 id="运行成功-3"><a class="markdownIt-Anchor" href="#运行成功-3"></a> <strong>运行成功</strong></h3><hr></div><hr><div><div class="post-metas my-3"></div><div class="license-box my-3"><div class="license-title"><div>使用 JIMU 框架实现组件化</div><div>https://weichao.io/638a24c13995/</div></div><div class="license-meta"><div class="license-meta-item"><div>作者</div><div>魏超</div></div><div class="license-meta-item license-meta-date"><div>发布于</div><div>2018年4月19日</div></div><div class="license-meta-item license-meta-date"><div>更新于</div><div>2022年12月4日</div></div><div class="license-meta-item"><div>许可协议</div><div><a target="_blank" href="https://creativecommons.org/licenses/by-nc-sa/4.0/"><span class="hint--top hint--rounded" aria-label="BY - 署名"><i class="iconfont icon-by"></i> </span></a><a target="_blank" href="https://creativecommons.org/licenses/by-nc-sa/4.0/"><span class="hint--top hint--rounded" aria-label="NC - 非商业性使用"><i class="iconfont icon-nc"></i> </span></a><a target="_blank" href="https://creativecommons.org/licenses/by-nc-sa/4.0/"><span class="hint--top hint--rounded" aria-label="SA - 相同方式共享"><i class="iconfont icon-sa"></i></span></a></div></div></div><div class="license-icon iconfont"></div></div><div class="post-prevnext my-3"><article class="post-prev col-6"><a href="/13759d3c0e43/" title="FFmpeg 简介"><i class="iconfont icon-arrowleft"></i> <span class="hidden-mobile">FFmpeg 简介</span> <span class="visible-mobile">上一篇</span></a></article><article class="post-next col-6"><a href="/178acade2181/" title="使用 libstreaming 实现同屏时的代码执行流程"><span class="hidden-mobile">使用 libstreaming 实现同屏时的代码执行流程</span> <span class="visible-mobile">下一篇</span> <i class="iconfont icon-arrowright"></i></a></article></div></div></article></div></div></div><div class="side-col d-none d-lg-block col-lg-2"><aside class="sidebar" style="margin-left:-1rem"><div id="toc"><p class="toc-header"><i class="iconfont icon-list"></i> <span>目录</span></p><div class="toc-body" id="toc-body"></div></div></aside></div></div></div><a id="scroll-top-button" aria-label="TOP" href="#" role="button"><i class="iconfont icon-arrowup" aria-hidden="true"></i></a><div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable modal-lg" role="document"><div class="modal-content"><div class="modal-header text-center"><h4 class="modal-title w-100 font-weight-bold">搜索</h4><button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button></div><div class="modal-body mx-3"><div class="md-form mb-5"><input type="text" id="local-search-input" class="form-control validate"> <label data-error="x" data-success="v" for="local-search-input">关键词</label></div><div class="list-group" id="local-search-result"></div></div></div></div></div></main><footer><div class="footer-inner"><div class="footer-content"><a href="https://hexo.io" target="_blank" rel="nofollow noopener"><i class="iconfont icon-my-hexo"></i>&nbsp;<span>博客框架Hexo&nbsp;&nbsp;</span></a> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><i class="iconfont icon-my-theme"></i>&nbsp;<span>博客主题Fluid&nbsp;&nbsp;</span></a> <a href="https://weichao.io" target="_blank" rel="nofollow noopener"><i class="iconfont icon-my-copyright"></i>&nbsp;2023<span>魏超</span></a></div><div class="statistics"><span id="leancloud-site-pv-container" style="display:none">总访问量 <span id="leancloud-site-pv"></span> 次 </span><span id="leancloud-site-uv-container" style="display:none">总访客数 <span id="leancloud-site-uv"></span> 人</span></div></div></footer><script src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js"></script><link rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css"><script>NProgress.configure({showSpinner:!1,trickleSpeed:100}),NProgress.start(),window.addEventListener("load",(function(){NProgress.done()}))</script><script src="https://lib.baomitu.com/jquery/3.6.0/jquery.min.js"></script><script src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js"></script><script src="/js/events.js"></script><script src="/js/plugins.js"></script><script src="/js/img-lazyload.js"></script><script>Fluid.utils.createScript("https://lib.baomitu.com/tocbot/4.18.2/tocbot.min.js",(function(){var t=jQuery("#toc");if(0!==t.length&&window.tocbot){var i=jQuery("#board-ctn").offset().top;window.tocbot.init(Object.assign({tocSelector:"#toc-body",contentSelector:".markdown-body",linkClass:"tocbot-link",activeLinkClass:"tocbot-active-link",listClass:"tocbot-list",isCollapsedClass:"tocbot-is-collapsed",collapsibleClass:"tocbot-is-collapsible",scrollSmooth:!0,includeTitleTags:!0,headingsOffset:-i},CONFIG.toc)),t.find(".toc-list-item").length>0&&t.css("visibility","visible"),Fluid.events.registerRefreshCallback((function(){if("tocbot"in window){tocbot.refresh();var t=jQuery("#toc");if(0===t.length||!tocbot)return;t.find(".toc-list-item").length>0&&t.css("visibility","visible")}}))}}))</script><script src="https://lib.baomitu.com/clipboard.js/2.0.11/clipboard.min.js"></script><script>Fluid.plugins.codeWidget()</script><script>Fluid.utils.createScript("https://lib.baomitu.com/anchor-js/4.3.1/anchor.min.js",(function(){window.anchors.options={placement:CONFIG.anchorjs.placement,visible:CONFIG.anchorjs.visible},CONFIG.anchorjs.icon&&(window.anchors.options.icon=CONFIG.anchorjs.icon);var n=(CONFIG.anchorjs.element||"h1,h2,h3,h4,h5,h6").split(","),o=[];for(var s of n)o.push(".markdown-body > "+s.trim());"left"===CONFIG.anchorjs.placement&&(window.anchors.options.class="anchorjs-link-left"),window.anchors.add(o.join(", ")),Fluid.events.registerRefreshCallback((function(){if("anchors"in window){anchors.removeAll();var n=(CONFIG.anchorjs.element||"h1,h2,h3,h4,h5,h6").split(","),o=[];for(var s of n)o.push(".markdown-body > "+s.trim());"left"===CONFIG.anchorjs.placement&&(anchors.options.class="anchorjs-link-left"),anchors.add(o.join(", "))}}))}))</script><script>Fluid.utils.createScript("https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js",(function(){Fluid.plugins.fancyBox()}))</script><script defer src="/js/leancloud.js"></script><script src="/js/local-search.js"></script><script src="/js/boot.js"></script><noscript><div class="noscript-warning">博客在允许 JavaScript 运行的环境下浏览效果更佳</div></noscript></body></html>